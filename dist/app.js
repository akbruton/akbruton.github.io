(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},platypus_1=require("platypus"),home_vc_1=require("../viewcontrols/home/home.vc"),services_vc_1=require("../viewcontrols/services/services.vc"),editor_vc_1=require("../viewcontrols/editor/editor.vc"),publications_vc_1=require("../viewcontrols/publications/publications.vc"),testimonials_vc_1=require("../viewcontrols/testimonials/testimonials.vc"),MyApp=function(e){function t(t,r){e.call(this),r.routingType=r.HASH,t.configure([{pattern:"",view:home_vc_1.default},{pattern:"services",view:services_vc_1.default},{pattern:"editor",view:editor_vc_1.default},{pattern:"publications",view:publications_vc_1.default},{pattern:"testimonials",view:testimonials_vc_1.default}])}return __extends(t,e),t.prototype.error=function(e){console.log(e.error)},t}(platypus_1.App);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=MyApp,platypus_1.register.app("app",MyApp,[platypus_1.routing.Router,platypus_1.web.IBrowserConfig]);
},{"../viewcontrols/editor/editor.vc":9,"../viewcontrols/home/home.vc":11,"../viewcontrols/publications/publications.vc":13,"../viewcontrols/services/services.vc":15,"../viewcontrols/testimonials/testimonials.vc":17,"platypus":18}],2:[function(require,module,exports){
"use strict";require("platypus"),require("platypusui"),require("./app/app"),require("./templatecontrols/footer/footer.tc"),require("./templatecontrols/navbar/navbar.tc");
},{"./app/app":1,"./templatecontrols/footer/footer.tc":4,"./templatecontrols/navbar/navbar.tc":6,"platypus":18,"platypusui":19}],3:[function(require,module,exports){
module.exports='<div class="foot">\n    Contact us at <a href="mailto:contact@akdocuments.com">contact@akdocuments.com</a>.\n</div>\n<div class="bottombar">\n    Copyright &copy; AK Bruton 2016\n</div>';
},{}],4:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},platypus_1=require("platypus"),FooterTemplateControl=function(t){function e(){t.apply(this,arguments),this.templateString=require("./footer.tc.html")}return __extends(e,t),e}(platypus_1.ui.TemplateControl);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=FooterTemplateControl,platypus_1.register.control("footer",FooterTemplateControl);
},{"./footer.tc.html":3,"platypus":18}],5:[function(require,module,exports){
module.exports='<div class="logo">\n    <a href="/"><img src="/images/logodark.png"></a>\n</div>\n<div class="links">\n    <a href="/">home</a>\n    <a href="mailto:contact@akdocuments.com">contact</a>\n    <plat-link plat-options="{ view: \'editor-vc\' }">editor</plat-link>\n    <plat-link plat-options="{ view: \'services-vc\' }">services</plat-link>\n    <plat-link plat-options="{ view: \'publications-vc\' }">publications</plat-link>\n    <plat-link plat-options="{ view: \'testimonials-vc\' }">testimonials</plat-link>\n</div>';
},{}],6:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},platypus_1=require("platypus"),NavbarTemplateControl=function(t){function e(){t.apply(this,arguments),this.templateString=require("./navbar.tc.html")}return __extends(e,t),e}(platypus_1.ui.TemplateControl);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=NavbarTemplateControl,platypus_1.register.control("navbar",NavbarTemplateControl);
},{"./navbar.tc.html":5,"platypus":18}],7:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},platypus_1=require("platypus"),BaseViewControl=function(t){function e(){t.apply(this,arguments),this.context={}}return __extends(e,t),e}(platypus_1.ui.ViewControl);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=BaseViewControl;
},{"platypus":18}],8:[function(require,module,exports){
module.exports='<h1>Meet the Editor</h1>\n\n<img src="/images/AK.jpg">\n<p>AK Bruton graduated with honors from Auburn University \n    with a degree in Communication in 2012. She is a published \n    author, focusing on subjects such as young children \n    dealing with trauma, cultural diversity, and psychology. \n    She has edited books, articles, and dissertations for \n    several years, but professionally for four years.</p>\n<p>She recently completed a Front-End Engineering course\n    at Depot/U, a program located in Innovation Depot and\n    created by the web development company Platypi. Completion\n    of this course resulted in her certification as a web\n    developer dealing with HTML/CSS, LESS, Javascript,\n    Typescript, JQuery, and AngularJS. She also\n    received certification in working with cross-browser\n    compatibility, responsive design, and APIs.</p>\n<p>After work hours, AK enjoys blogging, web design, and\n    trivia. She is a grammar nut and loves to write poetry\n    and prose, even when she\'s not working. She is eager\n    and willing to collaborate with you to make your document\n    or website the best it can be!</p>';
},{}],9:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},platypus_1=require("platypus"),base_vc_1=require("../base/base.vc"),EditorViewControl=function(t){function e(){t.apply(this,arguments),this.templateString=require("./editor.vc.html"),this.context={}}return __extends(e,t),e}(base_vc_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=EditorViewControl,platypus_1.register.viewControl("editor-vc",EditorViewControl);
},{"../base/base.vc":7,"./editor.vc.html":8,"platypus":18}],10:[function(require,module,exports){
module.exports='<h1>Welcome to AK Documents</h1>\n<div class="folders">\n    <img src="images/folders2.jpg">\n</div>\n<div class="welcome">\n    <p><b>AK Document Consultation</b> provides editing and formatting services \n    to all types of professional backgrounds. We work with you to create documents that \n    are grammatically correct, readable, effective, and formatted to your liking or \n    requirements. We work within your guidelines to produce high-quality documents.</p>\n    <p><b>New Service:</b> Front-End Web Development</p> \n    <p><a href="mailto:contact@akdocuments.com">Contact us</a> for more information.</p>\n</div>\n<div class="services">\n    <h2>Editorial Services</h2>\n    <ul>\n        <li>Dissertations</li>\n        <li>Theses</li>\n        <li>Papers</li>\n        <li>Powerpoint Presentations</li>\n        <li>Books</li>\n        <li>Brochures</li>\n        <li>Proposals</li>\n        <li>Resumés/Curriculum Vitae</li>\n        <li>Cover letters</li>\n        <li>Fiction and Non-fiction Books</li>\n        <li>...and more!</li>\n    </ul>\n</div>';
},{}],11:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},platypus_1=require("platypus"),base_vc_1=require("../base/base.vc"),HomeViewControl=function(e){function t(){e.apply(this,arguments),this.templateString=require("./home.vc.html"),this.context={}}return __extends(t,e),t}(base_vc_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=HomeViewControl,platypus_1.register.viewControl("home-vc",HomeViewControl);
},{"../base/base.vc":7,"./home.vc.html":10,"platypus":18}],12:[function(require,module,exports){
module.exports='<h1>Publications</h1>\n\n<img src="images/shelves.jpg">\n\n<div class="publications">\n    <p>Aldridge, J., Kilgo, J., & <b>Bruton, A. K.</b> (2016). Beyond the Brady Bunch: \n    Hybrid families and their evolving relationships with early childhood \n    education. <i>Childhood Education</i>, <i>92</i>(2), 140-48.</p>\n    \n\n    <p>Aldridge, J., Kilgo, J., & <b>Bruton, A.K.</b> (2015). Transforming \n    transdisciplinary early intervention and early childhood special \n    education through intercultural education. <i>International Journal of \n    Early Childhood Special Education, 7</i>(2), 343–360.</p>\n    \n\n    <p>Aldridge, J., Kilgo, J., Jepkemboi, G., & <b>Bruton, A. K.</b> (2014). Forgotten \n    women of educational psychology: Redeeming their contributions in the 21st \n    century. <i>International Journal of Case Studies, 3</i>(7), 55-61.</p>\n    \n\n    <p>Aldridge, J., Kilgo, J., <b>Bruton, A. K.</b>, & Jepkemboi, G. (2014). The first \n    women psychologists: Documenting the influence of G. Stanley Hall. <i>SOP \n    Transactions Psychology, 1</i>(3), 1-10.</p>\n    \n\n    <p><b>Bruton, A. K.</b>, Kilgo, J., & Aldridge, J. (2013). Recommended resources \n    and practices for teachers, other school personnel, and families in \n    responding to emergency situations and the aftermath of tragedies. <i>Focus \n    on Teacher Education, 12</i>(4), 1-3.</p>\n</div>';
},{}],13:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},platypus_1=require("platypus"),base_vc_1=require("../base/base.vc"),PublicationsViewControl=function(t){function e(){t.apply(this,arguments),this.templateString=require("./publications.vc.html"),this.context={}}return __extends(e,t),e}(base_vc_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PublicationsViewControl,platypus_1.register.viewControl("publications-vc",PublicationsViewControl);
},{"../base/base.vc":7,"./publications.vc.html":12,"platypus":18}],14:[function(require,module,exports){
module.exports='<h1>Services</h1>\n\n<img src="images/stack.jpg">\n\n<div class="intro">\n    <p><b>AK Document Consultation</b>  will provide a comprehensive\n    edit of your document, checking for grammar, spelling, punctuation,\n    clarity, cohesion, and flow. We can format your document based on\n    your style guide, such as APA, MLA, or Chicago, as well as your\n    school- or publisher-specific formatting guidelines. Finally, we\n    can assess your document\'s design to ensure its effectiveness and\n    readability.</p>\n</div>\n\n<h2>How Does It Work?</h2>\n<ol class="process">\n    <li>You send us an <a href="mailto:contact@akdocuments.com">email</a> with\n        the basic details of your document. (Due dates, document length, etc.)</li>\n    <li>We send you a quote within 24 hours.</li>\n    <li>Once you approve the quote, we begin editing, using track\n        changes in Microsoft Word.</li>\n    <li>We send you your edited document.</li>\n    <li>When consultation is complete, we will send you an invoice. You can\n        send your payment in the form of a personal check.</li>\n</ol>';
},{}],15:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},platypus_1=require("platypus"),base_vc_1=require("../base/base.vc"),ServicesViewControl=function(e){function t(){e.apply(this,arguments),this.templateString=require("./services.vc.html"),this.context={}}return __extends(t,e),t}(base_vc_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ServicesViewControl,platypus_1.register.viewControl("services-vc",ServicesViewControl);
},{"../base/base.vc":7,"./services.vc.html":14,"platypus":18}],16:[function(require,module,exports){
module.exports='<h1>Testimonials</h1>\n\n<img src="images/coding.jpg">\n\n<br>\n\n<div class="testimonial">\n    <p>"I have been fortunate to work with AK Bruton for over two years \n        with writing projects and dissertations. I consider AK Bruton to \n        be my primary editor when I write a book or article or need \n        assistance with the development of a powerpoint. Ms. Bruton \n        specializes in editing dissertations. Her dedication and hard \n        work to this endeavor has produced a 100% acceptance rate in the \n        Graduate School at UAB to date. On a personal note, I have chaired \n        36 dissertations and served on countless other dissertation \n        committees as a faculty member. All of my students needed \n        editorial support to meet Graduate School guidelines. Ms. Bruton \n        is the best editor I know. I highly recommend her to any graduate \n        student working on a thesis or dissertation. Because I use her for \n        all of my editing, I would suggest that anyone contact AK early in \n        their writing process because she is understandably in great \n        demand. I make this recommendation without any reservation \n        whatsoever! Any student or faculty member would be fortunate to \n        secure someone with AK’s credentials and abilities in editing."</p>\n        <div class="source">&mdash; Dr. Jerry Aldridge,\n        Professor Emeritus<br>\n        University of Alabama at Birmingham (UAB)</div>\n</div>\n<div class="testimonial">\n    <p>AK Bruton editing services are the best. The feedback is significant,\n        easy to understand, and appropriate for multiple audiences. The customer\n        service and friendliness of the staff is high quality. Overall, AK Bruton\n        is my favorite editing service.\n    </p>\n        <div class="source">&mdash; Dr. Jamal Cooks, Professor<br>\n            San Francisco State University</div>\n</div>\n<div class="testimonial">\n    <p>Ms. Bruton was highly recommended to me by several colleagues as \n        the best choice to edit my dissertation. From beginning to end, \n        it was a true pleasure working with her. She has a vast knowledge \n        of both APA style and the UAB Graduate School guidelines. \n        Furthermore, with a keen eye for details, she found grammatical and \n        typo errors that I continued to overlook on my own and offered \n        suggestions to help with clarity and flow. Ms. Bruton always returned \n        my work to me in the most timely and efficient manner, usually \n        within one or two days. After working closely together throughout \n        the editing process, I felt like I gained a new friend! I will \n        definitely use Ms. Bruton again for all my editing needs.</p>\n        <div class="source">&mdash; Melissa G. Whetstone, PhD</div>\n</div>\n<div class="testimonial">\n    <p>When it came time to find someone to edit my dissertation, I was given \n        AK Bruton’s name from a colleague. There are not enough words in my \n        vocabulary to describe the wonderful experience I had working with \n        Ms. Bruton. Before she ever agreed to take on my dissertation, she \n        willingly answered all of my questions and eased my anxiety over this \n        final requirement for graduation. All contact I had with her was 100% \n        positive. She replied to all of my emails, as well as edited my \n        entire document, in a prompt and timely manner. Her knowledge of APA \n        and UAB’s graduate school format is extensive. I have already \n        recommended Ms. Bruton’s editorial services to other doctoral students \n        and I will continue to do so.</p>\n        <div class="source">&mdash; Amanda Daniel Pendergrass, PhD</div>\n</div>';
},{}],17:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function s(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},platypus_1=require("platypus"),base_vc_1=require("../base/base.vc"),TestimonialsViewControl=function(t){function e(){t.apply(this,arguments),this.templateString=require("./testimonials.vc.html"),this.context={}}return __extends(e,t),e}(base_vc_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TestimonialsViewControl,platypus_1.register.viewControl("testimonials-vc",TestimonialsViewControl);
},{"../base/base.vc":7,"./testimonials.vc.html":16,"platypus":18}],18:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},plat;!function(t){"use strict;";function e(){}function n(t,e,n,i,r,o){Object.defineProperty(t,e,{value:n,enumerable:i===!0,configurable:r===!0,writable:o===!0})}function i(t,e,n,i,r){Object.defineProperty(t,e,{get:function(){return n},enumerable:i===!0,configurable:r===!0})}function r(t,e,i){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];if(b(i))return i;var u,c,h;return h=y(e)?e:e?function(t,e,i){n(t,e,i,!0,!0,!0)}:function(t,e,n){t[e]=n},v(o)&&o.push(i),k(function(e,n){a(e)&&(u=Object.keys(e),k(function(n){if(c=e[n],t){if(x(c))return void r(t,h,i[n]||(i[n]=[]),c);if(w(c))return void h(i,n,new Date(c.getTime()));if(f(c))return void h(i,n,new RegExp(c));if(l(c))return void h(i,n,c.cloneNode(!0));if(p(c))return void h(i,n,c);if(a(c))return void r(t,h,i[n]||(i[n]={}),c)}h(i,n,c)},u))},o),i}function o(t,e){if(!a(t))return t;if(w(t))return new Date(t.getTime());if(f(t))return new RegExp(t);if(l(t))return t.cloneNode(e);if(p(t))return t;if(s(t))return new t.constructor(t.message);var n={};return x(t)&&(n=[]),m(e)&&e?r(!0,!1,n,t):r(!1,!1,n,t)}function s(t){return io.call(t)===oo}function a(t){return null!=t&&"object"==typeof t}function u(t){return!!(t&&t.document&&t.setInterval)}function c(t){return!(!t||t.nodeType!==Node.DOCUMENT_NODE)}function l(t){return!(!t||"number"!=typeof t.nodeType)}function h(t){return!(!t||t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)}function p(t){return a(t)&&io.call(t)===so}function _(t){return"string"==typeof t||a(t)&&io.call(t)===po}function f(t){return a(t)&&io.call(t)===ho}function d(t){return a(t)&&(io.call(t)===_o||y(t.then))}function v(t){return!!b(t)||(_(t)||x(t)?0===t.length:!!a(t)&&0===Object.keys(t).length)}function m(t){return t===!0||t===!1||a(t)&&io.call(t)===uo}function g(t){return("number"==typeof t||a(t)&&io.call(t)===lo)&&!isNaN(t)}function y(t){return"function"==typeof t}function b(t){return null===t||void 0===t}function C(t){return void 0===t}function x(t){return eo?Array.isArray(t):io.call(t)===ao}function E(t){return!(b(t)||u(t)||y(t))&&(_(t)||t.length>=0)}function w(t){return"object"==typeof t&&io.call(t)===co}function T(t,e,n){var i=[];return b(e)?i:y(e.filter)?e.filter(t,n):(k(function(e,n,r){t(e,n,r)&&i.push(e)},e),i)}function N(t,e){return T(function(e){return!P(function(t,n){return e[n]!==t},t)},e)}function k(t,e,n){if(b(e)||!a(e)&&!E(e))return e;var i,r,o;if(y(e.forEach))return e.forEach(t,n);if(E(e))for(i=0,o=e.length;i<o;++i)t.call(n,e[i],i,e);else{var s=Object.keys(e);for(o=s.length;s.length>0;)r=s.shift(),t.call(n,e[r],r,e)}return e}function S(t,e,n){var i=[];return b(e)?i:y(e.map)?e.map(t,n):(k(function(r,o){i.push(t.call(n,r,o,e))},e),i)}function I(t,e,n){return Nt=Nt||plat.acquire($t),Nt.all(S(t,e,n))}function R(t,e,n,i){Nt=Nt||plat.acquire($t);var r=Nt.resolve([]);if(!x(e))return r;t=t.bind(n);var o=function(e,n,i,r){return e.then(function(e){return t(n,i,r).then(function(t){return e.concat(t)})})};return i===!0?e.reduceRight(o,r):e.reduce(o,r)}function A(t,e,n){return R(t,e,n)}function j(t,e,n){return R(t,e,n,!0)}function L(t,e){return S(function(e){return e[t]},e)}function P(t,e,n){if(b(e)||y(e))return!1;var i,r,o,s;if(y(e.some))return e.some(t,n);if(E(e)){for(i=0,o=e.length;i<o;++i)if(s=t.call(n,e[i],i,e),s===!0)return!0}else{var a=Object.keys(e);for(o=a.length;a.length>0;)if(r=a.shift(),s=t.call(n,e[r],r,e),s===!0)return!0}return!1}function O(t,e,n){return F(t,0,e,n)}function F(t,e,n,i){function r(){t.apply(i,n)}var o=setTimeout(r,e);return function(){clearTimeout(o)}}function M(t,e,n,i){function r(){t.apply(i,n)}var o=setInterval(r,e);return function(){clearInterval(o)}}function D(t,n){kt=kt||plat.acquire(Vt);var i=kt.requestAnimationFrame;if(C(i))return O(function(){t.call(n,Date.now())});var r=i(t.bind(n)),o=kt.cancelAnimationFrame||e;return function(){o(r)}}function z(t){function e(){return t+n.join("")}b(t)&&(t="");var n=no[t];b(n)&&(n=no[t]=["0","/"]);for(var i,r=n.length;r--;){if(i=n[r].charCodeAt(0),57===i)return n[r]="A",e();if(90===i)return n[r]="a",e();if(122!==i)return n[r]=String.fromCharCode(i+1),e();n[r]="0"}return n.unshift("0"),e()}function B(t){return!_(t)||v(t)?t:(t=t.charAt(0).toLowerCase()+t.slice(1),St=St||plat.acquire(te).camelCaseRegex,t.replace(St,function(t,e,n,i){return i?n.toUpperCase():n}))}function U(t,e){return!_(t)||v(t)?t:(b(e)&&(e=""),It=It||plat.acquire(te).capitalCaseRegex,t.replace(It,function(t,n){return n?e+t.toLowerCase():t.toLowerCase()}))}function $(t,e){return b(t)||delete t[e],t}function V(t,e){return b(t)?t:t[e]}function q(t){if(!v(t)){for(var e,n=t.split("&"),i={},r=n.length,o=0;o<r;++o)e=n[o].split("="),i[e[0]]=e[1];return i}}function H(t){var e="";return e+=S(function(t,e){return e+"="+t},t).join("&"),v(e)||(e="?"+e),e}function Q(t){return x(t)?t.reduce(function(t,e){return t&&e!==!1},!0):!m(t)||t}function W(t,e,n){var i=h(e),r=!l(e),o=i?e:(Rt||(Rt=plat.acquire(Qt))).createDocumentFragment();r&&(e=o);var s,a=x(t)?t:Array.prototype.slice.call(t),u=a.length;if(n===!0){var c=void 0;for(s=0;s<u;++s)c=a[s].cloneNode(!0),o.insertBefore(c,null)}else for(s=0;s<u;++s)o.insertBefore(a[s],null);return i||r||e.appendChild(o),e}function Y(t){for(var e=Array.prototype.slice.call(t.childNodes);e.length>0;)t.removeChild(e.pop())}function X(t,e){if(y(t.push)||(t=Array.prototype.slice.call(t)),!b(e))return void G(t,e);for(var n;t.length>0;)n=t.pop(),e=n.parentNode,b(e)||e.removeChild(n)}function G(t,e){for(;t.length>0;)e.removeChild(t.pop())}function J(t){kt=kt||(kt=plat.acquire(Vt)),Rt=Rt||(Rt=plat.acquire(Qt));var e=fo.exec(t),n=Rt.createElement("div");if(b(e))return n=ot(n,t),n.removeChild(n.lastChild);t=t.trim();var i=e[1];if(kt.pushState&&C(Co[i]))return ot(n,t);if("body"===i)return n=ot(Rt.createElement("html"),t),n.removeChild(n.lastChild);var r=xo[i]||xo._default,o=r[0],s=r[1],a=r[2];for(n=ot(n,s+t+a);o-- >0;)n=n.lastChild;return n}function K(t,e){if(Y(t),!v(e)){var n=J(e);return n.childNodes.length>0?W(n.childNodes,t):t.insertBefore(n,null),t}}function Z(t,e,n){if(!b(t)&&a(e)){C(n)&&(n=null);var i;if(l(e))return i=e,e=Array.prototype.slice.call(i.childNodes),t.insertBefore(i,n),e;y(e.push)||(e=Array.prototype.slice.call(e)),Rt=Rt||(Rt=plat.acquire(Qt));var r=e.length;i=Rt.createDocumentFragment();for(var o=0;o<r;++o)i.insertBefore(e[o],null);return t.insertBefore(i,n),e}}function tt(t){var e=t.parentNode,n=Z(e,t.childNodes,t);return e.removeChild(t),n}function et(t,e){if(b(e))return e;if(t.nodeType===Node.ELEMENT_NODE)for(var n=t.attributes,i=n.length,r=void 0,o=0;o<i;++o)r=n[o],e.setAttribute(r.name,r.value);var s=t.parentNode;return Z(e,t.childNodes),s.replaceChild(e,t),e}function nt(t){Rt=Rt||(Rt=plat.acquire(Qt));var e=Rt.createDocumentFragment();return v(t)||K(e,t),e}function it(t,e){if(!b(t)){var n,i=t.nextSibling,r=t.parentNode;if(b(e)&&(e=null),!b(r)&&(b(e)||e.parentNode===r))for(;i!==e;)n=i.nextSibling,r.removeChild(i),i=n}}function rt(t,e){b(t)||(it(t,e),st(t),st(e))}function ot(t,e){return kt=kt||(kt=plat.acquire(Vt)),kt.msApp?MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e}):t.innerHTML=e,t}function st(t){if(l(t)){var e=t.parentNode;b(e)||e.removeChild(t)}}function at(t,e){var n=(t||{}).className;if(_(n)&&_(e)&&""!==e){var i,r,o=e.split(vo);if(C(t.classList)){if(v(n))return void(t.className=e);for(;o.length>0;)i=o.shift(),""!==i&&(r=new RegExp("^"+i+"\\s+|\\s+"+i+"$|\\s+"+i+"\\s+","g"),r.test(n)||(t.className+=" "+i))}else for(;o.length>0;)i=o.shift(),""!==i&&t.classList.add(i)}}function ut(t,e){var n=(t||{}).className;if(_(n)&&_(e)&&""!==e){var i,r=e.split(vo);if(C(t.classList)){if(n===e)return void(t.className="");for(;r.length>0;)i=r.shift(),""!==i&&(t.className=n=n.replace(new RegExp("^"+i+"\\s+|\\s+"+i+"$|\\s+"+i+"\\s+","g"),""))}else for(;r.length>0;)i=r.shift(),""!==i&&t.classList.remove(i)}}function ct(t,e){var n=(t||{}).className;if(_(n)&&_(e)&&""!==e){var i,r=e.split(vo);if(C(t.classList)){var o=void 0;if(""===n)t.className=e;else if(n===e)return void(t.className="");for(;r.length>0;)if(i=r.shift(),""!==i){if(o=new RegExp("^"+i+"\\s+|\\s+"+i+"$|\\s+"+i+"\\s+","g"),o.test(n)){t.className=n=n.replace(o,"");continue}t.className+=" "+i}}else for(;r.length>0;)i=r.shift(),""!==i&&t.classList.toggle(i)}}function lt(t,e,n){var i=(t||{}).className;if(_(i)&&_(n)&&""!==n){if(C(t.classList)){var r=new RegExp("^"+e+"\\s+","g"),o=new RegExp("\\s+"+e+"\\s+","g"),s=new RegExp("\\s+"+e+"$","g");return void(t.className=i.replace(r,n+" ").replace(o," "+n+" ").replace(s," "+n))}t.classList.add(n),t.classList.remove(e)}}function ht(t,e){var n=(t||{}).className;if(!_(n)||!_(e)||""===e)return!1;var i=e.split(vo);if(C(t.classList)){if(""===n)return!1;if(n===e)return!0;for(var r;i.length>0;)if(r=i.shift(),""!==r&&!new RegExp("^"+r+"\\s|\\s"+r+"$|\\s"+r+"\\s","g").test(n))return!1;return!0}for(;i.length>0;)if(name=i.shift(),""!==name&&!t.classList.contains(name))return!1;return!0}function pt(t){return At=At||(At=plat.acquire(de)),jt=jt||(jt=plat.acquire(zt)),At.put(t,At.read(t).catch(function(e){if(b(e))return jt.ajax({url:t})}).then(function(e){if(h(e))return At.put(t,e);if(!a(e)||!_(e.response))return Lt=Lt||(Lt=plat.acquire(Kt)),Lt.warn("No template found at "+t),At.put(t);var n=e.response;return v(n.trim())?At.put(t):At.put(t,n)}).catch(function(e){return O(function(){Lt=Lt||(Lt=plat.acquire(Kt)),Lt.error(new Error("Failure to get template from "+t+"."))}),e}))}function _t(t,n){if(!l(n))return Lt=Lt||(Lt=plat.acquire(Kt)),Lt.error(new Error("Attempting to check DOM presence of something that isn't a Node.")),e;Rt=Rt||(Rt=plat.acquire(Qt));var i=Rt.body;if(l(n.parentElement)&&i.contains(n))return t(),e;var r=M(function(){l(n.parentElement)&&i.contains(n)&&(r(),t())},100);return r}function ft(t,n){if(!l(n))return Lt=Lt||(Lt=plat.acquire(Kt)),Lt.error(new Error("Attempting to check visibility of something that isn't a Node.")),e;var i=n.clientWidth,r=n.clientHeight;if(!g(i)||!g(r))return Lt=Lt||(Lt=plat.acquire(Kt)),Lt.error(new Error("Attempting to check visibility of something that isn't an Element.")),e;if(i>0&&r>0)return t(),e;var o=M(function(){n.clientWidth>0&&n.clientHeight>0&&(o(),t())},100);return o}function dt(t){var e,n=x(t);e=n?Ao.Injector.getDependencies(t):Ao.Injector.getDependencies([t]);for(var i=e.length,r=[],o=0;o<i;++o)r.push(e[o].inject());return n?r:r[0]}function vt(){return window}function mt(t){return t.document}function gt(t){return!b($o[t])}function yt(t){return!b(Uo[t])}function bt(t){return!b(Bo[t])}function Ct(t){return!C(Vo[t])}function xt(t,e,n,i,r,o){return Ho._parser=t,Ho._ContextManager=e,Ho._EventManager=n,Ho._Promise=i,Ho._dom=r,Ho._log=o,Ho}function Et(){return Qo}function wt(t,e,n,i,r,o){return Jo._compat=t,Jo._EventManager=e,Jo._document=n,Jo._compiler=i,Jo._LifecycleEvent=r,Jo._log=o,Jo}function Tt(t){return t.app}var Nt,kt,St,It,Rt,At,jt,Lt,Pt,Ot="$",Ft="context",Mt=Ot+"AppStatic",Dt=Ot+"App",zt=Ot+"Http",Bt=Ot+"HttpRequestInstance",Ut=Ot+"HttpConfig",$t=Ot+"Promise",Vt=Ot+"Compat",qt=Ot+"ControlFactory",Ht=Ot+"AttributeControlFactory",Qt=Ot+"Document",Wt=Ot+"DispatchEventInstance",Yt=Ot+"ErrorEventStatic",Xt=Ot+"EventManagerStatic",Gt=Ot+"LifecycleEventStatic",Jt=Ot+"LifecycleEventInstance",Kt=Ot+"Log",Zt=Ot+"Parser",te=Ot+"Regex",ee=Ot+"Tokenizer",ne=Ot+"NavigatorInstance",ie=Ot+"ContextManagerStatic",re=Ot+"ContextManagerInstance",oe=Ot+"Compiler",se=Ot+"CommentManagerFactory",ae=Ot+"CommentManagerInstance",ue=Ot+"ElementManagerFactory",ce=Ot+"ElementManagerInstance",le=Ot+"NodeManagerStatic",he=Ot+"TextManagerFactory",pe=Ot+"TextManagerInstance",_e=Ot+"CacheFactory",fe=Ot+"ManagerCache",de=Ot+"TemplateCache",ve=Ot+"Animator",me=Ot+"AttributesFactory",ge=Ot+"AttributesInstance",ye=Ot+"BindableTemplatesFactory",be=Ot+"Dom",Ce=Ot+"DomEvents",xe=Ot+"IDomEventsConfig",Ee=Ot+"DomEventInstance",we=Ot+"ResourcesFactory",Te=Ot+"ResourcesInstance",Ne=Ot+"TemplateControlFactory",ke=Ot+"TemplateControlInstance",Se=Ot+"Utils",Ie=Ot+"Browser",Re=Ot+"BrowserConfig",Ae=Ot+"Router",je=Ot+"RouterStatic",Le=Ot+"UrlUtilsInstance",Pe=Ot+"Window",Oe=Ot+"LocalStorage",Fe=Ot+"SessionStorage",Me=Ot+"BaseSegmentFactory",De=Ot+"BaseSegmentInstance",ze=Ot+"StaticSegmentInstance",Be=Ot+"VariableSegmentInstance",Ue=Ot+"DynamicSegmentInstance",$e=Ot+"SplatSegmentInstance",Ve=Ot+"StateStatic",qe=Ot+"StateInstance",He=Ot+"RouteRecognizerInstance",Qe=Ot+"InjectorStatic",We=Ot+"History",Ye=Ot+"Location",Xe="plat-",Ge=Xe+"bind",Je=Xe+"href",Ke=Xe+"src",Ze=Xe+"keydown",tn=Xe+"keypress",en=Xe+"keyup",nn=Xe+"charpress",rn=Xe+"name",on=Xe+"options",sn=Xe+"checked",an=Xe+"disabled",un=Xe+"selected",cn=Xe+"readonly",ln=Xe+"visible",hn=Xe+"style",pn=Xe+"tap",_n=Xe+"blur",fn=Xe+"change",dn=Xe+"copy",vn=Xe+"cut",mn=Xe+"paste",gn=Xe+"dbltap",yn=Xe+"focus",bn=Xe+"submit",Cn=Xe+"touchstart",xn=Xe+"touchend",En=Xe+"touchmove",wn=Xe+"touchcancel",Tn=Xe+"hold",Nn=Xe+"release",kn=Xe+"swipe",Sn=Xe+"swipeleft",In=Xe+"swiperight",Rn=Xe+"swipeup",An=Xe+"swipedown",jn=Xe+"track",Ln=Xe+"trackleft",Pn=Xe+"trackright",On=Xe+"trackup",Fn=Xe+"trackdown",Mn=Xe+"trackend",Dn=Xe+"react",zn=Xe+"link",Bn=Xe+"foreach",Un=Xe+"html",$n=Xe+"if",Vn=Xe+"ignore",qn=Xe+"select",Hn=Xe+"template",Qn=Xe+"viewport",Wn=Xe+"control",Yn=Xe+"viewcontrol",Xn=Xe+"resources",Gn=Xe+Ft,Jn=Hn+"-"+Ft,Kn=Xe+"callback",Zn="data-",ti="__templateControlCache",ei="head",ni="meta",ii="title",ri="description",oi="author",si="creator",ai="link",ui="href",ci="name",li="property",hi="image",pi="video",_i="type",fi="rel",di="url",vi="article:",mi="og:",gi="twitter:",yi="content",bi="ready",Ci="suspend",xi="resume",Ei="online",wi="offline",Ti="error",Ni="shutdown",ki="exiting",Si="beforeLoad",Ii="beforeNavigate",Ri="navigated",Ai="navigating",ji="urlChanged",Li="pause",Pi="deviceReady",Oi="backbutton",Fi="backclick",Mi="backButtonPressed",Di=Xe+"hide",zi=Xe+"animating",Bi=Xe+"animation",Ui=Xe+"transition",$i=Xe+"enter",Vi=Xe+"leave",qi=Xe+"move",Hi=Xe+"fadein",Qi=Xe+"fadeout",Wi=Xe+"back-nav",Yi="$",Xi=Yi+"tap",Gi=Yi+"dbltap",Ji=Yi+"touchstart",Ki=Yi+"touchend",Zi=Yi+"touchmove",tr=Yi+"touchcancel",er=Yi+"hold",nr=Yi+"release",ir=Yi+"swipe",rr=Yi+"swipeleft",or=Yi+"swiperight",sr=Yi+"swipeup",ar=Yi+"swipedown",ur=Yi+"track",cr=Yi+"trackleft",lr=Yi+"trackright",hr=Yi+"trackup",pr=Yi+"trackdown",_r=Yi+"trackend",fr={index:"index",even:"even",odd:"odd",first:"first",last:"last"},dr="base",vr="variable",mr="static",gr="splat",yr="dynamic",br=1e3,Cr="{{",xr="}}",Er="static",wr="singleton",Tr="instance",Nr="factory",kr="class",Sr="css",Ir="-compiled",Rr="-@",Ar="-init",jr=": start node",Lr=": end node",Pr="popstate",Or="hashchange",Fr="wrapped",Mr="plat_callback",Dr="js",zr="noop",Br="__app__",Ur="resource",$r=Ur+"s",Vr="alias",qr=Vr+"es",Hr="observable",Qr="injectable",Wr="object",Yr="function",Xr="literal",Gr="root",Jr="rootContext",Kr="control",Zr="_self",to=Ft,eo=!!Array.isArray,no={},io=Object.prototype.toString,ro="[object ",oo=ro+"Error]",so=ro+"File]",ao=ro+"Array]",uo=ro+"Boolean]",co=ro+"Date]",lo=ro+"Number]",ho=ro+"RegExp]",po=ro+"String]",_o=ro+"Promise]",fo=/<([\w:]+)/,vo=/\s+/g,mo=[1,'<select multiple="multiple">',"</select>"],go=[1,"<table>","</table>"],yo=[3,"<table><tbody><tr>","</tr></tbody></table>"],bo=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],Co={thead:go,tbody:go,tfoot:go,colgroup:go,caption:go,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:yo,th:yo},xo=r(!1,!1,{},Co,{option:mo,optgroup:mo,legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],text:bo,circle:bo,ellipse:bo,line:bo,path:bo,polygon:bo,polyline:bo,rect:bo,_default:[0,"",""]}),Eo={},wo={},To={},No={},ko={},So={},Io={},Ro={};!function(t){function e(e,n,i,r,o,s){var a=e[n]=new Ao.Injector(n,i,r,o);return s===!0&&(So[n]=a),t}function n(e,n,i){var r=dt(Qe),o=dt(Mt);return o.registerApp(new r(e,n,i)),t}function i(t,n,i,r){if(!_(t))throw new Error("A Control must be registered with a string name");return t=t.toLowerCase(),"head"===t&&(r=!0),e(Eo,t,n,i,r?Er:void 0)}function r(t,n,i){if(!_(t))throw new Error("A ViewControl must be registered with a string name");return t=t.toLowerCase(),e(wo,t,n,i)}function o(t,n,i,r){if(_(r)){if(r=r.toLowerCase(),r===Nr||r===Er||r===kr)return e(No,t,n,i,r,!0);if(r!==wr&&r!==Tr)throw new Error("Invalid injectable type "+r+" during injectable registration.")}else r=wr;return e(No,t,n,i,r,!1)}function s(n,i,r,o){if(_(o)&&(o=o.toLowerCase(),o!==Sr&&o!==Dr))throw new Error('Invalid animationType "'+o+'" during animation registration.');return e(o===Dr?Ro:Io,n,i,r,t.injectable.INSTANCE)}t.app=n,t.control=i,t.viewControl=r,t.injectable=o;var o;!function(t){t.STATIC=Er,t.SINGLETON=wr,t.INSTANCE=Tr,t.FACTORY=Nr,t.CLASS=kr}(o=t.injectable||(t.injectable={})),t.animation=s;var s;!function(t){t.CSS=Sr,t.JS=Dr}(s=t.animation||(t.animation={}))}(Pt=t.register||(t.register={}));var Ao;!function(t){var n=function(){function t(e,n,i,r){void 0===r&&(r=null),this.name=e,this.Constructor=n,this.type=r;var o,s=this.dependencies=t.convertDependencies(i),a=s.indexOf(zr);if(Object.defineProperty(n,"__injectorName",{value:e,enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(n,"__injectorDependencies",{value:s.slice(0),enumerable:!1,configurable:!0,writable:!0}),a>-1){var u=i[a];if(b(u))throw new TypeError("The dependency for "+e+" at index "+a+" is undefined, did you forget to include a file?");throw new TypeError("Could not resolve dependency "+u.slice(9,u.indexOf("("))+" for "+e+". Are you using a static injectable Type?")}if(o=t.__findCircularReferences(this),_(o))throw new Error("Circular dependency detected from "+this.name+" to "+o+".");if(e===Mt){var c=this.inject();this.dependencies=s,c.start()}}return t.initialize=function(){for(var t=So,e=Object.keys(t),n=e.length,i=0;i<n;++i)t[e[i]].inject();So={}},t.getDependencies=function(e){if(b(e)||v(e))return[];for(var n=[],i=e.length,r=0;r<i;++r)n.push(t.getDependency(e[r]));return n},t.getDependency=function(e){return b(e)||e===zr?t.__noop():t.isInjector(e)?e:t.__locateInjector(e)},t.convertDependencies=function(e){if(!x(e))return[];for(var n=t.convertDependency,i=[],r=e.length,o=0;o<r;++o)i.push(n(e[o]));return i},t.convertDependency=function(e){return b(e)?zr:t.__getInjectorName(e)},t.isInjector=function(t){return y(t.inject)&&!C(t.type)&&!C(t.name)&&!C(t.Constructor)},t.__getInjectorName=function(e){if(b(e))return zr;if(_(e))return e;var n=e,i=a(n._inject)?n._inject:{};if(_(n.__injectorName)&&(e=n.__injectorName),!_(e))return new t(e,n,i.dependencies);var r=t.__findInjector.bind(t,e),o=r(No)||r(ko)||r(So)||r(wo)||r(Eo)||r(Io)||r(Ro);return!a(o)&&_(e)&&(o=ko[e]=new t(e,n,n._inject.dependencies)),a(o)?o.name:zr},t.__construct=function(e,n,i){if(b(e)||b(e.prototype))return e;var r,o=Object.create(e.prototype),s=i===Tr;s&&(r=To[e.__injectorName]),a(r)||(r=t.__walk(o,Object.getPrototypeOf(o),{}),s&&(To[e.__injectorName]=r));for(var u=dt(S(function(t){return t},r)),c=Object.keys(r),l=c.length,h=0;h<l;++h)o[c[h]]=u[h];var p=o.constructor.apply(o,n);return C(p)?o:p},t.__walk=function(e,n,i){var s=n.constructor,u={};a(s._inject)&&s!==Object&&(u=t.__walk(e,Object.getPrototypeOf(n),i));var c=o(s._inject,!0);return r(!1,!1,{},i,u,c)},t.__locateInjector=function(e){if(!b(e)){var n=e;_(e.__injectorName)&&(n=e.__injectorName);var i=t.__findInjector.bind(t,n),r=i(No)||i(ko)||i(So)||i(Eo)||i(wo)||i(Io)||i(Ro);return a(r)||(y(e)?(_(n)||(n=z(Xe)),r=new t(n,e,a(e._inject)?e._injectorDependencies:[]),ko[n]=r):r=t.__wrap(e)),r}},t.__findInjector=function(e,n){if(!b(e)){if(e===t||e===Qe){var i=t.__wrap(t);return i.name=Qe,i}return _(e)?n[e]||n[e.toLowerCase()]:void 0}},t.__wrap=function(t){return{inject:function(){return t},name:Fr,dependencies:[],Constructor:t}},t.__noop=function(){return{inject:e,type:zr,name:zr,dependencies:[],Constructor:e}},t.__findCircularReferences=function(e){if(a(e)&&x(e.dependencies))for(var n,i,r,o=e.name,s=e.dependencies,u=[{name:o,dependencies:s.slice(0)}],c=t.__locateInjector;u.length>0;){n=u.pop(),s=n.dependencies,r=s.length;for(var l=0;l<r;++l){if(i=s[l],i===o)return n.name;e=c(i),a(e)&&x(e.dependencies)&&u.push({name:e.name,dependencies:e.dependencies.slice(0)})}}},t.prototype.inject=function(){for(var e,n,i=[],r=this.type,o=this.dependencies,s=o.length,a=0;a<s;++a)e=t.getDependency(o[a]),i.push(e.inject());return n=t.__construct(this.Constructor,i,r),_(r)&&r!==Tr&&this._wrapInjector(n),n.__injectable__type=r,n},t.prototype._wrapInjector=function(t){return this.inject=function(){return t},this},t}();t.Injector=n;var i;!function(t){t.control=Eo,t.viewControl=wo,t.injectable=No,t.staticInjectable=So,t.animation=Io,t.jsAnimation=Ro}(i=t.injectors||(t.injectors={}))}(Ao=t.dependency||(t.dependency={})),C(window)||(C(window.plat)&&(window.plat=plat),C(window.module)&&(window.module={})),t.acquire=dt;var jo;!function(t){var e=function(){function t(){this.ERROR=5,this.WARN=4,this.INFO=3,this.DEBUG=2,this.TRACE=1,this._level=this.INFO}return t.prototype.error=function(t){throw this._log(t,this.ERROR),t},t.prototype.warn=function(t){this._log(t,this.WARN)},t.prototype.info=function(t){this._log(t,this.INFO)},t.prototype.debug=function(t){this._log(t,this.DEBUG)},t.prototype.trace=function(t){this._log(t,this.TRACE)},t.prototype.setLogLevel=function(t){switch(_(t)&&(t=this[t.toUpperCase()]),t){case this.ERROR:case this.WARN:case this.INFO:case this.DEBUG:case this.TRACE:this._level=t;break;default:this._level=this.INFO}},t.prototype._log=function(e,n){if(this._shouldLog(n)){_(e)&&(e=new Error(e));var i=this._ErrorEvent;b(i)&&(i=this._ErrorEvent=dt(Yt)),i.dispatch(Ti,t,e,n)}},t.prototype._shouldLog=function(t){return g(t)||(t=this.INFO),this._level<t},t}();t.Log=e,Pt.injectable(Kt,e)}(jo=t.debug||(t.debug={}));var Lo=function(){function t(){this.__events={},this.__defineBooleans(),this.__defineMappedEvents(),this.__defineVendorDependencies(),this.__determineCss()}return t.prototype.hasEvent=function(t){var e=this.__events,n=e[t];if(C(n)){var i=this._document.createElement("div");n="input"===t&&9===this.IE?e[t]=!1:e[t]=!C(i["on"+t])}return n},t.prototype.__defineBooleans=function(){var t=this._window,e=t.navigator||{},n=(e.userAgent||"").toLowerCase(),i=this._history,r=t.define,o=t.MSApp,s=t.WinJS,u=(/android ((?:\d|\.)+)/.exec(n)||[])[1];if(_(u)&&!/iemobile/i.test(n)&&(u=parseInt(u.replace(/\./g,""),10)),this.isCompatible=y(Object.defineProperty)&&y(this._document.querySelector),this.cordova=!b(t.cordova),this.pushState=!(b(i)||b(i.pushState)),this.fileSupported=!(C(t.File)||C(t.FormData)),this.amd=y(r)&&!b(r.amd),this.msApp=a(o)&&y(o.execUnsafeLocalFunction),this.winJs=a(s)&&a(s.Application),this.indexedDb=!b(t.indexedDB),this.proto=a({}.__proto__),this.getProto=y(Object.getPrototypeOf),this.setProto=y(Object.setPrototypeOf),this.hasTouchEvents=!C(t.ontouchstart),this.hasPointerEvents=!!e.pointerEnabled,this.hasMsPointerEvents=!!e.msPointerEnabled,g(u))return void(this.ANDROID=u);var c=parseInt((/msie (\d+)/.exec(n)||[])[1],10)||parseInt((/trident\/.*; rv:(\d+)/.exec(n)||[])[1],10);g(c)&&(this.IE=c)},t.prototype.__defineMappedEvents=function(){this.hasPointerEvents?this.mappedEvents={$touchstart:"pointerdown",$touchend:"pointerup",$touchmove:"pointermove",$touchcancel:"pointercancel"}:this.hasMsPointerEvents?this.mappedEvents={$touchstart:"MSPointerDown",$touchend:"MSPointerUp",$touchmove:"MSPointerMove",$touchcancel:"MSPointerCancel"}:this.hasTouchEvents?this.mappedEvents={$touchstart:"touchstart",$touchend:"touchend",$touchmove:"touchmove",$touchcancel:"touchcancel"}:this.mappedEvents={$touchstart:"mousedown",$touchend:"mouseup",$touchmove:"mousemove",$touchcancel:null}},t.prototype.__defineVendorDependencies=function(){var t,e,n,i,r=this._window,o=this._document.documentElement,s=r.getComputedStyle(o,""),a=Array.prototype.slice.call(s).join("").match(/-(moz|webkit|ms)-/);x(a)&&a.length>1?(t=x(a)&&a.length>1?a[1]:"",i=t[0].toUpperCase()+t.slice(1),e="WebKit|Moz|MS".match(new RegExp("("+t+")","i"))[1],n="-"+t+"-"):C(s.OLink)?t=i=e=n="":(t="o",i=e="O",n="-o-"),this.vendorPrefix={dom:e,lowerCase:t,css:n,upperCase:i},this.requestAnimationFrame=r.requestAnimationFrame||r[t+"RequestAnimationFrame"],this.cancelAnimationFrame=r.cancelAnimationFrame||r[t+"CancelRequestAnimationFrame"]||r[t+"CancelAnimationFrame"];var u=o.style;!(C(this.ANDROID)||Math.floor(this.ANDROID/10)>=44)||C(u.animation)||C(u.transition)?(C(u[i+"Animation"])||C(u[i+"Transition"]))&&(C(u[t+"Animation"])||C(u[t+"Transition"]))&&(C(u[e+"Animation"])||C(u[e+"Transition"]))||(this.animationSupported=!0,this.animationEvents={$animation:t+"Animation",$animationStart:t+"AnimationStart",$animationEnd:t+"AnimationEnd",$animationIteration:t+"AnimationIteration",$transition:t+"Transition",$transitionStart:t+"TransitionStart",$transitionEnd:t+"TransitionEnd"}):(this.animationSupported=!0,this.animationEvents={$animation:"animation",$animationStart:"animationstart",$animationEnd:"animationend",$animationIteration:"animationiteration",$transition:"transition",$transitionStart:"transitionstart",$transitionEnd:"transitionend"})},t.prototype.__determineCss=function(){var t=this._document,e=t.head,n=t.createElement("div");n.setAttribute(Di,""),e.insertBefore(n,null);var i=this._window.getComputedStyle(n),r=i.display,o=i.visibility;this.platCss="none"===r||"hidden"===o,e.removeChild(n)},t._inject={_window:Pe,_history:We,_document:Qt},t}();t.Compat=Lo,Pt.injectable(Vt,Lo);var Po=function(){function t(){}return t.prototype.noop=function(){},t.prototype.extend=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.apply(null,[!1,!1,t].concat(e))},t.prototype.deepExtend=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.apply(null,[!0,!1,t].concat(e))},t.prototype.clone=function(t,e){return o(t,e)},t.prototype.isObject=function(t){return a(t)},t.prototype.isWindow=function(t){return u(t)},t.prototype.isDocument=function(t){return c(t)},t.prototype.isNode=function(t){return l(t)},t.prototype.isDocumentFragment=function(t){return h(t)},t.prototype.isString=function(t){return _(t)},t.prototype.isRegExp=function(t){return f(t)},t.prototype.isPromise=function(t){return d(t)},t.prototype.isEmpty=function(t){return v(t)},t.prototype.isBoolean=function(t){return m(t)},t.prototype.isNumber=function(t){return g(t)},t.prototype.isFile=function(t){return p(t)},t.prototype.isFunction=function(t){return y(t)},t.prototype.isNull=function(t){return b(t)},t.prototype.isUndefined=function(t){return C(t)},t.prototype.isArray=function(t){return x(t)},t.prototype.isArrayLike=function(t){return E(t)},t.prototype.isDate=function(t){return w(t)},t.prototype.filter=function(t,e,n){return T(t,e,n)},t.prototype.where=function(t,e){return N(t,e)},t.prototype.forEach=function(t,e,n){return k(t,e,n)},t.prototype.map=function(t,e,n){return S(t,e,n)},t.prototype.mapAsync=function(t,e,n){return I(t,e,n)},t.prototype.mapAsyncInOrder=function(t,e,n){return A(t,e,n)},t.prototype.mapAsyncInDescendingOrder=function(t,e,n){return j(t,e,n)},t.prototype.pluck=function(t,e){return L(t,e)},t.prototype.some=function(t,e,n){return P(t,e,n)},t.prototype.postpone=function(t,e,n){return F(t,0,e,n)},t.prototype.defer=function(t,e,n,i){return F(t,e,n,i)},t.prototype.setInterval=function(t,e,n,i){return M(t,e,n,i)},t.prototype.requestAnimationFrame=function(t,e){return D(t,e)},t.prototype.uniqueId=function(t){return z(t)},t.prototype.camelCase=function(t){return B(t)},t.prototype.delimit=function(t,e){return U(t,e)},t}();t.Utils=Po,Pt.injectable(Se,Po),t.Window=vt,Pt.injectable(Pe,vt),t.Document=mt,Pt.injectable(Qt,mt,[Pe]);var Oo;!function(t){var e=function(){function t(){this.markupRegex=new RegExp(Cr+"[\\S\\s]*"+xr),this.argumentRegex=/\((.*)\)/,this.initialUrlRegex=/\/[^\/]*\.(?:html|htm)/,this.protocolRegex=/:\/\//,this.invalidVariableRegex=/[^a-zA-Z0-9@_$]/,this.fileNameRegex=/.*(?:\/|\\)/,this.shiftedKeyRegex=/[A-Z!@#$%^&*()_+}{":?><|~]/,this.fullUrlRegex=/^(?:[a-z0-9\-]+:)(?:\/\/)?|(?:\/\/)/i,this.validateEmail=new RegExp('^(([^<>()[\\]\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this.validateTelephone=/^\+?[0-9\.\(\)\s-]*$/,this.dynamicSegmentsRegex=/^:([^\/]+)$/,this.splatSegmentRegex=/^\*([^\/]+)$/}return Object.defineProperty(t.prototype,"newLineRegex",{get:function(){return/\r|\n/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optionalRouteRegex",{get:function(){return/\((.*?)\)/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"namedParameterRouteRegex",{get:function(){return/(\(\?)?:\w+/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wildcardRouteRegex",{get:function(){return/\*\w*/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"escapeRouteRegex",{get:function(){return/[\-{}\[\]+?.,\\\^$|#\s]/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camelCaseRegex",{get:function(){return/([\-_\.\s])(\w+?)/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capitalCaseRegex",{get:function(){return/[A-Z]/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpaceRegex",{get:function(){return/("[^"]*?"|'[^']*?')|[\s\r\n\t\v]/g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quotationRegex",{get:function(){return/'|"/g},enumerable:!0,configurable:!0}),t}();t.Regex=e,Pt.injectable(te,e);var n=function(){function t(){this.__previousChar="",this.__variableRegex=dt(te).invalidVariableRegex,this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]}return t.prototype.createTokens=function(t){if(b(t))return[];this._input=t;for(var e,n=t.length,i=0,r=!1,o=this._isSpace,s=this._isAlphaNumeric,a=0;a<n;a++)if(e=t[a],!o(e)){if(s(e))a=this.__handleAplhaNumeric(a,e);else if(gt(e))switch(e){case".":a=this.__handlePeriod(a,e);break;case"{":this.__handleLeftBrace(e);break;case"}":this.__handleRightBrace(e);break;case"[":this.__handleLeftBracket(e);break;case"]":this.__handleRightBracket(e);break;case"(":this.__handleLeftParenthesis(e);break;case")":this.__handleRightParenthesis(e);break;case",":this.__handleComma(e);break;case"'":case'"':a=this.__handleStringLiteral(a,e)}else if(bt(e))switch(e){case"?":r=!0,i++,this.__handleQuestion(e);break;case":":i=this.__handleColon(e,i);break;default:a=this.__handleOtherOperator(a,e)}else if(";"===e)return this._throwError("Unexpected semicolon"),[];this.__previousChar=e}if(r&&i>0)return this._throwError("Improper ternary expression"),[];if(this.__objArgCount.length>0)return this._throwError("Improper object literal"),[];this.__popRemainingOperators();var u=this.__outputQueue;return this._resetTokenizer(),u},t.prototype._checkType=function(t,e){return e?this._isNumeric(t):this._isAlphaNumeric(t)},t.prototype._lookAhead=function(t,e,n){for(var i,r=this._input,o=r.length;++e<o&&(i=r[e],this._checkType(i,n));)t+=i;return t},t.prototype._lookAheadForOperatorFn=function(t,e){for(var n,i=t,r=this._input,o=r.length;++e<o&&(n=r[e],i+=n,bt(i));)t=i;return t},t.prototype._lookAheadForDelimiter=function(t,e){for(var n,i="",r=this._input,o=r.length;++e<o&&(n=r[e])!==t;)i+=n;return i},t.prototype._popStackForVal=function(t,e,n){for(var i=this.__outputQueue,r=this.__operatorStack;t.val!==e;)if(i.push(r.shift()),t=r[0],0===r.length)return this._throwError(n)},t.prototype._isValEqual=function(t,e){return b(t)||b(t.val)?b(e):""===t.val?""===e:e.indexOf(t.val)!==-1},t.prototype._isValUnequal=function(t,e){return b(t)||b(t.val)?!b(e):""===t.val?""!==e:e.indexOf(t.val)===-1},t.prototype._resetTokenizer=function(){this._input=null,
this.__previousChar="",this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]},t.prototype._throwError=function(t){this._log.error(new Error(t+" in "+this._input))},t.prototype._isNumeric=function(t){return"0"<=t&&t<="9"},t.prototype._isSpace=function(t){return" "===t||"\r"===t||"\n"===t||"\t"===t||"\v"===t||" "===t},t.prototype._isAlphaNumeric=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"0"<=t&&t<="9"||"@"===t||"_"===t||"$"===t},t.prototype._isStringValidVariable=function(t){return!this.__variableRegex.test(t)},t.prototype.__handleAplhaNumeric=function(t,e){var n=this._isNumeric(e),i=this._lookAhead(e,t,n);return this.__outputQueue.push(n?{val:Number(i),args:0}:{val:i,args:-1}),t+i.length-1},t.prototype.__handlePeriod=function(t,e){var n,i=this.__outputQueue,r=this.__operatorStack,o=i.length-1,s=this.__previousChar;return o<0||this._isSpace(s)||!b(Bo[s])||"("===s||","===s?(n=this._lookAhead(e,t,!0),t+=n.length-1,i.push({val:parseFloat(n),args:0})):this._isValEqual(r[0],e)?i.push({val:e,args:0}):b(i[o])||!g(Number(i[o].val))||this._isValEqual(i[o-1],e)?r.unshift({val:e,args:0}):(n=this._lookAhead(e,t,!0),t+=n.length-1,i[o].val+=parseFloat(n)),t},t.prototype.__handleLeftBrace=function(t){this.__operatorStack.unshift({val:t,args:0}),this.__objArgCount.push(0),this.__lastColonChar.push(t),this.__lastCommaChar.push(t)},t.prototype.__handleRightBrace=function(t){var e=this.__operatorStack,n=e[0],i=this.__objArgCount.pop();return b(n)?this._throwError("Improper object literal"):(this._popStackForVal(n,"{","Improper object literal"),e.shift(),this.__lastColonChar.pop(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"{}",args:i}))},t.prototype.__handleLeftBracket=function(t){var e=this.__previousChar,n=this.__operatorStack;this._isValEqual(n[0],".")&&this.__outputQueue.push(n.shift()),n.unshift({val:t,args:0}),this.__argCount.push({num:0,isArray:!("]"===e||")"===e||this._isAlphaNumeric(e))}),this.__lastCommaChar.push(t)},t.prototype.__handleRightBracket=function(t){var e=this.__operatorStack,n=e[0],i=this.__argCount.pop();return b(n)||b(i)?this._throwError("Brackets mismatch"):(i.isArray||i.num--,this._popStackForVal(n,"[","Brackets mismatch"),e.shift(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"[]",args:"["===this.__previousChar?-1:i.num+1}))},t.prototype.__handleLeftParenthesis=function(t){var e,n=this.__previousChar,i=this.__operatorStack;if(this._isAlphaNumeric(n)||"]"===n||")"===n){var r=this.__outputQueue,o=r[r.length-1],s=b(o)?void 0:o.val;"[]"===s?(i.unshift(r.pop()),i.unshift(r.pop())):"()"===s||this._isNumeric(s)||i.unshift(r.pop()),e=0}else e=-1;this.__argCount.push({num:e}),i.unshift({val:t,args:e}),this.__lastCommaChar.push(t)},t.prototype.__handleRightParenthesis=function(t){var e=this.__operatorStack,n=e[0],i=this.__argCount.pop();if(b(n))return this._throwError("Parentheses mismatch");if(this._popStackForVal(n,"(","Parentheses mismatch"),e.shift(),this.__lastCommaChar.pop(),!b(i)&&i.num>=0){var r=i.num;"("===this.__previousChar?this.__removeFnFromStack(r)&&this.__outputQueue.push({val:"()",args:0}):this.__removeFnFromStack(r+1)&&this.__outputQueue.push({val:"()",args:r+1})}},t.prototype.__handleComma=function(t){var e=this.__lastCommaChar,n=e[e.length-1];if("("===n||"["===n){var i=this.__argCount,r=i.length;if(!(r>0))return this._throwError("Mismatch with "+n);i[r-1].num++}var o=this.__operatorStack[0];return b(o)?this._throwError("Unexpected comma"):void this._popStackForVal(o,n,"Unexpected comma")},t.prototype.__handleStringLiteral=function(t,e){var n=this._lookAheadForDelimiter(e,t),i=this.__operatorStack,r=i[0];return!b(r)&&("["===r.val||"("===r.val&&r.args>=0)?i.unshift({val:n,args:0}):this.__outputQueue.push({val:n,args:0}),t+n.length+1},t.prototype.__handleQuestion=function(t){this.__lastColonChar.push(t),this.__determinePrecedence(t)},t.prototype.__handleColon=function(t,e){var n=this.__lastColonChar,i=n[n.length-1],r=this.__outputQueue;if("?"===i){var o=this.__operatorStack,s=o[0];if(b(s))return void this._throwError("Ternary mismatch");e--,n.pop(),this._popStackForVal(s,"?","Ternary mismatch"),r.push(o.shift()),o.unshift({val:t,args:-2})}else{if("{"!==i)return void this._throwError("Unexpected colon");var a=this.__objArgCount,u=r.length-1;if(a[a.length-1]++,u<0)return void this._throwError("Unexpected colon");r[u].args=1}return e},t.prototype.__handleOtherOperator=function(t,e){var n=this._lookAheadForOperatorFn(e,t);return this.__determinePrecedence(n),t+n.length-1},t.prototype.__popRemainingOperators=function(){for(var t,e,n=this.__outputQueue,i=this.__operatorStack;i.length>0;){if(t=i.shift(),e=t.val,"("===e||")"===e)return this._throwError("Parentheses mismatch");n.push(t)}},t.prototype.__determineOperator=function(t){switch(t){case"+":case"-":if(0===this.__outputQueue.length||bt(this.__previousChar))return Bo["u"+t];default:return Bo[t]}},t.prototype.__determinePrecedence=function(t){var e,n,i=this.__determineOperator(t),r=i.precedence,o="ltr"===i.associativity,s=this.__operatorStack,a=this.__outputQueue;if(0===s.length)return void s.unshift({val:t,args:i.fn.length-2});do if(n=s[0].val,"."!==n){if(e=Bo[n],b(e)||!(e.precedence<r||o&&e.precedence===r))return void s.unshift({val:t,args:i.fn.length-2});a.push(s.shift())}else a.push(s.shift());while(s.length>0);s.unshift({val:t,args:i.fn.length-2})},t.prototype.__removeFnFromStack=function(t){for(var e,n=this.__outputQueue,i=this.__operatorStack,r=i[0],o=this._isValEqual,s=this._isValUnequal,a=!1;!b(r)&&s(r,"([")&&(this._isStringValidVariable(r.val)||o(r.val,".[]")||yt(r.val));)e=i.shift(),e.args!==-1||o(e,".[]")||(e.args=-2),n.push(e),r=i[0],a=!0;return a||s(n[n.length-t-1],"()")||(a=!0),a},t._inject={_log:Kt},t}();t.Tokenizer=n,Pt.injectable(ee,n);var i=function(){function t(){this._tokens=[],this.__cache={},this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={},this.__fnEvalConstant="var initialContext;return "}return t.prototype.parse=function(t){var e=this.__cache[t];if(!b(e))return{expression:e.expression,identifiers:e.identifiers.slice(0),aliases:e.aliases.slice(0),evaluate:e.evaluate};this._tokens=this._tokenizer.createTokens(t),e=this._evaluate(t);var n=e.identifiers;if(0===n.length){var i=e.evaluate(null);e.evaluate=function(){return i}}return this.__cache[t]=e,e},t.prototype.clearCache=function(t){return _(t)?void $(this.__cache,t):void(this.__cache={})},t.prototype._evaluate=function(t){for(var e,n,i,r=this._tokens,o=r.length,s=this.__tempIdentifiers,a=this.__codeArray,u=!1,c=0;c<o;c++)if(e=r[c],n=e.val,i=e.args,yt(n))switch(n){case"()":u=this.__handleFunction(c,i,u);break;case"{}":a.push(this.__convertObject(i)),s.push(".");break;default:i<0?(a.push("[]"),s.push(".")):i>0?(a.push(this.__convertArrayLiteral(i)),s.push(".")):u=this.__indexIntoObject(c,n,u)}else if(bt(n))if(0===i)a.push(this.__convertPrimitive(c,n,i));else switch(n){case"?":this.__handleQuestion();break;case":":this.__handleColon();break;case"+":case"-":1===i&&(n="u"+n);default:this.__handleOperator(n,i)}else i<0?a.push(this.__convertFunction(c,n,u)):a.push(this.__convertPrimitive(c,n,i));this._popRemainingIdentifiers(),this._makeIdentifiersUnique();var l={evaluate:new Function(Ft,qr,this.__fnEvalConstant+(0===a.length?'"'+t+'"':a.join(""))+";"),expression:t,identifiers:this.__identifiers.slice(0),aliases:Object.keys(this.__aliases)};return this._resetParser(),l},t.prototype._peek=function(t){return this._tokens[t+1]},t.prototype._lookBack=function(t){return this._tokens[t-1]},t.prototype._popRemainingIdentifiers=function(){for(var t,e=this.__identifiers,n=this.__tempIdentifiers;n.length>0;)t=n.pop(),"."!==t&&e.push(t)},t.prototype._makeIdentifiersUnique=function(){for(var t,e=this.__identifiers,n=[],i={};e.length>0;)t=e.pop(),i[t]||(i[t]=!0,n.push(t));this.__identifiers=n},t.prototype._isValEqual=function(t,e){return b(t)||b(t.val)?b(e):""===t.val?""===e:e.indexOf(t.val)!==-1},t.prototype._isValUnequal=function(t,e){return b(t)||b(t.val)?!b(e):""===t.val?""!==e:e.indexOf(t.val)===-1},t.prototype._resetParser=function(){this._tokens=[],this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}},t.prototype._throwError=function(t){this._log.error(new Error(t))},t.prototype.__convertPrimitive=function(t,e,n){if(n>0)return this.__tempIdentifiers.push("."),e;var i=g(Number(e)),r=this._peek(t),o=!(b(r)||r.args>=1),s=this._isValEqual;return Ct(e)||_(e)&&(i||this._isValUnequal(r,"[]()")||s(r,"[]")&&!o)?(this.__tempIdentifiers.push("."),'"'+e+'"'):(!i||s(r,".[]")&&o?this.__tempIdentifiers.push(e):this.__tempIdentifiers.push("."),e)},t.prototype.__convertFunction=function(t,e,n){if("@"===e[0])this.__aliases[e.slice(1)]=!0;else if(Ct(e))return this.__tempIdentifiers.push("."),e;var i=this._peek(t),r=this._isValEqual;if(r(this._tokens[t-1],"()")&&r(i,".[]")?this.__tempIdentifiers.push("."):this.__tempIdentifiers.push(e),b(i))return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+e+'"))';switch(i.val){case".":case"()":return e;default:if(!n)return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+e+'"))'}},t.prototype.__convertObject=function(t){for(var e,n,i,r=this.__identifiers,o=this.__tempIdentifiers,s=this.__codeArray,a=0,u="{";a++<t;)i=s.pop(),e=s.pop(),u+=',"'+e+'":'+i,o.length>1&&(n=o.pop(),o.pop(),"."!==n&&r.push(n));return u.replace(",","")+"}"},t.prototype.__convertArrayLiteral=function(t){for(var e,n=this.__identifiers,i=this.__tempIdentifiers,r=this.__codeArray,o=0,s="";o++<t;)s=r.pop()+","+s,i.length>0&&(e=i.pop(),"."!==e&&n.push(e));return"["+s.slice(0,-1)+"]"},t.prototype.__handleFunction=function(t,e,n){var i,r,o=this.__identifiers,s=this.__tempIdentifiers,a=this.__codeArray,u=0,c=this._lookBack(t),l=!b(c)&&(c.args===-2||this._isValEqual(c,".[]")),h="",p="",_="",f=!1;for(l&&(p=a.pop(),_=s.pop());u++<e;)h=a.pop()+","+h,s.length>0&&(i=s.pop(),"."!==i&&(o.push(i),f=!0));if(r=e>0?".call(initialContext || context,"+h.slice(0,h.length-1)+")":".call(initialContext || context)",n)if(n=!1,a.length>0){var d=a.pop(),m=s.length-1;m<0||"."===s[m]||""===_?""!==_&&f&&"["!==d[0]&&"]"!==d[d.length-1]&&(o[o.length-1]+="."+_):(s[m]+="."+_,o.push(s.pop())),r=v(p)?d+r:"(("+this.__indexIntoContext.toString()+")("+d+',"'+p+'") || (function () {}))'+r}else this._throwError("Improper expression or context");else l?(r="(initialContext = (("+this.__findInitialContext.toString()+')(context,aliases,"'+p+'") || (function () {}))'+r+")",o.push(p)):r=a.pop()+r;a.push(r);var g=s.length;return this._isValEqual(this._peek(t),"[]")&&g>0&&"."!==s[g-1]&&o.push(s.pop()),n},t.prototype.__indexIntoObject=function(t,e,n){var i=this._isValEqual;if(i(this._peek(t),"()"))return!0;var r,o=this.__codeArray,s=o.pop(),a=this.__identifiers,u=this.__tempIdentifiers,c=this._lookBack(t),l=u.pop(),h=!b(l);return h&&"@"===l[0]?(s="("+this.__indexIntoContext.toString()+")("+o.pop()+","+s+")",a.push(l),u.length>0&&a.push(u.pop())):i(c,"++--()[]*/%?:>=<=&&||!===")?(s="("+this.__indexIntoContext.toString()+")("+o.pop()+","+s+")",u.push(".")):"[]"!==e||b(c)||c.args>=0?(s="("+this.__indexIntoContext.toString()+")("+o.pop()+',"'+s+'")',r=u.length-1,r>=0?"."!==u[r]&&(u[r]+="."+l):h&&"."!==l&&"."!==e&&a.push(l)):(s="("+this.__indexIntoContext.toString()+")("+o.pop()+","+s+")",r=u.length-1,r>=0&&"."!==u[r]&&a.push(u.pop()),a.push(l)),o.push(s),n},t.prototype.__handleQuestion=function(){for(var t,e=this.__identifiers,n=this.__tempIdentifiers,i=this.__codeArray,r=i.pop(),o=0;o<2&&n.length>0;o++)t=n.pop(),"."!==t&&e.push(t);i.push(i.pop()+"?"+r)},t.prototype.__handleColon=function(){for(var t,e=this.__identifiers,n=this.__tempIdentifiers,i=this.__codeArray,r=i.pop(),o=0;o<2&&n.length>0;o++)t=n.pop(),"."!==t&&e.push(t);i.push(i.pop()+":"+r)},t.prototype.__handleOperator=function(t,e){for(var n,i=this.__identifiers,r=this.__tempIdentifiers,o=this.__codeArray,s=0,a="";s++<e;)a="function (context, aliases) { return "+o.pop()+"; },"+a,r.length>0&&(n=r.pop(),"."!==n&&i.push(n));r.push("."),o.push("("+Bo[t].fn.toString()+")(context, aliases,"+a.slice(0,a.length-1)+")")},t.prototype.__findInitialContext=function(t,e,n){return"@"===n[0]&&null!==e&&"object"==typeof e?e[n.slice(1)]:null!==t&&"object"==typeof t?t[n]:void 0},t.prototype.__indexIntoContext=function(t,e){if(null!==t&&"object"==typeof t)return t[e]},t._inject={_tokenizer:ee,_log:Kt},t}();t.Parser=i,Pt.injectable(Zt,i)}(Oo=t.expressions||(t.expressions={}));var Fo;!function(t){function e(t){return t.location}function n(){return i.config}t.Location=e,Pt.injectable(Ye,e,[Pe]);var i=function(){function t(){this.uid=z(Xe),this.__lastUrl=this._location.href,this.__protocol=this.urlUtils().protocol,this.__initializing=!1,this._EventManager.on(this.uid,Si,this.initialize,this),this._compat.msApp&&(this._stack=[])}return t.prototype.initialize=function(){var t=this._compat;this._EventManager.dispose(this.uid),this.__initializing=!0,dt(Le);var e=this.url(),n=e,i=this._urlChanged.bind(this),r=this._dom,o=this._window;n!==e&&this.url(n,!0),t.pushState&&r.addEventListener(o,Pr,i,!1),r.addEventListener(o,Or,i,!1),this.__initializing=!1},t.prototype.url=function(t,e){var n=this._location;return _(t)&&!this._isLastUrl(t)&&(!e&&x(this._stack)&&this._stack.push(n.href),this._setUrl(t,e)),this.__currentUrl||n.href},t.prototype.back=function(t){g(t)||(t=1);var e=this._stack;return x(e)&&e.length>1?(this._stack=e=e.slice(0,e.length-(t-1)),this.url(e.pop()),void e.pop()):void this._history.go(-t)},t.prototype.forward=function(t){g(t)||(t=1),this._history.go(t)},t.prototype.urlUtils=function(e){e=e||this.url();var n=dt(Le),i=t.config;return i.routingType===i.HASH&&(e=e.replace(new RegExp("#"+(i.hashPrefix||"")+"/?"),"")),n.initialize(e),n},t.prototype.isCrossDomain=function(t){if(!_(t))return!1;var e=this.urlUtils(t),n=this.urlUtils();return e.protocol!==n.protocol||e.hostname!==n.hostname||e.port!==n.port},t.prototype.formatUrl=function(e){var n=t.config,i=n.baseUrl;if(!_(e))return"";if(e===i)return e;var r=!this._regex.fullUrlRegex.test(e)||e.indexOf(i)>-1;if("/"===e[0]&&(e=e.slice(1)),r){if(n.routingType===n.HASH){var o=0===e.indexOf(this.__protocol+":"),s=n.hashPrefix||"",a="#"+s,u=new RegExp(a+"|#/");"/"!==e[e.length-1]&&e.indexOf("?")===-1&&(e+="/"),u.test(e)||(e=o?e+a+"/":a+("/"!==e[0]?"/":"")+e)}e.indexOf(i)===-1&&(e=i+e)}return e},t.prototype._urlChanged=function(){var e=this;if(!this.__initializing){this.__currentUrl=null;var n=this.urlUtils(),i=(t.config,this._trimSlashes(n.href));if(this.__lastUrl!==i){this.__lastUrl=i;var r=this._EventManager;O(function(){r.dispatch(ji,e,r.DIRECT,[n])})}}},t.prototype._setUrl=function(e,n){e=this.formatUrl(e);var i=this.urlUtils(e),r=t.config.baseUrl,o=this._history,s=this._location;if(i.href.indexOf(r)===-1)return void(s.href=e);if(this._regex.fullUrlRegex.test(e)||"/"===e[0]||(e=r+e),this._compat.pushState){if(n){var u=o.state;a(u)||(u={}),o.replaceState({previousLocation:u.previousLocation},"",e)}else o.pushState({previousLocation:this.urlUtils().pathname},"",e);this.__initializing||this._urlChanged()}else this.__currentUrl=e,n?s.replace(e):s.href=e},t.prototype._isLastUrl=function(t){var e=this.__lastUrl;return _(t)&&(v(t)&&(t="/"),t=this._trimSlashes(this.urlUtils(t).href)),t===e},t.prototype._trimSlashes=function(t){return _(t)&&"/"===t[t.length-1]?t.slice(0,-1):t},t._inject={_EventManager:Xt,_compat:Vt,_regex:te,_window:Pe,_location:Ye,_history:We,_dom:be},t.config={HASH:"hash",STATE:"state",routingType:"hash",hashPrefix:"!",baseUrl:""},t}();t.Browser=i,Pt.injectable(Ie,i),t.IBrowserConfig=n,Pt.injectable(Re,n);var r=function(){function t(){var e=this._browserConfig,n=e.baseUrl;if(v(n)||!this._regex.fullUrlRegex.test(n)){var i=this._window.location.href,r=i.replace(this._regex.initialUrlRegex,"/");for(_(n)?0===n.indexOf("/")&&(n=n.slice(1)):n="",n=t.__getBaseUrl(r)+n;"/"===n[n.length-1];)n=n.slice(0,-1);e.baseUrl=n+"/"}}return t.__getQuery=function(t){return q(t)},t.__getBaseUrl=function(t){var e=dt(te),n=dt(Ye),i=n.origin,r=n.protocol;n.host;return"file:"===r||r.indexOf("wmapp")>-1||r.indexOf("ms-appx")>-1?i=n.href:C(i)&&(i=n.protocol+"//"+n.host),i=i.replace(e.initialUrlRegex,""),i.split("?")[0].split("#")[0]+"/"},t.prototype.initialize=function(e){e=e||"";var n=t.__urlUtilsElement||(t.__urlUtilsElement=this._document.createElement("a")),i=this._browserConfig;"/"===e[0]&&0!==e.indexOf("//")&&(e=e.slice(1)),this._regex.fullUrlRegex.test(e)||(e=i.baseUrl+e),n.setAttribute("href",e),e=n.href,n.setAttribute("href",e),e=n.href,this.href=e,this.protocol=n.protocol?n.protocol.replace(/:$/,""):"",this.host=n.host,this.search=n.search?n.search.replace(/^\?/,""):"",this.hash=n.hash?n.hash.replace(/^#/,""):"",this.hostname=n.hostname,this.port=n.port;var r;r=v(i.baseUrl)?"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname:e.replace(i.baseUrl,"/"),r=r.replace(this._regex.initialUrlRegex,"/"),this.pathname=r.split("?")[0].split("#")[0],this.query=t.__getQuery(this.search)},t.prototype.toString=function(){return this.href},t._inject={_EventManager:Xt,_document:Qt,_window:Pe,_compat:Vt,_regex:te,_browserConfig:Re},t}();t.UrlUtils=r,Pt.injectable(Le,r,null,Tr)}(Fo=t.web||(t.web={}));var Mo;!function(t){function n(){return function(){E.nextTick(s)}}function i(){var t=new m(s),e=dt(Qt),n=dt(Pe),i=e.createElement("div");return t.observe(i,{attributes:!0}),n.addEventListener("unload",function(){t.disconnect(),t=null},!1),function(){i.setAttribute("drainQueue","drainQueue")}}function o(){return function(){O(s)}}function s(){for(var t,e,n,i=0;i<h.length;i++)t=h[i],e=t[0],n=t[1],e(n);h=[]}function u(t){return!b(t.Promise)&&y(t.Promise.all)&&y(t.Promise.race)&&y(t.Promise.resolve)&&y(t.Promise.reject)?t.Promise:w}function c(){return I.config}var l,h=[],f="undefined"!=typeof window?window:{},m=f.MutationObserver||f.WebKitMutationObserver,E=E;l="undefined"!=typeof E&&"[object process]"==={}.toString.call(E)?n():m?i():o();var w=function(){function t(e){if(!y(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof t))throw new TypeError('Failed to construct "Promise": Please use the "new" operator, this object constructor cannot be called as a function.');this.__subscribers=[],t.__invokeResolveFunction(e,this)}return t.all=function(e){return x(e)?new t(function(t,n){function i(t){return function(e){return r(t,e)}}function r(e,n){s[e]=n,0===--a&&t(s)}var o,s=[],a=e.length;0===a&&t([]);for(var u=0;u<e.length;u++)o=e[u],d(o)?o.then(i(u),n):r(u,o)}):t.all([e])},t.race=function(e){return x(e)?new t(function(t,n){for(var i,r=0;r<e.length;r++)i=e[r],i&&"function"==typeof i.then?i.then(t,n):t(i)}):t.race([e])},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.__invokeResolveFunction=function(e,n){function i(e){t.__resolve(n,e)}function r(e){t.__reject(n,e)}try{e(i,r)}catch(t){r(t)}},t.__invokeCallback=function(e,n,i,r){var o,s,a,u,c=y(i);if(c)try{o=i(r),a=!0}catch(t){u=!0,s=t}else o=r,a=!0;t.__handleThenable(n,o)||(c&&a?t.__resolve(n,o):u?t.__reject(n,s):e===T.FULFILLED?t.__resolve(n,o):e===T.REJECTED&&t.__reject(n,o))},t.__publish=function(e,n){for(var i,r,o=e.__subscribers,s=e.__detail,a=0;a<o.length;a+=3)i=o[a],r=o[a+n],t.__invokeCallback(n,i,r,s);e.__subscribers=null},t.__publishFulfillment=function(e){t.__publish(e,e.__state=T.FULFILLED)},t.__publishRejection=function(e){t.__publish(e,e.__state=T.REJECTED)},t.__reject=function(e,n){e.__state===T.PENDING&&(e.__state=T.SEALED,e.__detail=n,t.config.async(t.__publishRejection,e))},t.__fulfill=function(e,n){e.__state===T.PENDING&&(e.__state=T.SEALED,e.__detail=n,t.config.async(t.__publishFulfillment,e))},t.__resolve=function(e,n){e===n?t.__fulfill(e,n):t.__handleThenable(e,n)||t.__fulfill(e,n)},t.__handleThenable=function(e,n){var i;if(e===n)return t.__reject(e,new TypeError("A promises callback cannot return the same promise.")),!0;if(d(n))try{return n.then.call(n,function(r){return!!i||(i=!0,void(n!==r?t.__resolve(e,r):t.__fulfill(e,r)))},function(n){return!!i||(i=!0,void t.__reject(e,n))}),!0}catch(n){return!!i||(t.__reject(e,n),!0)}return!1},t.__subscribe=function(t,e,n,i){var r=t.__subscribers,o=r.length;r[o]=e,r[o+T.FULFILLED]=n,r[o+T.REJECTED]=i},t.prototype.then=function(n,i){var r=this,o=new this.constructor(e,this);if(this.__state){var s=arguments;t.config.async(function(){t.__invokeCallback(r.__state,o,s[r.__state-1],r.__detail)})}else t.__subscribe(this,o,n,i);return o},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.toString=function(){return"[object Promise]"},t.config={async:function(t,e){var n=h.push([t,e]);1===n&&l()}},t}();t.Promise=w;var T;!function(t){t[t.PENDING=void 0]="PENDING",t[t.SEALED=0]="SEALED",t[t.FULFILLED=1]="FULFILLED",t[t.REJECTED=2]="REJECTED"}(T||(T={})),t.IPromise=u,Pt.injectable($t,u,[Pe],kr);var N=function(){function t(){var t=dt(Vt);this.__fileSupported=t.fileSupported}return t.prototype.initialize=function(t){this.__options=r(!1,!1,{},this._config,t)},t.prototype.execute=function(){var t=this.__options,e=t.url;if(!_(e)||v(e.trim()))return this._invalidOptions();t.url=this._browser.urlUtils(e).toString();var n=t.isCrossDomain||!1,i=!1;return n?i=!0:(this.xhr=new XMLHttpRequest,C(this.xhr.withCredentials)&&(i=this._browser.isCrossDomain(e))),i?(this.xhr=null,this.jsonpCallback=t.jsonpCallback||z(Mr),this.executeJsonp()):this._sendXhrRequest()},t.prototype.executeJsonp=function(){var t=this,n=this.__options,i=n.url;if(!_(i)||v(i.trim()))return this._invalidOptions();n.url=this._browser.urlUtils(i).toString(),b(this.jsonpCallback)&&(this.jsonpCallback=n.jsonpCallback||z(Kn));var r=new S(function(r,o){var s=t._window,a=t._document,u=a.createElement("script"),c=t.jsonpCallback,l=n.jsonpIdentifier||"callback";u.src=i+(i.indexOf("?")>-1?"&":"?")+l+"="+c;var h=s[c];s[c]=function(e){y(t.clearTimeout)&&t.clearTimeout(),a.head.removeChild(u),C(h)?$(s,c):s[c]=h,r({response:e,status:200})},a.head.appendChild(u);var p=n.timeout;g(p)&&p>0&&(t.clearTimeout=O(function(){t.clearTimeout=F(function(){o(new k({response:"Request timed out in "+p+"ms for "+i,status:408})),s[c]=e},p-1)}))});return r.initialize(this),r},t.prototype._xhrOnReadyStateChange=function(){var t=this.xhr;if(4===t.readyState){var e=t.status;if(0===e){var n=t.response;if(b(n))try{n=t.responseText}catch(t){}return!v(n)}return e>=200&&e<300||304===e}},t.prototype._sendXhrRequest=function(){var t=this,e=this.xhr,n=this.__options,i=n.method,r=n.url,o=new S(function(o,s){e.onreadystatechange=function(){var e=t._xhrOnReadyStateChange();if(!b(e)){var i=t._formatResponse(n.responseType,e);e?o(i):s(new k(i)),t.xhr=n=null}},_(i)||(t._log.info('AjaxOptions method was not of type string. Defaulting to "GET".'),i="GET"),e.open(i.toUpperCase(),r,!0,n.user,n.password);var u=n.responseType;if(t.__fileSupported||""===u||"text"===u||(u=""),"json"===u)try{e.responseType=u}catch(t){e.responseType=""}e.withCredentials=n.withCredentials;var c=n.overrideMimeType,l=n.data;if(_(c)&&!v(c)&&e.overrideMimeType(c),b(l)||""===l)t.__setHeaders(),e.send();else{var h=n.transforms||[],p=h.length,f=n.contentType,d=_(f)&&!v(f);if(p>0){for(var m=0;m<p;++m)l=h[m](l,e);d&&e.setRequestHeader("Content-Type",f),t.__setHeaders(),e.send(l)}else if(a(l))if(d){var y=f.toLowerCase();y.indexOf("x-www-form-urlencoded")!==-1?(l=t.__serializeFormData(),e.setRequestHeader("Content-Type",f),t.__setHeaders(),e.send(l)):y.indexOf("multipart/form-data")!==-1?t.__fileSupported?(l=t.__appendFormData(),t.__setHeaders(),e.send(l)):t.__submitFramedFormData().then(function(t){o(t)},function(){t.xhr=null}):(l=JSON.stringify(l),e.setRequestHeader("Content-Type",f),t.__setHeaders(),e.send(l))}else t.__setHeaders(),e.send(l);else d&&e.setRequestHeader("Content-Type",f),t.__setHeaders(),e.send(l)}var C=n.timeout;g(C)&&C>0&&(t.clearTimeout=O(function(){t.clearTimeout=F(function(){s(new k({response:"Request timed out in "+C+"ms for "+n.url,status:408,getAllResponseHeaders:function(){return e.getAllResponseHeaders()},xhr:e})),e.onreadystatechange=null,e.abort(),t.xhr=null},C-1)}))});return o.initialize(this),o},t.prototype._invalidOptions=function(){var t=this;return new S(function(e,n){t._log.warn("Attempting a request without specifying a url"),n(new k({response:"Attempting a request without specifying a url",status:null,getAllResponseHeaders:null,xhr:null}))})},t.prototype._formatResponse=function(t,e){var n=this.xhr,i=n.status,r=n.response;if(b(r))try{r=n.responseText}catch(t){}if(0===i&&(i=e?200:404),n.onreadystatechange=null,y(this.clearTimeout)&&this.clearTimeout(),"json"===t&&_(r))try{r=JSON.parse(r)}catch(t){}return{response:r,status:i,getAllResponseHeaders:function(){return n.getAllResponseHeaders()},xhr:n}},t.prototype.__setHeaders=function(){var t,e,n=this.__options.headers,i=Object.keys(n||{}),r=this.xhr,o=i.length;for(e=0;e<o;++e)t=i[e],r.setRequestHeader(t,n[t])},t.prototype.__serializeFormData=function(){for(var t,e,n=this.__options.data,i=Object.keys(n),r=[];i.length>0;)t=i.pop(),e=n[t],b(e)?e="":a(e)&&(this._log.warn('Invalid form entry with key "'+t+'" and value "'+e),e=JSON.stringify(e)),r.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return r.join("&").replace(/%20/g,"+")},t.prototype.__appendFormData=function(){for(var t,e,n=this.__options.data,i=new FormData,r=Object.keys(n);r.length>0;)t=r.pop(),e=n[t],b(e)?i.append(t,""):a(e)?p(e)?i.append(t,e,e.name||e.fileName||"blob"):(this._log.warn('Invalid form entry with key "'+t+'" and value "'+e),i.append(t,JSON.stringify(e))):i.append(t,e);return i},t.prototype.__submitFramedFormData=function(){var t,e=this,n=this.__options,i=n.data,r=n.url,o=this._document,s=o.body,a=dt($t),u=o.createElement("form"),c=o.createElement("iframe"),l=z("iframe_target"),h=Object.keys(i);for(c.name=u.target=l,c.src="javascript:false;",u.enctype=u.encoding="multipart/form-data",u.action=r,u.method="POST",u.style.display="none";h.length>0;)t=h.pop(),u.insertBefore(this.__createInput(t,i[t]),null);return new a(function(t,n){e.xhr.abort=function(){c.onload=null,s.removeChild(u),s.removeChild(c),n()},c.onload=function(){var n=c.contentDocument.body.innerHTML;s.removeChild(u),s.removeChild(c),t({response:n,status:200,getAllResponseHeaders:function(){return""}}),e.xhr=c.onload=null},s.insertBefore(u,null),s.insertBefore(c,null),u.submit()})},t.prototype.__createInput=function(t,e){var n=this._document,i=n.createElement("input");if(i.type="hidden",i.name=t,b(e))i.value="";else if(a(e))if(!y(e.slice)||C(e.name)||C(e.path))this._log.info('Invalid form entry with key "'+t+'" and value "'+e),i.value=JSON.stringify(e);else{var r=n.querySelectorAll('input[type="file"][name="'+t+'"]'),o=r.length;if(0===o)this._log.info('Could not find input[type="file"] with [name="'+t+'"]. Stringifying data instead.'),i.value=JSON.stringify(e);else if(1===o){i=r[0];var s=i.cloneNode(!0);i.parentNode.insertBefore(s,i)}else{for(var u=void 0,c=e.path;o-- >0;)if(u=r[o],u.value===c){i=u;var l=i.cloneNode(!0);i.parentNode.insertBefore(l,i);break}o===-1&&(this._log.info('Could not find input[type="file"] with [name="'+t+'"] and [value="'+e.path+'"]. Stringifying data instead.'),i.value=JSON.stringify(e))}}else i.value=e;return i},t._inject={_browser:Ie,_window:Pe,_document:Qt,_config:Ut,_log:Kt},t}();t.HttpRequest=N;var k=function(){function t(t){this.name="AjaxError",Error.apply(this),this.response=this.message=t.response,this.status=t.status,this.getAllResponseHeaders=t.getAllResponseHeaders,this.xhr=t.xhr}return t.prototype.toString=function(){var t=this.response,e=t;return a(t)&&!t.hasOwnProperty("toString")&&(e=JSON.stringify(t)),"Request failed with status: "+this.status+" and response: "+e},t}();t.AjaxError=k,k.prototype=Error.prototype;var S=function(t){function n(e,n){t.call(this,e),this._window=dt(Pe),b(n)||(this.__http=n.__http)}return __extends(n,t),n.prototype.initialize=function(t){a(t)&&b(this.__http)&&(this.__http=t)},n.prototype.cancel=function(){var t=this.__http,n=t.xhr,i=t.jsonpCallback;y(t.clearTimeout)&&t.clearTimeout(),b(n)?b(i)||(this._window[i]=e):(n.onreadystatechange=null,n.abort(),t.xhr=null),this.__subscribers=[]},n.prototype.then=function(e,n){return t.prototype.then.call(this,e,n)},n.prototype.catch=function(e){return t.prototype.catch.call(this,e)},n}(w);t.AjaxPromise=S;var I=function(){function t(){this.responseType={DEFAULT:"",ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},this.contentType={ENCODED_FORM:"application/x-www-form-urlencoded;charset=utf-8",JSON:"application/json;charset=utf-8",MULTIPART_FORM:"multipart/form-data",OCTET_STREAM:"application/octet-stream;charset=utf-8",XML:"application/xml;charset=utf-8",PLAIN_TEXT:"text/plain",HTML:"text/html"}}return t.prototype.ajax=function(t){var e=dt(Bt);return e.initialize(t),e.execute()},t.prototype.jsonp=function(t){var e=dt(Bt);return e.initialize(t),e.executeJsonp()},t.prototype.json=function(t){var e=dt(Bt);return e.initialize(r(!1,!1,{},t,{responseType:"json"})),e.execute()},t.config={url:null,method:"GET",responseType:"",transforms:[],headers:{},withCredentials:!1,timeout:null,jsonpIdentifier:"callback",contentType:"application/json;charset=utf-8"},t}();t.Http=I,Pt.injectable(zt,I),Pt.injectable(Bt,N,null,Tr),t.IHttpConfig=c,Pt.injectable(Ut,c)}(Mo=t.async||(t.async={}));var Do;!function(t){function e(){return o}function n(){return t.managerCache}var i={},r={},o=function(){function t(t,e){this.__uid=t,this.__options=e,this.__size=0,b(e)&&(this.__options={timeout:0}),r[t]={}}return t.create=function(e,n){var r=i[e];return b(r)&&(r=i[e]=new t(e,n)),r},t.fetch=function(t){return i[t]},t.clear=function(){for(var t=Object.keys(i),e=t.length,n=0;n<e;++n)i[t[n]].clear();i={}},t.prototype.info=function(){return{uid:this.__uid,size:this.__size,options:this.__options}},t.prototype.put=function(t,e){var n=r[this.__uid][t];r[this.__uid][t]=e,C(n)&&this.__size++;var i=this.__options.timeout;return g(i)&&i>0&&F(this.remove,i,[t],this),e},t.prototype.read=function(t){return r[this.__uid][t]},t.prototype.remove=function(t){$(r[this.__uid],t),this.__size--},t.prototype.clear=function(){r[this.__uid]={},this.__size=0},t.prototype.dispose=function(){this.clear(),$(i,this.__uid)},t}();t.Cache=o,t.ICacheFactory=e,Pt.injectable(_e,e,null,Nr),t.managerCache=o.create("__managerCache"),t.IManagerCache=n,Pt.injectable(fe,n);var s=function(t){function e(){t.call(this,"__templateCache")}return __extends(e,t),e.prototype.put=function(e,n){var i=this._Promise;if(t.prototype.put.call(this,e,i.resolve(n)),h(n))n=n.cloneNode(!0);else if(l(n)){var r=document.createDocumentFragment();r.appendChild(n.cloneNode(!0)),n=r}else(_(n)||b(n))&&(n=nt(n));return i.resolve(n)},e.prototype.read=function(e){var n=this,i=t.prototype.read.call(this,e);return b(i)?this._Promise.reject(null):i.then(function(t){return n.put(e,t)},function(t){return n._log.warn("Error retrieving template, "+e+", from promise."),null})},e._inject={_Promise:$t,_log:Kt},e}(o);t.TemplateCache=s,Pt.injectable(de,s);var a=function(){function t(t){var e=this;this._storage=t,k(function(t,n){e[n]=t},t)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._storage.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._storage.clear()},t.prototype.getItem=function(t){return this._storage.getItem(t)},t.prototype.key=function(t){return this._storage.key(t)},t.prototype.removeItem=function(t){this._storage.removeItem(t)},t.prototype.setItem=function(t,e){this._storage.setItem(t,e),this[t]=this.getItem(t)},t}();t.BaseStorage=a;var u=function(t){function e(){t.call(this,dt(Pe).localStorage)}return __extends(e,t),e}(a);t.LocalStorage=u,Pt.injectable(Oe,u);var c=function(t){function e(){t.call(this,dt(Pe).sessionStorage)}return __extends(e,t),e}(a);t.SessionStorage=c,Pt.injectable(Fe,c)}(Do=t.storage||(t.storage={}));
var zo,Bo={"u+":{precedence:4,associativity:"rtl",fn:function(t,e,n){return+n(t,e)}},"+":{precedence:6,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)+i(t,e)}},"u-":{precedence:4,associativity:"rtl",fn:function(t,e,n){return-n(t,e)}},"-":{precedence:6,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)-i(t,e)}},"*":{precedence:5,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)*i(t,e)}},"/":{precedence:5,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)/i(t,e)}},"%":{precedence:5,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)%i(t,e)}},"?":{precedence:15,associativity:"rtl",fn:function(){}},":":{precedence:15,associativity:"rtl",fn:function(){}},">":{precedence:8,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)>i(t,e)}},"<":{precedence:8,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)<i(t,e)}},"!":{precedence:4,associativity:"rtl",fn:function(t,e,n){return!n(t,e)}},"~":{precedence:4,associativity:"rtl",fn:function(t,e,n){return~n(t,e)}},"&":{precedence:10,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)&i(t,e)}},"|":{precedence:12,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)|i(t,e)}},">>":{precedence:7,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)>>i(t,e)}},"<<":{precedence:7,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)<<i(t,e)}},">>>":{precedence:7,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)>>>i(t,e)}},"&&":{precedence:13,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)&&i(t,e)}},"||":{precedence:14,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)||i(t,e)}},"==":{precedence:9,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)==i(t,e)}},"===":{precedence:9,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)===i(t,e)}},"!=":{precedence:9,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)!=i(t,e)}},"!==":{precedence:9,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)!==i(t,e)}},">=":{precedence:8,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)>=i(t,e)}},"<=":{precedence:8,associativity:"ltr",fn:function(t,e,n,i){return n(t,e)<=i(t,e)}},"=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}},"++":{precedence:3,associativity:"",fn:function(t,e,n){var i=plat.acquire(Kt);i.error(new Error("Assignment operators are not supported"))}},"--":{precedence:3,associativity:"",fn:function(t,e,n){var i=plat.acquire(Kt);i.error(new Error("Assignment operators are not supported"))}},"+=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}},"-=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}},"*=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}},"/=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}},"%=":{precedence:17,associativity:"rtl",fn:function(t,e,n,i){var r=plat.acquire(Kt);r.error(new Error("Assignment operators are not supported"))}}},Uo={"()":{precedence:2,associativity:null,fn:null},"[]":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},"{}":{precedence:1,associativity:null,fn:null}},$o={"{":{precedence:1,associativity:null,fn:null},"}":{precedence:1,associativity:null,fn:null},"[":{precedence:2,associativity:null,fn:null},"]":{precedence:2,associativity:null,fn:null},"(":{precedence:2,associativity:null,fn:null},")":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},",":{precedence:18,associativity:null,fn:null},"'":{precedence:0,associativity:null,fn:null},'"':{precedence:0,associativity:null,fn:null}},Vo={false:!1,true:!0,null:null,undefined:"undefined"};!function(t){function o(t){return u._log=t,u}var s=["push","pop","reverse","shift","sort","splice","unshift"],u=function(){function t(){this._compat=dt(Vt),this.__identifiers={},this.__identifierHash={},this.__lengthListeners={},this.__contextObjects={},this.__isArrayFunction=!1}return t.getManager=function(e){var n,i=t.__managers,r=e.uid,o=i[r];return b(o)?(n=i[r]=new t,n.context=e,n):n=o},t.dispose=function(e){if(!b(e)){var n=e.uid,i=t.__controls,r=i[n]||{},o=t.__managers,s=o[n];b(s)||(s.dispose(),$(o,n));for(var a,u=Object.keys(r);u.length>0;)for(a=r[u.shift()];a.length>0;)a.shift()();$(i,n),e.hasOwnContext&&!b(e.context)&&(t.unObserve(e.context),t.defineProperty(e,Ft,e.context,!0,!0,!0))}},t.removeArrayListeners=function(e,n){var i=t.arrayChangeListeners[e];b(i)||$(i,n)},t.getContext=function(t,e){if(b(t))return t;for(e=e.slice(0);e.length>0;)if(t=t[e.shift()],b(t))return t;return t},t.defineProperty=function(t,e,i,r,o,s){n(t,e,i,r,o,s)},t.defineGetter=function(t,e,n,r,o){i(t,e,n,r,o)},t.pushRemoveListener=function(e,n,i){var r,o=t.__controls,s=o[n];b(s)&&(s=o[n]={}),r=s[e],b(r)&&(r=s[e]=[]),r.push(i)},t.spliceRemoveListener=function(e,n,i){var r,o=t.__controls,s=o[n];if(!b(s)&&(r=s[e],!b(r))){var a=r.indexOf(i);a!==-1&&(r.splice(a,1),0===r.length&&$(s,e))}},t.removeIdentifier=function(e,n){for(var i,r=e.length,o=t.__controls,s=0;s<r;++s)i=o[e[s]],b(i)||$(i,n)},t.createContext=function(e,n){var i=e.context;if(!a(i)){if(!b(i))return void t._log.warn("A child control is trying to create a child context that has a parent control with a primitive type context");i=e.context={}}for(var r,o,s=n.split(".");s.length>0;)r=s.shift(),o=i[r],b(o)&&(o=g(Number(s[0]))?i[r]=[]:i[r]={}),i=o;return i},t.unObserve=function(t){r(!0,!0,t)},t.prototype.getContext=function(t,e){return this._getContext(t.join("."),t,e)},t.prototype.observe=function(n,i){var r=this;if(v(n))return e;var o,s,u=n.split("."),c=u.pop(),l="length"===c,h=this._hasIdentifier(n),p=!b(i);if(u.length>0?(o=u.join("."),s=this._getContext(o,u,!0)):(o=c,s=this.context),!a(s))return p?(l&&(this.__lengthListeners[n]=i,t.pushRemoveListener(n,i.uid,function(){$(r.__lengthListeners,n)})),this._addObservableListener(n,i,l)):e;this.__observedIdentifier=null,this.__contextObjects[n]=s[c];var f=this.__observedIdentifier,d=!b(f),m=e;if(d&&(h=!0),p){var g=e,y=this._addObservableListener(n,i,l);d&&n!==f&&(g=this._addObservableListener(f,i,l)),m=function(){y(),g()}}var C=x(s),E=m,w=e,T=e,N=Number(c);if(C&&N>=s.length)w=this.observe(o+".length",{uid:i.uid,listener:function(t,e){N>=t||(w(),r._define(n,s,c))}}),m=function(){E(),w()};else if(!h)if(C&&l){var k=u.pop(),S=this.getContext(u,!1);if(this.__observedIdentifier=null,V(S,k),_(this.__observedIdentifier)&&(o=this.__observedIdentifier),p){var I=i.uid;w=this.observeArrayMutation(I,e,o,s,null),T=this.observe(o,{uid:I,listener:function(t,n){w(),w=r.observeArrayMutation(I,e,o,t,n)}})}m=function(){E(),T(),w()}}else this._define(n,s,c);return m},t.prototype.observeArrayMutation=function(t,n,i,r,o){if(x(o)&&this._restoreArray(o),b(r))return e;var s=i.split("."),a=s.pop(),u=this.getContext(s,!1);this.__observedIdentifier=null,V(u,a),_(this.__observedIdentifier)&&(i=this.__observedIdentifier);var c=[];return y(n)&&c.push(this._pushArrayListener(t,i,n)),this._overwriteArray(i,r),function(){for(;c.length>0;)c.pop()()}},t.prototype.dispose=function(){this.context=null,this.__identifiers={},this.__identifierHash={},this.__contextObjects={}},t.prototype._pushArrayListener=function(e,n,i){var r=t.arrayChangeListeners,o=r[n];b(o)&&(o=r[n]={});var s=o[e];b(s)&&(s=o[e]=[]);var a=!1,u=function(){if(!a){a=!0,t.spliceRemoveListener(n,e,u);var c=s.indexOf(i);c!==-1&&(s.splice(c,1),0===s.length&&($(o,e),v(o)&&$(r,n)))}};return s.push(i),t.pushRemoveListener(n,e,u),u},t.prototype._restoreArray=function(t){var e=this._compat;if(e.setProto)Object.setPrototypeOf(t,Object.create(Array.prototype));else if(e.proto)t.__proto__=Object.create(Array.prototype);else for(var n=s.length,i=void 0,r=0;r<n;++r)i=s[r],t[i]=Array.prototype[i]},t.prototype._overwriteArray=function(e,n){var i,r,o=this._compat,a=s.length;if(o.proto){var u=Object.create(Array.prototype);for(r=0;r<a;++r)i=s[r],u[i]=this._overwriteArrayFunction(e,i);return void(o.setProto?Object.setPrototypeOf(n,u):n.__proto__=u)}for(r=0;r<a;++r)i=s[r],t.defineProperty(n,i,this._overwriteArrayFunction(e,i),!1,!0,!0)},t.prototype._getContext=function(t,e,n){var i=this.__contextObjects[t];return b(i)&&(i=n===!0?this.__contextObjects[t]=this._observeImmediateContext(e,t):this._getImmediateContext(e)),i},t.prototype._getImmediateContext=function(t){for(var e=this.context;t.length>0&&(e=e[t.shift()],!b(e)););return e},t.prototype._observeImmediateContext=function(t,e){return b(this.__identifiers[e])&&this.observe(e,null),this._getImmediateContext(t)},t.prototype._getValues=function(t,e,n){for(var i,r=a(e),o=a(n);t.length>1&&(i=t.shift(),r&&(e=e[i],b(e)&&(r=!1)),o&&(n=n[i],b(n)&&(o=!1)),r||o););i=t[0];var s,u;return b(e)||(s=e[i]),b(n)||(u=n[i]),{newValue:s,oldValue:u}},t.prototype._notifyChildProperties=function(t,n,i,r){var o=this;r=r||Object.keys(this.__identifierHash[t]||{});for(var s,u,c,l,h,p,f,d,m,g,y,C=r.length,E={},w=".",T="length",N=t.length+1,k=0;k<C;++k){if(s=r[k],u=s.slice(N),l=u.split(w),p=l.pop(),f=p===T,c=l.join(w),v(c)){if(d=n,m=i,g=b(d)?void 0:d[p],y=b(m)?void 0:m[p],f&&!x(m)&&x(d)){var S=this.__lengthListeners[s];if(!b(S)){var I=S.uid,R=t.split(w),A=R.pop(),j=R.join(w),L=this._getContext(j,R,!1);this.__observedIdentifier=null,V(L,A),_(this.__observedIdentifier)&&(j=this.__observedIdentifier);var P=this.observeArrayMutation(I,e,j,d,null);this.observe(j,{uid:I,listener:function(t,n){P(),P=o.observeArrayMutation(I,e,j,t,n)}}),$(this.__lengthListeners,s)}}}else h=E[c],b(h)&&(h=E[c]=this._getValues(l,n,i)),d=h.newValue,m=h.oldValue,g=b(d)?d:d[p],y=b(m)?m:m[p];E[u]={newValue:g,oldValue:y},a(d)&&(!x(d)||d.length>p)&&this._define(s,d,p),this._execute(s,g,y)}E=null},t.prototype._addObservableListener=function(e,n,i){var r=this;if(i===!0){var o=e.split(".");o.pop();var s=o.pop(),u=this.getContext(o,!1);a(u)&&(this.__observedIdentifier=null,V(u,s),_(this.__observedIdentifier)&&(e=this.__observedIdentifier+(i===!0?".length":"")))}this.__add(e,n);var c=n.uid,l=function(){t.spliceRemoveListener(e,c,l),r._removeCallback(e,n)};return t.pushRemoveListener(e,c,l),l},t.prototype._define=function(t,e,n){a(e[n])?this.__defineObject(t,e,n):this.__definePrimitive(t,e,n)},t.prototype._overwriteArrayFunction=function(e,n){var i=t.arrayChangeListeners[e]||{},r=this;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s-0]=arguments[s];var a,u,c,l,h,p,_=this.length,f=this.slice(0),d="unshift"===n,v="shift"===n,m="splice"===n,g=v||d||m,y="sort"===n||"reverse"===n;g?(r.__isArrayFunction=!0,a=Array.prototype[n].apply(this,o),r.__isArrayFunction=!1,h=this.length,l=0,v?(c=0,p=_>0?[a]:[]):d?(c=o.length,p=[]):(c=o.length-2,l=o[0],p=a)):(a=Array.prototype[n].apply(this,o),h=this.length,y?u=f:"push"===n?(c=o.length,l=_,p=[]):"pop"===n&&(c=0,l=h,p=_>0?[a]:[])),(v||m||"pop"===n)&&t.unObserve(a);var b,C,x,E,w=Object.keys(i),T=w.length;for(x=0;x<T;++x)for(b=i[w[x]],C=b.length,E=0;E<C;++E)b[E]([{object:this,type:n,index:l,removed:p,addedCount:c,oldArray:u}]);return g?r._notifyChildProperties(e,this,f):r._execute(e+".length",h,_),a}},t.prototype._removeCallback=function(t,e){var n=this.__identifiers[t];if(!b(n)){var i=n.indexOf(e);i!==-1&&(n.splice(i,1),0===n.length&&$(this.__contextObjects,t))}},t.prototype._hasIdentifier=function(t){return!v(this.__identifiers[t])},t.prototype._execute=function(t,e,n){var i=this.__identifiers[t];if(C(e)?$(this.__contextObjects,t):this.__contextObjects[t]=e,e!==n&&!b(i))for(var r=i.slice(0),o=r.length,s=0;s<o;++s)r[s].listener(e,n)},t.prototype.__defineObject=function(e,n,i){var r=this,o=n[i];Object.defineProperty(n,i,{configurable:!0,enumerable:!0,get:function(){return r.__observedIdentifier=e,o},set:function(s){if(o!==s){var u=o;if(o=s,!r.__isArrayFunction){t.unObserve(u);var c,l=r.__identifierHash[e],h=!1;a(l)&&(c=Object.keys(l),h=c.length>0),r._execute(e,o,u),h?(r._notifyChildProperties(e,o,u,c),a(o)||r.__definePrimitive(e,n,i)):v(r.__identifiers[e])?t.defineProperty(n,i,o,!0,!0,!0):a(o)||r.__definePrimitive(e,n,i)}}}})},t.prototype.__definePrimitive=function(e,n,i){var r=this,o=n[i],s=!b(o);x(n)&&"length"===i||Object.defineProperty(n,i,{configurable:!0,enumerable:!0,get:function(){return r.__observedIdentifier=e,o},set:function(u){if(o!==u){var c=o;if(o=u,!r.__isArrayFunction||!x(n)){var l,h=r.__identifierHash[e],p=!1;a(h)&&(l=Object.keys(h),p=l.length>0),r._execute(e,u,c),!p&&v(r.__identifiers[e])?t.defineProperty(n,i,o,!0,!0,!0):a(o)?(r.__defineObject(e,n,i),p&&r._notifyChildProperties(e,u,c,l)):s||(r.__definePrimitive(e,n,i),s=!0)}}}})},t.prototype.__add=function(t,e){var n=this.__identifiers[t],i=e.priority,r=!1;if(b(n)&&(n=this.__identifiers[t]=[]),g(i)){for(var o=n.length,s=0;s<o;++s)if(i>n[s].priority){n.splice(s,0,e),r=!0;break}}else e.priority=-1;r||n.push(e),this.__addHashValues(t)},t.prototype.__addHashValues=function(t){var e=this.__identifierHash;if(!a(e[t])){e[t]={};for(var n,i,r,o,s=".",u=t,c=[];(n=u.lastIndexOf(s))!==-1;){for(u=u.slice(0,n),i=e[u],o=c.length,b(i)&&(i=e[u]={}),i[t]=!0,r=0;r<o;++r)i[c[r]]=!0;c.push(u)}}},t.arrayChangeListeners={},t.__managers={},t.__controls={},t}();t.ContextManager=u,t.IContextManagerStatic=o,Pt.injectable(ie,o,[Kt],Er),Pt.injectable(re,u,null,Tr)}(zo=t.observable||(t.observable={}));var qo;!function(t){function e(){return o}function n(t,e,n,i,r){return s._log=t,s._compat=e,s._document=n,s._window=i,s._dom=r,s}function i(t){return a._EventManager=t,a}var r=function(){function t(){this.defaultPrevented=!1,this.stopped=!1}return t.prototype.initialize=function(t,e,n){this.name=t,this.direction=n||this._EventManager.UP,this.sender=e},t.prototype.preventDefault=function(){this.defaultPrevented||this._ContextManager.defineGetter(this,"defaultPrevented",!0)},t.prototype.stopPropagation=function(){this.direction===this._EventManager.UP&&(this.stopped=!0,this._EventManager.propagatingEvents[this.name]=!1)},t._inject={_EventManager:Xt,_ContextManager:ie},t}();t.DispatchEvent=r,Pt.injectable(Wt,r,null,Tr);var o=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.dispatch=function(t,e){var n=dt(Jt);return n.initialize(t,e),s.sendEvent(n),n},e.prototype.initialize=function(e,n){t.prototype.initialize.call(this,e,n,this._EventManager.DIRECT)},e}(r);t.LifecycleEvent=o,t.ILifecycleEventStatic=e,Pt.injectable(Gt,e,null,Er),Pt.injectable(Jt,o,null,Tr);var s=function(){function t(){}return t.initialize=function(){if(!t.__initialized){t.__initialized=!0;for(var e,n=t.__lifecycleEventListeners,i=t._compat,r=t._document,s=t._window,a=t._dom,u=o.dispatch;n.length>0;)e=n.pop(),r.removeEventListener(e.name,e.value,!1);if(i.cordova){for(var c,l=[xi,Ei,wi],h=i.winJs,p=l.length,_=function(e){return function(){u(e,t)}},f=void 0,d=0;d<p;++d)c=l[d],f=_(c),n.push({name:c,value:f}),a.addEventListener(r,c,f,!1);f=_(Ci),n.push({name:Li,value:f}),a.addEventListener(r,Li,f,!1),f=_(bi),n.push({name:Pi,value:f}),a.addEventListener(r,Pi,f,!1),f=function(){return h||u(Oi,t),!0},n.push({name:Oi,value:f}),a.addEventListener(r,Oi,f,!1),h&&(f=function(){return u(Oi,t),!0},n.push({name:Fi,value:f}),s.WinJS.Application.addEventListener(Fi,f,!1))}else{if(i.amd)return;a.addEventListener(s,"load",function(){u(bi,t)})}}},t.dispose=function(e){$(t.__eventsListeners,e)},t.on=function(e,n,i,r){var o=t.__eventsListeners[e];b(o)&&(o=t.__eventsListeners[e]={listeners:{},context:r});var s=o.listeners[n];return x(s)||(s=o.listeners[n]=[]),s.push(i),function(){var t=s.indexOf(i);t!==-1&&s.splice(t,1)}},t.dispatch=function(e,n,i,r){var o=dt(Wt);return o.initialize(e,n,i),t.sendEvent(o,r),o},t.hasDirection=function(e){return e===t.UP||e===t.DOWN||e===t.DIRECT},t.sendEvent=function(e,n){var i=e.name,r=e.direction;switch(n=n||[],t.propagatingEvents[i]=!0,n=n||[],r){case t.UP:t._dispatchUp(e,n);break;case t.DOWN:t._dispatchDown(e,n);break;case t.DIRECT:t._dispatchDirect(e,n)}$(t.propagatingEvents,i)},t._dispatchUp=function(e,n){for(var i=e.name,r=e.sender;!b(r)&&t.propagatingEvents[i];)b(r.uid)?r=r.parent:(t.__executeEvent(r.uid,e,n),r=r.parent)},t._dispatchDown=function(e,n){var i,r=[],o=e.name;for(r.push(e.sender);r.length&&t.propagatingEvents[o];)i=r.pop(),b(i.uid)||(t.__executeEvent(i.uid,e,n),b(i.controls)||(r=r.concat(i.controls)))},t._dispatchDirect=function(e,n){for(var i,r=Object.keys(t.__eventsListeners),o=r.length,s=e.name,a=0;a<o&&t.propagatingEvents[s];++a)i=t.__eventsListeners[r[a]],b(i)||b(i.listeners[s])||t.__callListeners(i.context,e,i.listeners[s],n)},t.__executeEvent=function(e,n,i){var r=t.__eventsListeners[e];if(!b(r)){var o=r.context,s=r.listeners[n.name];b(s)||t.__callListeners(o,n,s,i)}},t.__callListeners=function(e,n,i,r){var o=n.name,s=i.length,a=-1;for(r=[n].concat(r);++a<s&&t.propagatingEvents[o];)try{i[a].apply(e,r)}catch(e){t._log.debug(e)}},t.UP="up",t.DOWN="down",t.DIRECT="direct",t.propagatingEvents={},t.__eventsListeners={},t.__lifecycleEventListeners=[],t.__initialized=!1,t}();t.EventManager=s,t.IEventManagerStatic=n,Pt.injectable(Xt,n,[Kt,Vt,Qt,Pe,be],Er);var a=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.dispatch=function(t,n,i,r){var o=dt(e);return o.initialize(t,n,null,i),o.logLevel=r,e._EventManager.sendEvent(o),o},e.prototype.initialize=function(e,n,i,r){t.prototype.initialize.call(this,e,n,this._EventManager.DIRECT),this.error=r},e}(r);t.ErrorEvent=a,t.IErrorEventStatic=i,Pt.injectable(Yt,i,[Xt],Er)}(qo=t.events||(t.events={}));var Ho=function(){function t(){this.uid=z(Xe),this.priority=0,this.dom=t._dom,this.utils=dt(Se),this._log=t._log}return t.getRootControl=function(e){if(b(e))return e;if(!b(e.root))return e.root;for(;!b(e.parent)&&!e.hasOwnContext;){if(!b(e.root))return e.root;e=e.parent}return!e.hasOwnContext&&a(e.context)&&t._log.debug("Root control: "+e.type+" found that sets its context to an Object but does not set the hasOwnContext flag to true. Please set the flag if the control intends to use its own context."),e},t.load=function(e){var n=t._Promise;if(b(e))return n.resolve();var i=e;if(_(i.absoluteContextPath)){if(y(i.contextChanged)){var r=t._ContextManager.getManager(i.root);r.observe(i.absoluteContextPath,{uid:e.uid,priority:br,listener:function(t,n){Wo.TemplateControl.contextChanged(e,t,n)}}),y(i.zCC__plat)&&(i.zCC__plat(),$(i,"zCC__plat"))}var o=i.element;l(o)&&y(o.removeAttribute)&&o.removeAttribute(Di)}return y(e.loaded)?n.resolve(e.loaded()):n.resolve()},t.dispose=function(e){var n=e;if(!b(n)){if(!C(n.templateControl))return void Qo.dispose(n);if(n.hasOwnContext)return void Wo.ViewControl.dispose(n);if(n.controls)return void Wo.TemplateControl.dispose(n);if(y(e.dispose)&&e.dispose(),t.removeEventListeners(e),t._ContextManager.dispose(e),e.element=null,t.removeParent(e),e.__injectable__type===Er){var i=Eo[e.type];Pt.control(e.type,e.constructor,i.dependencies,!0)}}},t.removeParent=function(t){if(!b(t)){var e=t.parent;if(!b(e)){var n=e.controls||[],i=n.indexOf(t);i!==-1&&n.splice(i,1),t.parent=null}}},t.removeEventListeners=function(e){if(!b(e)){var n=t.__eventListeners,i=e.uid,r=n[i];if(x(r)){for(var o=r.length;o-- >0;)r[o]();$(n,i)}}},t.getInstance=function(){return new t},t.__addRemoveListener=function(e,n){var i=t.__eventListeners;return x(i[e])?void i[e].push(n):void(i[e]=[n])},t.__spliceRemoveListener=function(e,n){var i=t.__eventListeners,r=i[e];if(x(r)){var o=r.indexOf(n);if(o===-1)return;r.splice(o,1)}},t.__getControls=function(e,n,i){var r,o=[],s=t.getRootControl(e);b(s)||s[n]!==i||o.push(s);var a=s.controls;if(b(a))return o;for(var u=[].concat(a);u.length>0;)r=u.shift(),r[n]===i&&o.push(r),b(r.controls)||(u=u.concat(r.controls));return o},t.prototype.initialize=function(){},t.prototype.loaded=function(){},t.prototype.getControlsByName=function(e){return t.__getControls(this,"name",e)},t.prototype.getControlsByType=function(e){return _(e)?t.__getControls(this,"type",e):t.__getControls(this,"constructor",e)},t.prototype.addEventListener=function(n,i,r,o){if(!y(r))return this._log.warn('"Control.addEventListener" must take a function as the third argument.'),e;r=r.bind(this);var s=this.dom.addEventListener(n,i,r,o),a=this.uid;return t.__addRemoveListener(a,s),function(){s(),t.__spliceRemoveListener(a,s)}},t.prototype.observe=function(n,i){var r=this,o=a(this.context)?this:this.parent,s=t.getRootControl(o);if(b(o))return e;if(b(o.absoluteContextPath))return this._log.warn("Should not call plat.Control.observe prior to the control being loaded"),e;var u;if(v(i))u=o.absoluteContextPath;else if(_(i)){var c=(t._parser||dt(Zt)).parse(i),l=c.identifiers;l.length>1&&this._log.warn("Only a single identifier can be observed when calling the function plat.Control.observe");var h=c.identifiers[0];if("@"===h[0]){var p=h.split("."),f=p.shift().slice(1),d=p.length>0?"."+p.join("."):"";u=f===Jr?Ft+d:f===to?o.absoluteContextPath+d:o.absoluteContextPath+"."+h}else u=o.absoluteContextPath+"."+h}else u=o.absoluteContextPath+"."+i;var m=t._ContextManager||dt(ie),g=m.getManager(s);return g.observe(u,{listener:function(t,e){n.call(r,t,e,i)},uid:this.uid})},t.prototype.observeArray=function(n,i){var r=a(this.context)?this:this.parent,o=r.context;if(b(r)||!a(o))return e;var s,u;if(v(i))s=o,u=r.absoluteContextPath;else if(_(i)){var c=(t._parser||dt(Zt)).parse(i);s=c.evaluate(o),u=r.absoluteContextPath+"."+c.identifiers[0]}else s=o[i],u=r.absoluteContextPath+"."+i;if(!x(s))return e;var l=y(n);if(!l)return e;n=n.bind(this);var h=t._ContextManager||dt(ie),p=h.getManager(t.getRootControl(r)),f=this.uid,d=function(t){n(t,i)},m=p.observeArrayMutation(f,d,u,s,null),g=p.observe(u,{listener:function(t,e){m(),m=p.observeArrayMutation(f,d,u,t,e)},uid:f});return function(){m(),g()}},t.prototype.observeExpression=function(n,i){var r=this;if(v(i))return e;if(_(i))i=(t._parser||dt(Zt)).parse(i);else if(!y(i.evaluate))return e;var o=b(this.resources)?this.parent:this;if(b(o)||!_(o.absoluteContextPath))return e;var s,a,u,c,l=i.aliases,h=l.length,p={},f=t._ContextManager||dt(ie),d=f.getManager,m=Wo.TemplateControl,g=m.findResource,C=m.evaluateExpression;for(c=0;c<h;++c)s=l[c],a=g(o,s),b(a)||(u=a.resource.type,u!==Hr&&u!==Xr||(p[s]=d(a.control)));var x,E,w=i.identifiers,T=d(t.getRootControl(o)),N=[],k=o.absoluteContextPath,S=k+".",I={};for(h=w.length,c=0;c<h;++c)x=w[c],N=x.split("."),E=N[0],"@"!==x[0]?I[S+x]=T:(s=E.slice(1),s===to?I[k+x.replace(E,"")]=T:s===Jr?I[x.replace(E,"context")]=T:(x=x.replace(E,"resources."+s+".value"),b(p[s])||(I[x]=p[s])));w=Object.keys(I),h=w.length;var R=C(i,o),A=[],j=this.uid,L=function(){var t=C(i,o);n.call(r,t,R,i.expression),R=t};for(c=0;c<h;++c)x=w[c],A.push(I[x].observe(x,{uid:j,listener:L}));return function(){for(var t=A.length,e=0;e<t;++e)A[e]()}},t.prototype.evaluateExpression=function(t,e){return Wo.TemplateControl.evaluateExpression(t,this.parent,e)},t.prototype.findProperty=function(e,n){var i,r=(t._parser||dt(Zt)).parse(e);for(b(n)&&(n=this);!b(n);){if(i=r.evaluate(n),!b(i))return{expresssion:r,control:n,value:i};n=n.parent}},t.prototype.dispatchEvent=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=t._EventManager||dt(Xt);o.hasDirection(n)||(C(n)||i.unshift(n),n=o.UP);var s=this;b(s.templateControl)||(s=s.templateControl),o.dispatch(e,s,n,i)},t.prototype.on=function(e,n){var i=t._EventManager||dt(Xt);return i.on(this.uid,e,n,this)},t.prototype.dispose=function(){},t.__eventListeners={},t}();t.Control=Ho,t.IControlFactory=xt,Pt.injectable(qt,xt,[Zt,ie,Xt,$t,be,Kt],Nr);var Qo=function(t){function e(){t.apply(this,arguments),this.templateControl=null}return __extends(e,t),e.dispose=function(t){$(t,"templateControl"),Ho.dispose(t)},e.getInstance=function(){return new e},e}(Ho);t.AttributeControl=Qo,t.IAttributeControlFactory=Et,Pt.injectable(Ht,Et,null,Nr);var Wo;!function(t){function n(t,e,n,i,r,o,s,a){return f._ResourcesFactory=t,f._BindableTemplatesFactory=e,f._managerCache=n,f._templateCache=i,f._parser=r,f._http=o,f._Promise=s,f._log=a,f}function i(){return S}function s(){return I}function u(t,e,n){R._ContextManager=t,R._regex=e,R._log=n;var i={},r={};return i[Kr]=i[to]=i[Gr]=i[Jr]=!0,r[Qr]=r[Wr]=r[Hr]=r[Yr]=r[Xr]=!0,R.__controlResources=i,R.__resourceTypes=r,R}function p(){return A.config}var f=function(t){function e(){t.apply(this,arguments),this.priority=100,this.context=null,this.absoluteContextPath=null,this.hasOwnContext=!1,this.replaceWith="any"}return __extends(e,t),e.evaluateExpression=function(t,n,i){if(v(t))return t;if(_(t))t=e._parser.parse(t);else if(!y(t.evaluate))return t;if(b(n))return t.evaluate(null,i);if(!(t.aliases.length>0&&(i=e.getResources(n,t.aliases,i),v(i))))return t.evaluate(n.context,i)},e.getResources=function(t,n,i){if(b(t))return{};var r,o,s,a=n.length,u=e.__resourceCache[t.uid];b(u)&&(u=e.__resourceCache[t.uid]={}),i=i||{};for(var c=0;c<a;++c)if(r=n[c],"@"===r[0]&&(r=r.slice(1)),r!==to)if(r!==Jr){if(b(i[r])){if(b(u[r]))s=e.findResource(t,r);else{var l=u[r].control,h=l.resources;s=b(h)?e.findResource(t,r):{control:l,resource:h[r]}}if(b(s)){if(t.type.indexOf(Ir)!==-1)continue;e._log.warn("Resource alias: "+r+" is not defined.")}else u[r]=s,o=s.resource,i[r]=b(o)?o:o.value}}else i[r]=Ho.getRootControl(t).context;else i[r]=t.context;return i},e.findResource=function(t,e){var n;if(!b(t)&&!b(t.resources)&&_(e)&&!v(e)){"@"===e[0]&&(e=e.slice(1));var i=e===Jr;if(i||e===to||e===Kr){if(i&&(t=Ho.getRootControl(t)),n=(t.resources||{})[e],b(n))return;return{resource:n,control:t}}for(;!b(t);){if(n=(t.resources||{})[e],!b(n))return{resource:n,control:t};t=t.parent}}},e.dispose=function(t){if(!b(t)){var n=t.uid,i=t.controls,r=i&&i.slice(0),o=Ho._ContextManager,s=o.defineProperty;if(!b(r))for(var a=r.length-1,u=a;u>=0;--u)Ho.dispose(r[u]);if(y(t.dispose)&&t.dispose(),Ho.removeEventListeners(t),e.removeElement(t),e._ResourcesFactory.dispose(t),e._BindableTemplatesFactory.dispose(t),$(e.__resourceCache,t.uid),o.dispose(t),qo.EventManager.dispose(t.uid),e._managerCache.remove(n),Ho.removeParent(t),s(t,$r,null,!0,!0,!0),t.attributes=null,t.bindableTemplates=null,t.controls=[],t.root=null,t.innerTemplate=null,t.__injectable__type===Er){var c=Eo[t.type];Pt.control(t.type,t.constructor,c.dependencies,!0)}}},e.loadControl=function(t){for(var n,i=t.controls,r=i.length,o=0;o<r;++o)n=i[o],b(n.controls)?n.loaded():e.loadControl(n);t.loaded()},e.contextChanged=function(t,n,i){t.context=n,e.setContextResources(t),y(t.contextChanged)&&t.contextChanged(n,i)},e.setContextResources=function(t){var n=t.context;return b(t.resources)&&(t.resources=e._ResourcesFactory.getInstance(),t.resources.initialize(t)),t.hasOwnContext&&(b(t.resources.rootContext)?t.resources.add({root:{type:Hr,value:n}}):t.resources.rootContext.value=n),b(t.resources.context)?void t.resources.add({context:{type:Hr,value:n}}):void(t.resources.context.value=n)},e.removeElement=function(t){if(!b(t)){var e,n=t.element;return null===t.replaceWith||""===t.replaceWith||h(n)?(rt(t.startNode,t.endNode),void(t.elementNodes=t.startNode=t.endNode=null)):void(b(n)||(e=n.parentNode,b(e)||e.removeChild(n),t.element=null))}},e.setAbsoluteContextPath=function(t,e){Ho._ContextManager.defineGetter(t,"absoluteContextPath",e,!1,!0)},e.determineTemplate=function(t,n){var i=e._templateCache,r=t.dom,o=e._Promise;if(b(n)){if(b(t.templateUrl)){if(b(t.templateString))return o.reject(null);var s=t.type;return i.read(s).catch(function(e){return b(e)&&(e=t.templateString),i.put(s,e)})}n=t.templateUrl}else;return r.getTemplate(n)},e.detach=function(t){if(!b(t)&&!b(t.controls)){for(var n=t.controls.slice(0),i=n.length,r=0;r<i;++r)Ho.dispose(n[r]);Ho.removeEventListeners(t),e.removeElement(t),e._ResourcesFactory.dispose(t,!0),$(e.__resourceCache,t.uid),Ho._ContextManager.dispose(t),qo.EventManager.dispose(t.uid),e._managerCache.remove(t.uid),Ho.removeParent(t),t.controls=[],t.attributes=null}},e.getInstance=function(){return new e},e.prototype.contextChanged=function(t,e){},e.prototype.setTemplate=function(){},e.prototype.getResources=function(t,n){return e.getResources(this,t,n)},e.prototype.findResource=function(t){return e.findResource(this,t)},e.prototype.evaluateExpression=function(t,n){return e.evaluateExpression(t,this,n)},e.__resourceCache={},e}(Ho);t.TemplateControl=f,t.ITemplateControlFactory=n,Pt.injectable(Ne,n,[we,ye,fe,de,Zt,zt,$t,Kt],Nr),Pt.injectable(ke,f,null,Tr);var w=function(t){function e(){t.apply(this,arguments),this.priority=120,this._listeners=[]}return __extends(e,t),e.prototype.onInput=function(t){var e=this._listeners;return e.push(t),function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},e.prototype.observeProperties=function(t){},e.prototype.inputChanged=function(t,e){if(t!==e)for(var n=this._listeners,i=n.length,r=0;r<i;++r)n[r](t,e)},e.prototype.dispose=function(){this._listeners=[]},e}(f);t.BindControl=w;var T=function(t){function e(){t.apply(this,arguments),this.hasOwnContext=!0}return __extends(e,t),e.dispose=function(t){f.dispose(t)},e.getInstance=function(){return new e},e.prototype.canNavigateFrom=function(){},e.prototype.canNavigateTo=function(t,e){},e.prototype.navigatingFrom=function(){},e.prototype.navigatedTo=function(t,e){},e}(f);t.ViewControl=T;var N=function(){function t(){this._domEvents=dt(Ce)}return t.prototype.addEventListener=function(t,e,n,i){return this._domEvents.addEventListener(t,e,n,i)},t.prototype.appendChildren=function(t,e){return W(t,e)},t.prototype.cloneChildren=function(t,e){return W(t,e,!0)},t.prototype.clearNode=function(t){return Y(t)},t.prototype.clearNodeBlock=function(t,e){return X(t,e)},t.prototype.setInnerHtml=function(t,e){return K(t,e)},t.prototype.insertBefore=function(t,e,n){return Z(t,e,n)},t.prototype.replace=function(t){return tt(t)},t.prototype.replaceWith=function(t,e){return et(t,e)},t.prototype.serializeHtml=function(t){return nt(t)},t.prototype.removeBetween=function(t,e){return it(t,e)},t.prototype.removeAll=function(t,e){return rt(t,e)},t.prototype.addClass=function(t,e){return at(t,e)},t.prototype.removeClass=function(t,e){return ut(t,e)},t.prototype.toggleClass=function(t,e){return ct(t,e)},t.prototype.replaceClass=function(t,e,n){return lt(t,e,n)},t.prototype.hasClass=function(t,e){return ht(t,e)},t.prototype.getTemplate=function(t){return pt(t)},t.prototype.whenPresent=function(t,e){return _t(t,e)},t.prototype.whenVisible=function(t,e){return ft(t,e)},t._inject={_domEvents:Ce},t}();t.Dom=N,Pt.injectable(be,N);var S=function(){function t(){this._ResourcesFactory=dt(we),this._ControlFactory=dt(qt),this._TemplateControlFactory=dt(Ne),this._ContextManager=dt(ie),this._Promise=dt($t),this._managerCache=dt(fe),this._document=dt(Qt),this._ElementManagerFactory=dt(ue),this._BindableTemplatesFactory=dt(ye),this._log=dt(Kt),this.templates={},this.cache={},this.__compiledControls=[]}return t.create=function(e,n){var i=new t;return i.control=e,b(n)||(i.templates=n.templates,i.cache=n.cache),i},t.dispose=function(t){if(!b(t)){var e=t.bindableTemplates;!b(e)&&y(e.dispose)&&e.dispose()}},t.isBoundControl=function(t){if(b(t))return!1;var e=t.parent;return!b(e)&&0===t.type.indexOf(e.type+Rr)},t.prototype.once=function(t,e,n){var i,r=this;if(b(t))return this._Promise.resolve(this._document.createDocumentFragment());if(_(t))i=nt(t);else if(h(t))i=t;else if(i=this._document.createDocumentFragment(),l(t))i.appendChild(t);else{if(!E(t))return this._Promise.resolve(i);W(t,i)}if(!(b(e)||g(e)||_(e)))return void this._log.warn(this.control.type+" cannot bind template with relativeIdentifier: "+e+". Identifier must be either a string or number");var o=this.control,s=this._managerCache.read(o.uid),a=this._ElementManagerFactory.getInstance(),u=this._createBoundControl("",i,e,n),c=this._createNodeMap(u,i,e);return o.controls.push(u),s.children=[],a.initialize(c,s),a.setUiControlTemplate(),a.fulfillAndLoad().then(function(){var t=r._document;return u.startNode=i.insertBefore(t.createComment(u.type+jr),i.firstChild),
u.endNode=i.insertBefore(t.createComment(u.type+Lr),null),i})},t.prototype.bind=function(t,e,n){return this._bind(t,e,n)},t.prototype.add=function(t,e,n){if(v(t))return void this._log.debug(this.control.type+" must use a valid key to add a template to BindableTemplates.");var i=this.templates[t];if((b(i)||n)&&!b(e)){if(_(e))return void this._compile(t,nt(e));if(h(e))return void this._compile(t,e);var r=this._document.createDocumentFragment();if(l(e))r.appendChild(e);else{if(!E(e))return;W(e,r)}this._compile(t,r)}},t.prototype.replace=function(e,n,i,r){var o=this.control.controls[e];if(!t.isBoundControl(o))return this._log.warn("The child control of "+this.control.type+" at the specified index: "+e+" is not a bound control and thus cannot be replaced by BindableTemplates."),this._Promise.resolve([]);var s=o.endNode;return l(s)&&l(s.parentNode)?this._bind(n,i,r,e):(this._log.warn("The child control of "+this.control.type+" at the specified index: "+e+" had either no placeholding comment nodes or its comment nodes had no parent and thus cannot be replaced by BindableTemplates."),this._Promise.resolve([]))},t.prototype.dispose=function(){for(var t=this._TemplateControlFactory.dispose,e=this.__compiledControls,n=e.length,i=0;i<n;++i)t(e[i]);this.__compiledControls=[],this.control=null,this.cache={},this.templates={}},t.prototype._bind=function(t,e,n,i){var r=this,o=this.templates[t],s=b(i);return b(o)?void this._log.error(new Error(this.control.type+" cannot bind template, no template stored with key: "+t)):b(e)||g(e)||_(e)?(o=o.then(function(i){var o=i.cloneNode(!0),a=r._createBoundControl(t,o,e,n),u=r._createNodeMap(a,o,e);return s&&r.control.controls.push(a),r._bindTemplate(t,u)}),s?o.then(null,function(t){return O(function(){_(t)&&(t=new Error(t)),r._log.error(t)}),r._document.createDocumentFragment()}):o.then(function(t){var e=Array.prototype.slice.call(t.childNodes),n=r.control.controls[i],o=n.endNode,s=o.parentNode,a=o.nextSibling;return r._TemplateControlFactory.dispose(n),s.insertBefore(t,a),e}).then(null,function(t){return O(function(){_(t)&&(t=new Error(t)),r._log.error(t)}),r._document.createDocumentFragment()})):void this._log.warn(this.control.type+" cannot bind template with relativeIdentifier: "+e+". Identifier must be either a string or number")},t.prototype._bindTemplate=function(t,n){var i=this,r=n.uiControlNode.control,o=!1,s=y(r.dispose)?r.dispose.bind(r):e;return r.dispose=function(){o=!0,s(),r.dispose=s},this._bindNodeMap(t,n).then(function(){var t=i._document,e=n.element;return o?t.createDocumentFragment():(r.startNode=e.insertBefore(t.createComment(r.type+jr),e.firstChild),r.endNode=e.insertBefore(t.createComment(r.type+Lr),null),e)},function(t){return O(function(){_(t)&&(t=new Error(t)),i._log.error(t)}),null})},t.prototype._bindNodeMap=function(t,e){var n=this.cache[t],i=e.uiControlNode.control,r=e.element,o=this._managerCache;return n.clone(r,o.read(this.control.uid),e),o.read(i.uid).bindAndLoad()},t.prototype._compile=function(t,e){var n=this._createBoundControl(t+Ir,e),i=this._createNodeMap(n,e);this.__compiledControls.push(n),this._compileNodeMap(n,i,t)},t.prototype._compileNodeMap=function(t,e,n){var i=this,r=this._ElementManagerFactory.getInstance(),o=[];r.isClone=!0,r.initialize(e,null),r.setUiControlTemplate(),this.cache[n]=r,o.push(r.fulfillTemplate()),this.templates[n]=this._Promise.all(o).then(function(){var n=e.element,r=n.cloneNode(!0),o=i._document,s=t.startNode=o.createComment(t.type+jr),a=t.endNode=o.createComment(t.type+Lr);return n.insertBefore(s,n.firstChild),n.insertBefore(a,null),r})},t.prototype._createNodeMap=function(t,e,n){return{element:e,attributes:{},nodes:[],childContext:n,uiControlNode:{control:t,nodeName:t.type,expressions:[],injector:null}}},t.prototype._createBoundControl=function(t,e,n,i){var r=this._TemplateControlFactory,o=r.getInstance(),s=this._ResourcesFactory,u=this.control,c=this.cache[t],l=a(c),h=s.getInstance();if(l){var p=c.getUiControl();h.initialize(o,p.resources),h.add(i)}else h.initialize(o,i);if(o.resources=h,s.addControlResources(o),o.bindableTemplates=this._BindableTemplatesFactory.create(o,u.bindableTemplates),o.parent=u,o.controls=[],o.element=e,o.type=u.type+Rr+t,o.root=this._ControlFactory.getRootControl(o),l){var _=this._ContextManager.getManager(o.root);o.absoluteContextPath=u.absoluteContextPath||Ft,b(n)||(o.absoluteContextPath+="."+n),o.context=_.getContext(o.absoluteContextPath.split("."),!1)}return o},t}();t.BindableTemplates=S,t.IBindableTemplatesFactory=i,Pt.injectable(ye,i,null,Nr);var I=function(){function t(){this.__listeners={}}return t.getInstance=function(){return new t},t.prototype.initialize=function(t,e){this.__control=t;for(var n,i=Object.keys(e),r=this.__listeners,o=i.length,s=0;s<o;++s)n=i[s],this[n]=e[n],r[n]=[]},t.prototype.observe=function(t,n){var i=this.__listeners[B(n)];return b(i)?e:(t=t.bind(this.__control),i.push(t),function(){var e=i.indexOf(t);e!==-1&&i.splice(e,1)})},t.prototype._attributeChanged=function(t,e,n){for(var i=this.__listeners[B(t)],r=i.length,o=0;o<r;++o)i[o](e,n)},t}();t.Attributes=I,t.IAttributesFactory=s,Pt.injectable(ge,I,null,Tr),Pt.injectable(me,s,null,Nr);var R=function(){function t(){this.__resources={},this.__bound=!1}return t.create=function(n,i){if(b(i))return i;var r;switch(i.type.toLowerCase()){case Qr:var o=No[i.value];b(o)||(i.value=o.inject());break;case Hr:t._observeResource(n,i);break;case Wr:r=i.value,_(r)&&(i.value=n.evaluateExpression(r));break;case Xr:break;case Yr:r=i.value,_(r)&&(r=n[r],y(r)?i.value=r.bind(n):(t._log.warn('Attempted to create a "function" type Resource, but the function '+r+"cannot be found on your control."),i.value=e))}return i},t.addControlResources=function(e){e.resources.add({context:{value:e.context,type:Hr},control:{value:e,type:Wr}}),e.hasOwnContext&&t.__addRoot(e)},t.bindResources=function(e){var n=e.__resources;if(!b(n)){for(var i,r=e.__controlInstance,o=Object.keys(n),s=t.__controlResources,a=o.length,u=0;u<a;++u)i=o[u],s[i]!==!0&&(e[i]=n[i]=t.create(r,e[i]));e.__bound=!0}},t.dispose=function(e,n){var i=e.resources;if(!b(i)){for(var r,s,a=Object.keys(i.__resources),u=a.length,c=t._ContextManager.defineProperty,l=0;l<u;++l)r=a[l],s=i[r],b(s)||s.type!==Hr&&s.type!==Xr||c(i,r,n?o(s,!0):null,!0,!0,!0);t._removeListeners(i.__controlInstance)}},t.parseElement=function(e){for(var n,i,r,o,s,a,u=Array.prototype.slice.call(e.children),c=t._regex,l=c.whiteSpaceRegex,h=c.quotationRegex,p={},_=t.__resourceTypes;u.length>0;)n=u.pop(),s=n.nodeName.toLowerCase(),_[s]&&(r=n.attributes,i={},o=r.getNamedItem(Vr),b(o)||(i.alias=o.value,a=n.textContent.replace(l,"$1"),v(a)||(i.value=s===Qr||s===Xr?a.replace(h,""):a,i.type=s,p[i.alias]=i)));return p},t.getInstance=function(){return new t},t._observeResource=function(e,n){var i=n.value,r=e.uid,o=t.__observableResourceRemoveListeners[r];if(b(o)&&(o=t.__observableResourceRemoveListeners[r]=[]),_(i)){b(n.initialValue)?n.initialValue=i:i=n.initialValue;var s=e.observeExpression(function(t){n.value=t},i);n.value=e.evaluateExpression(i),o.push(s)}},t._removeListeners=function(e){if(!b(e)){var n=e.uid,i=t.__observableResourceRemoveListeners[n];if(x(i))for(var r=i.length,o=0;o<r;++o)i[o]();$(t.__observableResourceRemoveListeners,n)}},t.__addRoot=function(t){t.resources.add({root:{value:t,type:Wr,alias:Gr},rootContext:{value:t.context,type:Hr,alias:Jr}})},t.prototype.initialize=function(e,n){if(this.__controlInstance=e,!b(n)){l(n)?n=t.parseElement(n):a(n.resources)&&(n=n.resources),this.__resources=n;for(var i,r=Object.keys(n),o=r.length,s=0;s<o;++s)i=r[s],this[i]=n[i]}},t.prototype.add=function(e){if(!b(e)){l(e)&&(e=t.parseElement(e));for(var n,i,r=Object.keys(e),o=r.length,s=this.__controlInstance,a=this.__bound,u=t.create,c=0;c<o;++c)i=r[c],n=e[i],n.alias=i,this[i]=this.__resources[i]=a?u(s,n):n}},t.INJECTABLE=Qr,t.OBJECT=Wr,t.OBSERVABLE=Hr,t.LITERAL=Xr,t.FUNCTION=Yr,t.__observableResourceRemoveListeners={},t}();t.Resources=R,t.IResourcesFactory=u,Pt.injectable(we,u,[ie,te,Kt],Nr),Pt.injectable(Te,R,null,Tr);var A=function(){function t(){this._gestures=t.gestures,this._androidVersion=C(this._compat.ANDROID)?-1:this._compat.ANDROID,this._android44orBelow=this._androidVersion>-1&&Math.floor(this._androidVersion/10)<=44,this._inMouse=!1,this._subscribers={},this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__hasMoved=!1,this.__hasRelease=!1,this.__detectingMove=!1,this.__tapCount=0,this.__touchCount=0,this.__cancelDeferredTap=e,this.__cancelDeferredHold=e,this.__cancelRegex=/cancel/i,this.__pointerEndRegex=/up|cancel/i,this.__haveSwipeSubscribers=!1,this.__blurRemover=e,this.__ignoreEvent={mousedown:!1,mouseup:!1},this.__boundPreventDefaultClick=this.__preventDefaultClick.bind(this),this.__reverseMap={},this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this.__pointerHash={},this.__pointerEvents=[],this.__listeners={},this.__getTypes(),this.initialize()}return t.prototype.addEventListener=function(t,e,n,i){var r=this,o=this._compat,s=o.mappedEvents,a=s[e],u=!b(a),c=this.__mappedCount,l=this._gestures,h=!1;if(u&&(this.__reverseMap[a]=e,this.__registerElement(t,e),c[e]++,o.hasTouchEvents&&!this.__cancelRegex.test(a)&&(a=a.replace("touch","mouse").replace("start","down").replace("end","up"),this.__reverseMap[a]=e)),t.addEventListener(e,n,i),!C(t["on"+e])||C(l[e])||u)return function(){h||(u&&(c[e]>0&&c[e]--,r.__unregisterElement(t,e)),h=!0,t.removeEventListener(e,n,i))};var p=l.$swipe,_=l.$track,f=e;if(e.indexOf(_)!==-1){var d=l.$trackend;f=e===d?d:_}else e.indexOf(p)!==-1&&(f=p);return this._gestureCount[f]++,this.__registerElement(t,e),function(){h||(h=!0,r.__removeEventListener(t,e,n,i))}},t.prototype.initialize=function(){var t=this._isActive;t!==!0&&(this.__registerTypes(),b(t)&&this.__appendGestureStyle(),this._isActive=!0)},t.prototype.dispose=function(){this.__unregisterTypes(),this.__blurRemover(),this.__blurRemover=e,this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this._isActive=!1,this._subscribers={},this.__pointerEvents=[],this.__pointerHash={},this.__reverseMap={},this.__ignoreEvent={mousedown:!1,mouseup:!1},this.__tapCount=this.__touchCount=0,this.__detectingMove=this.__hasMoved=this.__hasRelease=this.__haveSwipeSubscribers=!1,this.__lastMoveEvent=this.__lastTouchDown=this.__lastTouchUp=null,this.__swipeOrigin=this.__capturedTarget=this.__focusedElement=this.__delayedClickRemover=null,this.__cancelDeferredHold=this.__cancelDeferredTap=e},t.prototype._onTouchStart=function(n){var i=this,r=n.type;if(this.__ignoreEvent[r])return this.__ignoreEvent[r]=!1,this.__delayedClickRemover[r](),n.target===this.__focusedElement||(n.cancelable===!0&&n.preventDefault(),!1);if(this.__touchCount++>0)return!0;if("mousedown"!==r)this._inTouch=!0;else{if(this._inTouch===!0)return n.preventDefault(),!1;this._compat.hasTouchEvents&&(this._inMouse=!0)}if(n=this.__standardizeEventObject(n),b(n))return!0;this.__lastMoveEvent=null,this.__hasMoved=!1;var o=n.clientX,s=n.clientY,a=n.timeStamp,u=n.target,c=this._gestures;this.__lastTouchDown={_buttons:n._buttons,clientX:o,clientY:s,timeStamp:a,target:u,identifier:n.identifier},this.__swipeOrigin={clientX:o,clientY:s,xTimestamp:a,yTimestamp:a,xTarget:u,yTarget:u},this._android44orBelow&&(this.__haveSwipeSubscribers=this.__findFirstSubscribers(u,[c.$swipe,c.$swipedown,c.$swipeleft,c.$swiperight,c.$swipeup]).length>0);var l=this._gestureCount,h=l.$hold<=0,p=l.$release<=0;if(h&&p)return this.__handleMappedEvents(r,n,n),this.__registerMove(r),!0;var _,f,d,v=t.config.intervals.holdInterval;return h?(this.__hasRelease=!1,this.__cancelDeferredHold=F(function(){i.__hasRelease=!0},v),this.__handleMappedEvents(r,n,n),this.__registerMove(r),!0):(p?(_=this.__findFirstSubscriber(n.target,this._gestures.$hold),(d=!b(_))&&(f=function(){_.trigger(n),i.__cancelDeferredHold=e})):(this.__hasRelease=!1,_=this.__findFirstSubscriber(n.target,this._gestures.$hold),(d=!b(_))&&(f=function(){_.trigger(n),i.__hasRelease=!0,i.__cancelDeferredHold=e})),d&&(this.__cancelDeferredHold=F(f,v)),this.__handleMappedEvents(r,n,n),void this.__registerMove(r))},t.prototype._onTouchMove=function(n){this.__cancelDeferredHold(),this.__cancelDeferredHold=e;var i=n.type;if(this._inTouch===!0&&"mousemove"===i)return!0;var r=this.__standardizeEventObject(n);if(b(r))return!0;var o=this._gestureCount,s=o.$track<=0,a=o.$swipe<=0,u=t.config,c=this.__swipeOrigin,l=r.clientX,h=r.clientY,p=this.__hasMoved||this.__getDistance(c.clientX,l,c.clientY,h)>=u.distances.minScrollDistance;if(!p)return this.__handleMappedEvents(i,n,r),!0;if(this.__hasMoved=!0,s&&a)return this.__handleMappedEvents(i,n,r),!0;var _=this.__lastMoveEvent||c,f=r.direction=this.__getDirection(l-_.clientX,h-_.clientY);this.__handleOriginChange(f);var d=Math.abs(l-c.clientX),v=Math.abs(h-c.clientY);r.velocity=this.__getVelocity(d,v,r.timeStamp-c.xTimestamp,r.timeStamp-c.yTimestamp),!a&&this._android44orBelow&&this.__haveSwipeSubscribers&&n.preventDefault(),s||this.__handleTrack(r,n),this.__handleMappedEvents(i,n,r),this.__lastMoveEvent=r},t.prototype._onTouchEnd=function(e){var n=this,i=e.type;if(this.__ignoreEvent[i])return this.__ignoreEvent[i]=!1,this.__delayedClickRemover[i](),e.target===this.__focusedElement||(e.cancelable===!0&&e.preventDefault(),O(function(){var t=(n.__lastTouchUp||{}).target;n._document.body.contains(t)&&n.__handleInput(t)}),!1);var r=this.__hasMoved,o="mouseup"!==i;if(o){if("touchend"===i){if(r)e.cancelable===!0&&e.preventDefault();else{if(this._inTouch!==!0)return e.cancelable===!0&&e.preventDefault(),this.__preventClickFromTouch(),this.__touchCount=0,!0;e.target!==this.__focusedElement&&this.__handleInput(e.target)&&e.cancelable===!0&&e.preventDefault()}this.__preventClickFromTouch()}}else if(!C(this._inTouch)){if(!this._inMouse)return e.cancelable===!0&&e.preventDefault(),!1;this._inMouse=!1}if(this.__cancelRegex.test(i))return this.__handleCanceled(e),!0;if(this.__touchCount<=0?this.__touchCount=0:this.__touchCount--,e=this.__standardizeEventObject(e),b(e))return!0;o&&(this._inTouch=!1),this.__touchCount>0&&(this.__touchCount=e._touches.length),this.__clearTempStates(),this.__hasRelease&&this.__handleRelease(e),this.__handleSwipe();var s=t.config,a=s.intervals,u=e.timeStamp,c=this.__lastTouchDown;if(r)return this.__handleTrackEnd(e),this.__handleMappedEvents(i,e,e),this.__tapCount=0,this.__capturedTarget=null,!0;if(b(c)||u-c.timeStamp>a.tapInterval)return this.__handleMappedEvents(i,e,e),this.__tapCount=0,this.__capturedTarget=null,!0;var l=this.__lastTouchUp,h=e.clientX,p=e.clientY;this.__tapCount>0&&this.__getDistance(h,l.clientX,p,l.clientY)<=s.distances.maxDblTapDistance&&u-l.timeStamp<=a.dblTapInterval?this.__handleDbltap(e):this.__tapCount=0,this.__handleTap(e),this.__handleMappedEvents(i,e,e),this.__lastTouchUp=e,this.__capturedTarget=null},t.prototype.__clearTempStates=function(){this.__cancelDeferredHold(),this.__cancelDeferredHold=e,this.__detectingMove&&(this.__unregisterType(this._moveEvents),this.__detectingMove=!1)},t.prototype.__resetTouchEnd=function(){this.__tapCount=this.__touchCount=0,this._inTouch=this.__hasRelease=!1,this.__pointerHash={},this.__pointerEvents=[],this.__capturedTarget=null},t.prototype.__handleCanceled=function(t){var e=t.touches||this.__pointerEvents,n=this.__getTouchIndex(e),i=t.type;t=n>=0?e[n]:this.__standardizeEventObject(t),this._inTouch=!1,this.__clearTempStates(),this.__hasMoved&&(this._android44orBelow&&this.__handleSwipe(),this.__handleTrackEnd(t)),this.__handleMappedEvents(i,t,t),this.__resetTouchEnd()},t.prototype.__handleMappedEvents=function(t,e,n){var i=this.__reverseMap[t];if(this.__mappedCount[i]>0){var r=this.__findFirstSubscriber(e.target,i);b(r)||r.trigger(n)}},t.prototype.__handleTap=function(n){var i=this;if(this.__tapCount++,!(this._gestureCount.$tap<=0)){var r=this._gestures,o=this.__findFirstSubscriber(n.target,r.$tap);if(!b(o))return t.config.intervals.dblTapZoomDelay<=0||"mouse"===n.pointerType||"mouseup"===n.type?(n._buttons=this.__lastTouchDown._buttons,void o.trigger(n)):void(this.__cancelDeferredTap=F(function(){n._buttons=i.__lastTouchDown._buttons,o.trigger(n),i.__tapCount=0,i.__cancelDeferredTap=e},t.config.intervals.dblTapZoomDelay))}},t.prototype.__handleDbltap=function(t){if(this.__tapCount=0,this.__cancelDeferredTap(),this.__cancelDeferredTap=e,!(this._gestureCount.$dbltap<=0)){var n=this.__findFirstSubscriber(t.target,this._gestures.$dbltap);b(n)||(t._buttons=this.__lastTouchDown._buttons,n.trigger(t),this.__tapCount=-1)}},t.prototype.__handleRelease=function(t){var e=this.__findFirstSubscriber(t.target,this._gestures.$release);b(e)||e.trigger(t),this.__hasRelease=!1},t.prototype.__handleSwipe=function(){if(!(this._gestureCount.$swipe<=0)){var t=this.__lastMoveEvent;if(!b(t)){for(var e=this.__swipeOrigin,n=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY),r=this.__getRegisteredSwipes(t.direction,t.velocity,n,i);r.length>0;)r.pop().trigger(t);this.__lastMoveEvent=null}}},t.prototype.__handleTrack=function(t,e){var n=this._gestures,i=n.$track,r=t.direction,o=this.__capturedTarget||t.target,s=this.__findFirstSubscribers(o,[i,i+r.x,i+r.y]);if(this._android44orBelow){var a=this.__findFirstSubscribers(o,[i,n.$trackdown,n.$trackup,n.$trackleft,n.$trackright,n.$trackend]);a.length>0&&e.preventDefault()}if(s.length>0)for(this._androidVersion>-1&&e.preventDefault();s.length>0;)s.pop().trigger(t)},t.prototype.__handleTrackEnd=function(t){if(!(this._gestureCount.$trackend<=0)){var e=this.__capturedTarget||t.target,n=this.__findFirstSubscriber(e,this._gestures.$trackend);b(n)||n.trigger(t)}},t.prototype.__getTypes=function(){var t,e,n,i=this._compat,r=i.mappedEvents,o=this.__listeners;if(i.hasPointerEvents)t=this._startEvents=r.$touchstart,e=this._moveEvents=r.$touchmove,n=this._endEvents=r.$touchend+" "+r.$touchcancel;else if(i.hasTouchEvents)t=this._startEvents=r.$touchstart+" mousedown",e=this._moveEvents=r.$touchmove+" mousemove",n=this._endEvents=r.$touchend+" mouseup "+r.$touchcancel;else{var s=r.$touchcancel;t=this._startEvents=r.$touchstart,e=this._moveEvents=r.$touchmove,n=this._endEvents=r.$touchend+(s?" "+s:"")}o[t]=this._onTouchStart.bind(this),o[e]=this._onTouchMove.bind(this),o[n]=this._onTouchEnd.bind(this)},t.prototype.__registerTypes=function(){this.__registerType(this._startEvents),this.__registerType(this._endEvents),this._document.addEventListener("dragstart",this.__preventDefault,!1)},t.prototype.__unregisterTypes=function(){this.__unregisterType(this._startEvents),this.__unregisterType(this._endEvents),this.__detectingMove&&(this.__unregisterType(this._moveEvents),this.__detectingMove=!1),this._document.removeEventListener("dragstart",this.__preventDefault,!1)},t.prototype.__registerType=function(t){for(var e=this.__listeners[t],n=this._document,i=t.split(" "),r=i.length;r-- >0;)n.addEventListener(i[r],e,!1)},t.prototype.__unregisterType=function(t){for(var e=this.__listeners[t],n=this._document,i=t.split(" "),r=i.length;r-- >0;)n.removeEventListener(i[r],e,!1)},t.prototype.__registerMove=function(t){var e=this._gestureCount;("touchstart"===t||this.__mappedCount.$touchmove>0||e.$track>0||e.$trackend>0||e.$swipe>0)&&(this.__registerType(this._moveEvents),this.__detectingMove=!0)},t.prototype.__registerElement=function(e,n){var i,r=e.__plat;b(r)?(i=z("domEvent_"),e.__plat=r={domEvent:i}):b(r.domEvent)&&(i=z("domEvent_"),r.domEvent=i);var o;if(b(i)){var s=this._subscribers[r.domEvent];return C(s[n])?(o=new P(e,n),s[n]=o):s[n].count++,void s.gestureCount++}var a={gestureCount:1};o=new P(e,n),a[n]=o,this._subscribers[i]=a,C(e.className)||at(e,t.config.styleConfig[0].className),this.__removeSelections(e)},t.prototype.__unregisterElement=function(t,e){var n=t.__plat;if(!b(n)&&!b(n.domEvent)){var i=n.domEvent,r=this._subscribers[i],o=r[e];b(o)||(o.count--,0===o.count&&$(r,e),r.gestureCount--,0===r.gestureCount&&($(this._subscribers,i),this.__removeElement(t)))}},t.prototype.__setTouchPoint=function(t){var e=t.type,n=this._compat;return n.hasPointerEvents||n.hasMsPointerEvents?void this.__updatePointers(t,this.__pointerEndRegex.test(e)):void(t.pointerType=e.indexOf("mouse")===-1?"touch":"mouse")},t.prototype.__setCapture=function(t){b(this.__capturedTarget)&&!c(t)&&(this.__capturedTarget=t)},t.prototype.__updatePointers=function(t,e){var n,i=t.pointerId,r=this.__pointerHash,o=r[i];if(e)C(o)||(n=this.__pointerEvents.indexOf(o),n>-1&&this.__pointerEvents.splice(n,1),$(this.__pointerHash,i));else{if(1===i&&!v(r))return;t.identifier=t.pointerId,C(o)||(n=this.__pointerEvents.indexOf(o))<0?this.__pointerEvents.push(t):this.__pointerEvents.splice(n,1,t),r[i]=t}},t.prototype.__findFirstSubscriber=function(t,e){if(!b(t)){var n,i,r;do if(n=t.__plat,!C(n)&&!C(n.domEvent)&&(i=this._subscribers[n.domEvent],r=i[e],!C(r)))return r;while(!b(t=t.parentNode))}},t.prototype.__findFirstSubscribers=function(t,e){if(b(t))return[];var n,i,r,o,s,a=[];do if(n=t.__plat,!C(n)&&!C(n.domEvent))for(i=this._subscribers[n.domEvent],r=Object.keys(i);r.length>0;)o=r.pop(),s=e.indexOf(o),s!==-1&&(a.push(i[o]),e.splice(s,1));while(e.length>0&&!b(t=t.parentNode));return a},t.prototype.__removeEventListener=function(t,e,n,i){var r=this._gestures;t.removeEventListener(e,n,i);var o=r.$swipe,s=r.$track,a=e;if(e.indexOf(s)!==-1){var u=r.$trackend;a=e===u?u:s}else e.indexOf(o)!==-1&&(a=o);this._gestureCount[a]--,this.__unregisterElement(t,e)},t.prototype.__removeElement=function(e){this.__returnSelections(e),C(e.className)||ut(e,t.config.styleConfig[0].className);var n=e.__plat;$(n,"domEvent"),v(n)&&$(e,"__plat")},t.prototype.__standardizeEventObject=function(t){this.__setTouchPoint(t);var e,n=this._startEvents.indexOf(t.type)!==-1,i=t.touches||this.__pointerEvents,r=t.changedTouches,o=!C(r),s=t.timeStamp;if(o)if(n)e=t.preventDefault.bind(t),t=r[0],t.preventDefault=e;else{var a=this.__getTouchIndex(r);if(a>=0)e=t.preventDefault.bind(t),t=r[a],t.preventDefault=e;else if(this.__getTouchIndex(i)>=0)return null}return n&&this.__setCapture(t.target),this.__normalizeButtons(t),t._touches=i,t.offset=this.__getOffset(t),(C(t.timeStamp)||s>t.timeStamp)&&(t.timeStamp=s),t},t.prototype.__normalizeButtons=function(t){var e;if(g(t.buttons)&&0!==t.buttons)e=t.buttons;else if(g(t.which)&&t.which>0)e=t.which;else switch(t.button){case-1:e=0;break;case 0:e=1;break;case 1:e=4;break;case 2:e=2;break;case 3:e=8;break;case 4:e=16;break;default:e=1}t._buttons=e},t.prototype.__getTouchIndex=function(t){for(var e=(this.__lastTouchDown||{}).identifier,n=t.length,i=0;i<n;++i)if(t[i].identifier===e)return i;return-1},t.prototype.__getOffset=function(t){var e=this.__capturedTarget||t.target;if(c(e))return{x:t.clientX,y:t.clientY};if(!C(t.offsetX)&&!C(t.offsetY)&&e===t.target)return{x:t.offsetX,y:t.offsetY};var n,i;if(y(e.getBoundingClientRect)){var r=e.getBoundingClientRect();n=r.left,i=r.top}else for(n=e.offsetLeft,i=e.offsetTop;!b(e=e.offsetParent);)n+=e.offsetLeft,i+=e.offsetTop;return{x:t.clientX-n,y:t.clientY-i}},t.prototype.__getDistance=function(t,e,n,i){var r=e-t,o=i-n;return Math.sqrt(r*r+o*o)},t.prototype.__getVelocity=function(t,e,n,i){var r=0,o=0;return n>0&&(r=t/n||0),i>0&&(o=e/i||0),{x:r,y:o}},t.prototype.__getDirection=function(t,e){var n=Math.abs(t),i=Math.abs(e),r=(this.__lastMoveEvent||{}).direction||{},o=0===t?r.x||"none":t<0?"left":"right",s=0===e?r.y||"none":e<0?"up":"down";return{x:o,y:s,primary:n===i?r.primary||"none":n>i?o:s}},t.prototype.__handleOriginChange=function(t){var e=this.__lastMoveEvent;if(!b(e)){var n=e.direction,i=n.x===t.x,r=n.y===t.y;if(!i||!r){var o=this.__swipeOrigin,s=this._gestures,a=[s.$swipe,s.$swipedown,s.$swipeleft,s.$swiperight,s.$swipeup];i||(o.clientX=e.clientX,o.xTimestamp=e.timeStamp,o.xTarget=e.target,this._android44orBelow&&(this.__haveSwipeSubscribers=this.__findFirstSubscribers(o.xTarget,a).length>0)),r||(o.clientY=e.clientY,o.yTimestamp=e.timeStamp,o.yTarget=e.target,this._android44orBelow&&(this.__haveSwipeSubscribers=this.__findFirstSubscribers(o.yTarget,a).length>0))}}},t.prototype.__getRegisteredSwipes=function(e,n,i,r){var o,s=this._gestures.$swipe,a=t.config.velocities.minSwipeVelocity,u=[s],c=this.__swipeOrigin||{};return i>r?(o=c.xTarget,n.x>=a&&u.push(s+e.x)):r>i&&(o=c.yTarget,n.y>=a&&u.push(s+e.y)),this.__findFirstSubscribers(o,u)},t.prototype.__isHorizontal=function(t){return"left"===t||"right"===t},t.prototype.__appendGestureStyle=function(){var e,n,i=this._document;if(!this._compat.platCss)if(!b(i.styleSheets)&&i.styleSheets.length>0){var r=i.styleSheets[0];for(e=t.config.styleConfig,n=e.length;n-- >0;)r.insertRule(this.__createStyle(e[n]),0)}else{var o=i.head,s=i.createElement("style"),a="";for(s.type="text/css",e=t.config.styleConfig,n=e.length;n-- >0;)a=this.__createStyle(e[n])+a;s.textContent=a,o.appendChild(s)}},t.prototype.__createStyle=function(t){var e=t.styles||[],n=e.length,i="."+t.className+" { ",r="";n=e.length;for(var o=0;o<n;++o)r+=e[o]+";";return i+=r+" } "},t.prototype.__blurFocusedElement=function(){var t=this.__focusedElement||{};y(t.blur)&&t.blur()},t.prototype.__waitForBlur=function(t){var n=this;this.__blurRemover=this.addEventListener(t,"blur",function(){n.__blurRemover(),n.__blurRemover=e,t===n.__focusedElement&&(n.__focusedElement=null)},!1)},t.prototype.__clickTarget=function(t){var e=this,n=!1,i=function(){n=!0,t.removeEventListener("click",i,!1)};t.addEventListener("click",i,!1),O(function(){n||(t.removeEventListener("click",i,!1),e._document.body.contains(t)&&y(t.click)&&t.click())})},t.prototype.__handleInput=function(t){this.__blurRemover();var e=t.nodeName;if(!_(e))return this.__focusedElement=null,void this.__blurFocusedElement();var n=!0;switch(e.toLowerCase()){case"input":switch(t.type){case"range":this.__blurFocusedElement();break;case"text":case"password":case"email":case"number":case"tel":case"search":case"url":t.focus(),this.__waitForBlur(t);break;default:this.__blurFocusedElement(),this.__clickTarget(t)}break;case"a":case"button":case"label":this.__blurFocusedElement(),this.__clickTarget(t);break;case"textarea":t.focus(),this.__waitForBlur(t);break;case"select":n=!1;break;default:this.__blurFocusedElement(),this.__clickTarget(t)}return this.__focusedElement=t,n},t.prototype.__preventClickFromTouch=function(){var e=this._document,n=this.__ignoreEvent,i=this.__boundPreventDefaultClick,r=t.config.intervals.delayedClickInterval;r<=0||(this.__delayedClickRemover={mousedown:F(function(){n.mousedown=!1},r),mouseup:F(function(){n.mouseup=!1},r),click:F(function(){e.removeEventListener("click",i,!0)},r)},n.mousedown=n.mouseup=!0,O(function(){e.addEventListener("click",i,!0)}))},t.prototype.__preventDefaultClick=function(t){return t.preventDefault(),t.stopImmediatePropagation(),this._document.removeEventListener("click",this.__boundPreventDefaultClick,!0),this.__delayedClickRemover.click(),!1},t.prototype.__removeSelections=function(t){l(t)&&(C(t.onselectstart)||t.addEventListener("selectstart",this.__preventDefault,!1),C(t.ondragstart)||t.addEventListener("dragstart",this.__preventDefault,!1))},t.prototype.__returnSelections=function(t){l(t)&&(C(t.onselectstart)||t.removeEventListener("selectstart",this.__preventDefault,!1),C(t.ondragstart)||t.removeEventListener("dragstart",this.__preventDefault,!1))},t.prototype.__preventDefault=function(t){var e=t.target.nodeName;return _(e)&&(e=e.toLowerCase()),"input"===e||"textarea"===e||(t.preventDefault(),!1)},t._inject={_document:Qt,_compat:Vt},t.config={intervals:{tapInterval:300,dblTapInterval:300,holdInterval:400,dblTapZoomDelay:0,delayedClickInterval:400},distances:{minScrollDistance:3,maxDblTapDistance:10},velocities:{minSwipeVelocity:.645},styleConfig:[{className:"plat-gesture",styles:["-moz-user-select: none","-khtml-user-select: none","-webkit-touch-callout: none","-webkit-user-select: none","-webkit-user-drag: none","-webkit-tap-highlight-color: transparent","-webkit-overflow-scrolling: touch","-ms-user-select: none","-ms-touch-action: manipulation","touch-action: manipulation"]},{className:"plat-no-touch-action",styles:["-ms-touch-action: none","touch-action: none"]}]},t.gestures={$tap:Xi,$dbltap:Gi,$hold:er,$release:nr,$swipe:ir,$swipeleft:rr,$swiperight:or,$swipeup:sr,$swipedown:ar,$track:ur,$trackleft:cr,$trackright:lr,$trackup:hr,$trackdown:pr,$trackend:_r},t}();t.DomEvents=A,Pt.injectable(Ce,A),t.IDomEventsConfig=p,Pt.injectable(xe,p);var j=function(){function t(){this._document=dt(Qt)}return t.prototype.initialize=function(t,e,n){this.element=t,this.event=e,this.eventType=_(n)?n:"CustomEvent"},t.prototype.trigger=function(t,e,n){var i=this._document.createEvent(this.eventType);return a(t)&&r(!1,!1,i,t),i.initCustomEvent(this.event,!0,!0,b(e)?0:e),(n||this.element).dispatchEvent(i)},t}();t.DomEvent=j,Pt.injectable(Ee,j,null,Tr);var L,P=function(t){function e(e,n){t.call(this),this.count=0,this.element=e,this.event=n,this.count++}return __extends(e,t),e.prototype.trigger=function(t){var e=this._document.createEvent("CustomEvent"),n=this.element,i=t.target;this.__extendEventObject(e,t),e.initCustomEvent(this.event,!0,!0,0);var r=c(n)||n.contains(i)?i.dispatchEvent(e):n.dispatchEvent(e);return r||t.preventDefault(),r},e.prototype.__extendEventObject=function(t,e){var n=e.pointerType;t.clientX=e.clientX,t.clientY=e.clientY,t.offsetX=e.offset.x,t.offsetY=e.offset.y,t.direction=e.direction||{x:"none",y:"none",primary:"none"},t.touches=e._touches,t.velocity=e.velocity||{x:0,y:0},t.identifier=e.identifier||0,t.pointerType=g(n)?this.__convertPointerType(n,e.type):n,t.screenX=e.screenX,t.screenY=e.screenY,t.pageX=e.pageX,t.pageY=e.pageY,t.buttons=e._buttons},e.prototype.__convertPointerType=function(t,e){switch(t){case MSPointerEvent.MSPOINTER_TYPE_MOUSE:return"mouse";case MSPointerEvent.MSPOINTER_TYPE_PEN:return"pen";case MSPointerEvent.MSPOINTER_TYPE_TOUCH:return"touch"}return e.indexOf("mouse")===-1?"touch":"mouse"},e}(j);!function(t){var n=function(){function t(){this._animatedElements={}}return t.prototype.create=function(t,e,n){return this._create(t,e,n,{key:null})},t.prototype.animate=function(t,e,n){return this._animate(t,e,n,{key:null})},t.prototype.enter=function(t,e,n,i,r){return this._animate(t,e,r,{key:"enter",parent:n,refChild:i})},t.prototype.leave=function(t,e,n){return this._animate(t,e,n,{key:"leave"})},t.prototype.move=function(t,e,n,i,r){return this._animate(t,e,r,{key:"move",parent:n,refChild:i})},t.prototype.show=function(t,e,n){return this._animate(t,e,n,{key:"show"})},t.prototype.hide=function(t,e,n){return this._animate(t,e,n,{key:"hide"})},t.prototype.all=function(t){for(var n=this,r=t.length,o=[],s=new i(function(e){n._Promise.all(t).then(function(){e()})}),a=0;a<r;++a)o=o.concat(t[a].getInstances());return s.initialize(o),s.then(e)},t.prototype.resolve=function(){var t=new i(function(e){e(function(){return t})});return t},t.prototype._animate=function(t,e,n,i){var r=this._create(t,e,n,i),o=r.current;return r.previous.then(function(){D(function(){o.start()})}),o},t.prototype._create=function(t,n,r,o){var s,a=this,u=Io[n],c=[],l=[];if((!this._compat.animationSupported||C(u))&&(u=Ro[n],C(u)))return t=this.__constructAnimatableElements(t,{inject:e},l,c),this._handlePreInitFunctionality(t,l,o),this._handlePostInitFunctionality(t,l,o),this._handleEndFunctionality(t,l,o),s=this.resolve(),{previous:s,current:s};t=this.__constructAnimatableElements(t,u,l,c);var h=l.length;if(0===h)return this._handlePreInitFunctionality(t,l,o),this._handlePostInitFunctionality(t,l,o),this._handleEndFunctionality(t,l,o),s=this.resolve(),{previous:s,current:s};this._handlePreInitFunctionality(t,l,o);var p,_=z("animation_"),f=this.__setAnimationId(_,l),v=new i(function(e){var n=a._Promise;p=n.all(f).then(function(){for(var i=[],s=0;s<h;++s)i.push(c[s].instantiate(l[s],r));a._handlePostInitFunctionality(t,l,o);var u=n.all(i),p=a.__isParentAnimating(l),f=a.__generateAnimatedElement(_,l,v);
if(!b(p)){a._handleEndFunctionality(t,l,o),f.animationEnd(!0);var m=a._animatedElements[p],g=d(m.promise)?function(){return m.promise}:function(){return v};u.then(function(){e(g)})}a.__stopChildAnimations(l),f.promise=v,u.then(function(){a._handleEndFunctionality(t,l,o),f.animationEnd(),e(function(){return v})})})});return v.initialize(c),{previous:p,current:v}},t.prototype._handlePreInitFunctionality=function(t,e,n){switch(n.key){case"move":for(var i=0;i<length;++i)st(t[i])}},t.prototype._handlePostInitFunctionality=function(t,e,n){var i,r;switch(n.key){case"enter":case"move":var o,s=n.refChild;if(l(s)?o=s.parentNode:(o=n.parent,s=null),!l(o))break;for(i=t.length,r=0;r<i;++r)o.insertBefore(t[r],s);break;case"show":for(i=e.length,r=0;r<i;++r)e[r].removeAttribute(Di)}},t.prototype._handleEndFunctionality=function(t,e,n){var i,r;switch(n.key){case"leave":for(i=t.length,r=0;r<i;++r)st(t[r]);break;case"hide":for(i=e.length,r=0;r<i;++r)e[r].setAttribute(Di,"")}},t.prototype.__setAnimationId=function(t,e){for(var n,i,r,o=this._animatedElements,s=[],a=e.length,u=0;u<a;++u)r=e[u],i=r.__plat,C(i)?(r.__plat={animation:t},at(r,zi)):C(i.animation)?(i.animation=t,at(r,zi)):(n=o[i.animation],C(n)||(s.push(n.promise),n.animationEnd(!0)),i.animation=t);return s},t.prototype.__generateAnimatedElement=function(t,e,n){var i=this._animatedElements,r=function(r){var o,s,a,u=e.length;if(r===!0)return n.cancel(),void $(i,t);for(var c=0;c<u;++c)s=e[c],o=s.__plat||{},a=o.animation,C(a)||a!==t||(ut(s,zi),$(o,"animation"),v(o)&&$(s,"__plat"));$(i,t)};return i[t]={animationEnd:r}},t.prototype.__isParentAnimating=function(t){for(var e,n=t[0];!c(n=n.parentNode)&&!b(n)&&n.nodeType===Node.ELEMENT_NODE;)if(ht(n,zi)){var i=n.__plat;if(e=(i||{}).animation,_(e)){if(!b(this._animatedElements[e]))return e;$(i,"animation"),v(i)&&$(n,"__plat"),ut(n,zi)}}},t.prototype.__stopChildAnimations=function(t){for(var e,n,i,r,o=this._animatedElements,s=Array.prototype.slice,a=0;a<t.length;++a)for(e=s.call(t[a].querySelectorAll("."+zi));e.length>0;)i=e.pop().__plat||{},r=i.animation,b(r)||(n=o[r]||{},y(n.animationEnd)&&n.animationEnd(!0))},t.prototype.__constructAnimatableElements=function(t,e,n,i){if(!x(t))if(h(t))t=Array.prototype.slice.call(t.childNodes);else if(E(t))t=Array.prototype.slice.call(t);else{if(!l(t)||t.nodeType!==Node.ELEMENT_NODE)return[];t=[t]}for(var r,o=t.length,s=0;s<o;++s)r=t[s],l(r)&&r.nodeType===Node.ELEMENT_NODE&&(n.push(r),i.push(e.inject()));return t},t._inject={_compat:Vt,_Promise:$t,_document:Qt},t}();t.Animator=n,Pt.injectable(ve,n);var i=function(t){function n(e,n){t.call(this,e),this._Promise=dt($t),this.__animationState=0,this.__animationInstances=[],b(n)||(this.__animationInstances=n.__animationInstances,this.__animationState=n.__animationState)}return __extends(n,t),n.prototype.initialize=function(t){v(this.__animationInstances)&&(x(t)?this.__animationInstances=t:a(t)&&(this.__animationInstances=[t]))},n.prototype.getInstances=function(){return this.__animationInstances},n.prototype.start=function(){if(!(this.__animationState>0)){for(var t,e=this.__animationInstances,n=e.length,i=0;i<n;++i)t=e[i],y(t.start)&&t.start();this.__animationState=1}},n.prototype.pause=function(){if(1!==this.__animationState)return this._Promise.resolve();for(var t,n=this.__animationInstances,i=[],r=n.length,o=0;o<r;++o)t=n[o],y(t.pause)&&i.push(t.pause());return this._Promise.all(i).then(e)},n.prototype.resume=function(){if(1!==this.__animationState)return this._Promise.resolve();for(var t,n=this.__animationInstances,i=[],r=n.length,o=0;o<r;++o)t=n[o],y(t.resume)&&i.push(t.resume());return this._Promise.all(i).then(e)},n.prototype.cancel=function(){if(2===this.__animationState)return this;for(var t,e=this.__animationInstances,n=e.length,i=0;i<n;++i)t=e[i],y(t.cancel)&&t.cancel(),y(t.end)&&t.end();return this.__animationState=2,this},n.prototype.isCanceled=function(){return 2===this.__animationState},n.prototype.then=function(e){return t.prototype.then.call(this,e)},n.prototype.catch=function(e){return t.prototype.catch.call(this,e)},n}(Mo.Promise);t.AnimationPromise=i;var r=function(){function t(){this.__eventListeners=[]}return t.prototype.initialize=function(){},t.prototype.start=function(){},t.prototype.end=function(){for(var t=this.__eventListeners;t.length>0;)t.pop()();y(this._resolve)&&(this._resolve(),this._resolve=null)},t.prototype.pause=function(){return this._Promise.resolve()},t.prototype.resume=function(){return this._Promise.resolve()},t.prototype.cancel=function(){this.end()},t.prototype.addEventListener=function(t,n,i){if(!y(n))return this._log.warn('An animation\'s "addEventListener" must take a function as the second argument.'),e;n=n.bind(this);var r=this.dom.addEventListener(this.element,t,function(t){t.stopPropagation(),n(t)},i),o=this.__eventListeners;return o.push(r),function(){r();var t=o.indexOf(r);t!==-1&&o.splice(t,1)}},t.prototype.instantiate=function(t,e){var n=this;this.element=t,this.options=e;var r=new i(function(t){n._resolve=t,n.initialize()});return r.initialize(this),r},t._inject={_window:Pe,_compat:Vt,_log:Kt,_Promise:$t,dom:be,utils:Se},t}();t.BaseAnimation=r;var o=function(t){function e(){t.apply(this,arguments),this._animationEvents=this._compat.animationEvents}return __extends(e,t),e.prototype.animationStart=function(t){return this.addEventListener(this._animationEvents.$animationStart,t,!1)},e.prototype.animationEnd=function(t){return this.addEventListener(this._animationEvents.$animationEnd,t,!1)},e.prototype.animationIteration=function(t){return this.addEventListener(this._animationEvents.$animationIteration,t,!1)},e.prototype.transitionStart=function(t){return this.addEventListener(this._animationEvents.$transitionStart,t,!1)},e.prototype.transitionEnd=function(t){return this.addEventListener(this._animationEvents.$transitionEnd,t,!1)},e}(r);t.CssAnimation=o;var s=function(t){function n(){t.apply(this,arguments),this.className=Bi,this._cancelAnimation=e}return __extends(n,t),n.prototype.initialize=function(){at(this.element,this.className+Ar)},n.prototype.start=function(){var t=this;this._cancelAnimation=D(function(){var e=t.element,n=t.className;if(null===e.offsetParent)return t._dispose(),void t.end();at(e,n);var i=t._animationEvents.$animation,r=t.options||{},o=t._window.getComputedStyle(e,r.pseudo),s=o[i+"Name"];return""===s||"none"===s||"paused"===o[i+"PlayState"]?(t._dispose(),void t.end()):(r.preserveInit||ut(e,n+Ar),void(t._cancelAnimation=t.animationEnd(function(){t._cancelAnimation=D(function(){t._dispose(),t.end()})})))})},n.prototype.pause=function(){var t=this;if(this._cancelAnimation===e)return this._Promise.resolve();var n=this._compat.animationEvents;return new this._Promise(function(i){D(function(){t._cancelAnimation!==e&&(t.element.style[n.$animation+"PlayState"]="paused"),i()})})},n.prototype.resume=function(){var t=this;if(this._cancelAnimation===e)return this._Promise.resolve();var n=this._compat.animationEvents;return new this._Promise(function(i){D(function(){t._cancelAnimation!==e&&(t.element.style[n.$animation+"PlayState"]="running"),i()})})},n.prototype.cancel=function(){this._cancelAnimation(),this._dispose(),this.end()},n.prototype._dispose=function(){var t=this.className;ut(this.element,t+" "+t+Ar),this._cancelAnimation=e},n}(o);t.SimpleCssAnimation=s,Pt.animation(Bi,s);var u=function(t){function e(){t.apply(this,arguments),this.className=Hi}return __extends(e,t),e}(s);t.FadeIn=u,Pt.animation(Hi,u);var p=function(t){function e(){t.apply(this,arguments),this.className=Qi}return __extends(e,t),e}(s);t.FadeOut=p,Pt.animation(Qi,p);var f=function(t){function e(){t.apply(this,arguments),this.className=$i}return __extends(e,t),e}(s);t.Enter=f,Pt.animation($i,f);var m=function(t){function e(){t.apply(this,arguments),this.className=Vi}return __extends(e,t),e}(s);t.Leave=m,Pt.animation(Vi,m);var g=function(t){function e(){t.apply(this,arguments),this.className=qi}return __extends(e,t),e}(s);t.Move=g,Pt.animation(qi,g);var w=function(t){function n(){t.apply(this,arguments),this.className=Ui,this._animationCanceled=e,this._normalizeRegex=/-/g,this._nonNumRegex=/[^\-0-9\.]/g,this._normalizedKeys={},this._transitionCount=0,this._count=0,this._started=!1,this._usingCss=!1}return __extends(n,t),n.prototype.initialize=function(){at(this.element,this.className+Ar)},n.prototype.start=function(){var t=this;this._animationCanceled=D(function(){var e=t.element,n=t.className;null===e.offsetParent&&(t._animate(),t._dispose(),t.end()),at(e,n),t._started=!0;for(var i,r=t.utils,o=t._animationEvents.$transition,s=t.options||{},a=t._window.getComputedStyle(e,s.pseudo),u=t._properties=a[o+"Property"].split(","),c=a[o+"Duration"].split(","),l=u.length,h=l,p=!1;l-- >0;)i=u[l],""===i||"none"===i?u.splice(l,1):h>1&&"all"===i&&(t._log.debug('Improper transition declaration on class "'+e.className+'"'),u.splice(l,1));if(0===u.length)p=!0;else{for(l=c.length;l-- >0&&(i=c[l],""===i||"0s"===i););l<0&&(p=!0)}if(p)return t._animate(),t._dispose(),void t.end();if(r.isNumber(s.count)&&s.count>0&&(t._count=s.count),s.preserveInit===!1&&ut(e,n+Ar),t._animationCanceled=t.transitionEnd(t._done),!t._animate()){if(r.isEmpty(s.properties))return void t.__cssTransition(a,c);t._dispose(),t.end()}})},n.prototype.cancel=function(){this._animationCanceled(),this._started||this._animate(),this._dispose(),this.end()},n.prototype._dispose=function(){var t=this.className;ut(this.element,t+" "+t+Ar),this._animationCanceled=e},n.prototype._done=function(t){var e=t.propertyName;if(_(e)){var n=++this._transitionCount;if(e=e.replace(this._normalizeRegex,"").toLowerCase(),n<this._count||!this._usingCss&&this._normalizedKeys[e]===!0&&n<this._properties.length)return}this._dispose(),this.end()},n.prototype._animate=function(){for(var t,e,n,i=this.element.style||{},r=(this.options||{}).properties||{},o=Object.keys(r),s=o.length,a=this._normalizedKeys,u=this._normalizeRegex,c=0;o.length>0;)t=o.shift(),e=i[t],n=r[t],_(n)?(i[t]=n,e===i[t]?c++:a[t.replace(u,"").toLowerCase()]=!0):c++;return c<s},n.prototype.__cssTransition=function(t,n){var i,r,o,s,a=this,u=this._animationEvents.$transition,c=t[u+"Delay"].split(","),l=this._properties,h=l.length,p=this._normalizedKeys,_=this._normalizeRegex,f=0,d=0,v=!1,m=this.utils.defer.bind(this,function(n,i){a._animationCanceled!==e&&("all"!==n&&t[n]===i||(v=!0),++d<h||v||(a._dispose(),a.end()))});for(this._usingCss=!0,this._count=this._count||h;f<h;++f)i=l[f]=l[f].trim(),r=n.length>f?n[f].trim():n[n.length-1].trim(),o=c.length>f?c[f].trim():c[c.length-1].trim(),p[i.replace(_,"").toLowerCase()]=!0,s=t[i],m(this._toMs(r)+this._toMs(o),[i,s])},n.prototype._toMs=function(t){var e=this._nonNumRegex,n=t.match(e)[0],i=Number(t.replace(e,""));return this.utils.isNumber(i)?"s"===n?1e3*i:"ms"===n?i:0:0},n}(o);t.SimpleCssTransition=w,Pt.animation(Ui,w)}(L=t.animations||(t.animations={}));var M;!function(n){var i=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.initialize=function(){var t,e=this._router=this._Router.currentRouter(),n=this._getParentViewport();b(n)||b(n._router)||(t=this._parentRouter=n._router,t.addChild(e)),this._navigator.initialize(e)},e.prototype.loaded=function(){var t=this;if(a(this.options)){var e=this.options.value.animate===!0;e&&this.dom.addClass(this.element,Qn+"-animate"),this._animate=e}this._Promise.resolve(this._router.finishNavigating).then(function(){t._router.register(t)})},e.prototype.canNavigateTo=function(t){var e=this,n=this._Router.currentRouter,i=n(),r=!0,o=this._Injector.getDependency(t.delegate.view),s=o.inject(),u=t.parameters,c=n();if(!a(s))return this._Promise.resolve(null);if(i!==c){c.initialize(this._router);var l=dt(ne);s.navigator=l,l.initialize(c)}else s.navigator=this._navigator;return y(s.canNavigateTo)&&(r=s.canNavigateTo(u,t.query)),this._Promise.resolve(r).then(function(t){return e._nextInjector=o,e._nextView=s,t})},e.prototype.canNavigateFrom=function(){var t=this.controls[0],e=!0;return a(t)&&y(t.canNavigateFrom)&&(e=t.canNavigateFrom()),this._Promise.resolve(e)},e.prototype.navigateTo=function(t){var e=this._nextInjector||this._Injector.getDependency(t.delegate.view),n=this._createNodeMap(e),i=this.element,r=n.element,o=(t.parameters,t.query),s=n.uiControlNode.control;if(this._nextInjector=this._nextView=void 0,this._animate){var a=this._animator,u=this.dom;this._navigator.isBackNavigation()?(u.addClass(r,Wi),a.enter(r,$i,i).then(function(){u.removeClass(r,Wi)})):a.enter(r,$i,i)}else i.insertBefore(r,null);var c=this._managerCache.read(this.uid),l=this._ElementManagerFactory.getInstance();return c.children=[],l.initialize(n,c),y(s.navigatedTo)&&s.navigatedTo(t.parameters,o),l.setUiControlTemplate(),s.hasOwnContext?l.observeRootContext(s,l.fulfillAndLoad):l.fulfillAndLoad()},e.prototype.navigateFrom=function(){var t,e=this,n=this.controls[0],i=a(n);return t=i&&y(n.navigatingFrom)?this._Promise.resolve(n.navigatingFrom()):this._Promise.resolve(),t.catch(function(t){return a(t)?_(t.message)?void e._log.debug(e.type+" error: "+t.message):void e._log.debug(e.type+" error: "+JSON.stringify(t)):void e._log.debug(t)}).then(function(){if(!e._animate||!i)return void Ho.dispose(n);var t=n.element;e._navigator.isBackNavigation()&&e.dom.addClass(t,Wi),e._animator.leave(t,Vi).then(function(){Ho.dispose(n)})})},e.prototype.dispose=function(){this._router.unregister(this),this._navigator.dispose()},e.prototype._createNodeMap=function(t){var e=this._nextView||t.inject(),n=this._document,i=t.name,r=e.replaceWith,o=v(r)||"any"===r?n.createElement("div"):n.createElement(r);return o.setAttribute(Wn,i),o.className=Yn,{element:o,attributes:{},nodes:[],uiControlNode:{control:e,nodeName:i,expressions:[],injector:t}}},e.prototype._getParentViewport=function(){for(var t=this.parent,e=this.type;!b(t)&&t.type!==e;)t=t.parent;return t},e._inject={_Router:je,_Promise:$t,_Injector:Qe,_ElementManagerFactory:ue,_document:Qt,_managerCache:fe,_animator:ve,_navigator:ne},e}(f);n.Viewport=i,Pt.control(Qn,i);var r=function(t){function e(){t.call(this),this.replaceWith=null,this.__isFirst=!1;var e=dt(_e);this.__templateControlCache=e.create(ti)}return __extends(e,t),e.prototype.initialize=function(){var t=this.options||{},e=t.value||{},n=this._id=e.id;if(b(n))return void this._log.warn(this.type+" instantiated without an id option");this._url=e.templateUrl;var i=this.__templateControlCache.read(n);return b(i)?(this.__isFirst=!0,void this._initializeTemplate()):void(this.__templatePromise=i)},e.prototype.loaded=function(){this.__isFirst||this._waitForTemplateControl(this.__templatePromise)},e.prototype.dispose=function(){if(this.__isFirst){var t=this.__templateControlCache;t.remove(this._id),0===t.info().size&&t.dispose()}},e.prototype._initializeTemplate=function(){var t=this,e=this._id;if(!b(e)){var n,i=this.endNode.parentNode,r=this._url;b(r)?(n=this._document.createDocumentFragment(),W(this.elementNodes,n)):(n=this._templateCache.read(r),X(this.elementNodes,i));var o;d(n)?o=n.catch(function(e){if(b(e))return f.determineTemplate(t,r)}).then(function(n){return t.bindableTemplates.add(e,n.cloneNode(!0)),t}):(this.bindableTemplates.add(e,n.cloneNode(!0)),o=this._Promise.resolve(this)),this.__templateControlCache.put(e,o)}},e.prototype._waitForTemplateControl=function(t){var e=this;d(t)&&t.then(function(t){return b(e._url)||e._url===t._url||e._log.warn("The specified url: "+e._url+" does not match the original "+e.type+' with id: "'+e._id+'". The original url will be loaded.'),e.__mapBindableTemplates(t),e.bindableTemplates.bind(e._id)}).then(function(t){var n=e.endNode;Z(n.parentNode,t,n)}).catch(function(t){O(function(){e._log.warn("Problem resolving "+e.type+" url: "+t.response)})})},e.prototype.__mapBindableTemplates=function(t){var e=this.bindableTemplates;e.cache=t.bindableTemplates.cache,e.templates=t.bindableTemplates.templates},e._inject={_Promise:$t,_templateCache:de,_document:Qt},e}(f);n.Template=r,Pt.control(Hn,r);var o=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setTemplate=function(){this.innerTemplate=W(this.element.childNodes)},e.prototype.loaded=function(){this.element.appendChild(this.innerTemplate.cloneNode(!0))},e}(f);n.Ignore=o,Pt.control(Vn,o);var s=function(t){function n(){var n=this;t.call(this),this.priority=120,this._aliases={index:fr.index,even:fr.even,odd:fr.odd,first:fr.first,last:fr.last},this._blockLength=0,this._addQueue=[],this._itemLength=0,this.__listenerSet=!1,this.itemsLoaded=new this._Promise(function(t,e){n.__resolveFn=t,n.__rejectFn=e}).catch(e)}return __extends(n,t),n.prototype.setTemplate=function(){this.bindableTemplates.add("item",this.element.childNodes)},n.prototype.contextChanged=function(t,e){x(t)?this._setListener():t=[],this._executeEvent([{object:t,type:"splice"}])},n.prototype.loaded=function(){var t=this.options,e=this._animate=!C(t)&&t.value.animate===!0,n=this.context;if(this._container=this.element,e&&(this._animationQueue=[]),this._setAliases(),x(n)){var i=this._addQueue,r=n.length,o=this._addItems(0,r,0).then(function(){var t=i.indexOf(o);t!==-1&&i.splice(t,1)});i.push(o),this._setListener()}},n.prototype.dispose=function(){this.utils.isFunction(this.__rejectFn)&&(this.__rejectFn(),this.__resolveFn=this.__rejectFn=null),this._animationQueue=this._addQueue=null},n.prototype._setAliases=function(){var t=this.options;if(!C(t)){var e=t.value.aliases;if(a(e))for(var n,i=this._aliases,r=Object.keys(i),o=r.length,s=0;s<o;++s)n=e[r[s]],_(n)&&(i[r[s]]=n)}},n.prototype._addItems=function(t,e,n){var i=this,r=+(t+e),o=[],s=t;for(this._itemLength+=e;t<r;)o.push(this._bindItem(t++));return o.length>0&&(this.itemsLoaded=this._Promise.all(o).then(function(t){if(i._setBlockLength(t),n>0)for(var e=t.length,r=i._container,o=0;o<e;++o)o<n?i._appendAnimatedItem(t[o]):r.insertBefore(t[o],null);else i._appendItems(t);i._updateResource(s-1),y(i.__resolveFn)&&(i.__resolveFn(),i.__resolveFn=i.__rejectFn=null)}).catch(function(t){O(function(){_(t)&&(t=new Error(t)),i._log.error(t)})})),this.itemsLoaded},n.prototype._appendItems=function(t){W(t,this._container)},n.prototype._appendAnimatedItem=function(t){if(l(t)){var e=this._animationQueue,n={animation:this._animator.enter(t,$i,this._container).then(function(){var t=e.indexOf(n);t!==-1&&e.splice(t,1)}),op:null};e.push(n)}},n.prototype._removeItems=function(t,e){for(var n=f.dispose,i=this.controls,r=t+e;r-- >t;)n(i[r]);this._updateResource(i.length-1)},n.prototype._bindItem=function(t){return this.bindableTemplates.bind("item",t,this._getAliases(t))},n.prototype._setBlockLength=function(t){this._blockLength>0||0===t.length||(this._blockLength=t[0].childNodes.length)},n.prototype._updateResource=function(t){var e=this.controls;t<0||t>=e.length||e[t].resources.add(this._getAliases(t))},n.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this._executeEvent),this.__listenerSet=!0)},n.prototype._executeEvent=function(t){var e="_"+t[0].type;y(this[e])&&this[e](t)},n.prototype._getAliases=function(t){var e=0===(1&t),n={},i=this._aliases,r=Xr;return n[i.index]={value:t,type:r},n[i.even]={value:e,type:r},n[i.odd]={value:!e,type:r},n[i.first]={value:0===t,type:r},n[i.last]={value:t===this.context.length-1,type:r},n},n.prototype._push=function(t){var e=t[0],n=this._addQueue,i=e.addedCount,r=this._addItems(e.index,i,this._animate?i:0).then(function(){var t=n.indexOf(r);t!==-1&&n.splice(t,1)});n.push(r)},n.prototype._pop=function(t){var e=this,n=t[0],i=n.object.length;if(0!==n.removed.length){var r=n.object.length;this._itemLength>0&&this._itemLength--,this._Promise.all(this._addQueue).then(function(){return e._animate?void e._animateItems(i,1,Vi,"leave",!1).then(function(){e._removeItems(r,1)}):void e._removeItems(r,1)})}},n.prototype._unshift=function(t){var e=t[0],n=e.addedCount,i=this._addQueue;if(this._animate){var r=this._animationQueue,o=r.length;this._animateItems(0,n,$i,null,o>0&&"clone"===r[o-1].op)}var s=this._addItems(e.object.length-n,n,0).then(function(){var t=i.indexOf(s);t!==-1&&i.splice(t,1)});i.push(s)},n.prototype._shift=function(t){var e=this,n=this._addQueue,i=t[0];if(0!==i.removed.length){this._animate&&0===n.length&&(n=n.concat([this._animateItems(0,1,Vi,"clone",!0)]));var r=i.object.length;this._itemLength>0&&this._itemLength--,this._Promise.all(n).then(function(){e._removeItems(r,1)})}},n.prototype._splice=function(t){var e,n=this,i=t[0],r=i.addedCount,o=this._addQueue,s=this._itemLength,a=this._animate;if(b(r)){a&&this._cancelCurrentAnimations();var u=i.object.length,c=s-u;return void(u>s?(e=this._addItems(s,-c,0).then(function(){var t=o.indexOf(e);t!==-1&&o.splice(t,1)}),o.push(e)):s>u&&(s>=c?this._itemLength-=c:this._itemLength=0,this._Promise.all(o).then(function(){n._removeItems(s-c,c)})))}var l=i.removed.length,h=this._animationQueue;if(r>l){var p=r-l,_=void 0;if(a){_=r;var f=h.length,d=i.index;s<r-d&&(_=s-d),this._animateItems(d,_,$i,null,f>0&&"clone"===h[f-1].op),_=r-_}else _=0;e=this._addItems(i.object.length-p,p,_).then(function(){var t=o.indexOf(e);t!==-1&&o.splice(t,1)}),o.push(e)}else if(l>r){var v=r>0;a&&!v&&0===o.length&&(o=o.concat([this._animateItems(i.index,l,Vi,"clone",!0)]));var m=l-r;s>=m?this._itemLength-=m:this._itemLength=0,this._Promise.all(o).then(function(){if(a&&v){var t=h.length;n._animateItems(i.index,r,$i,null,t>0&&"clone"===h[t-1].op)}n._removeItems(s-m,m)})}},n.prototype._calculateBlockLength=function(t,e){return this._blockLength},n.prototype._animateItems=function(t,e,n,i,r){var o=this._calculateBlockLength();if(0===o)return this._Promise.resolve();var s=t*o;switch(i){case"clone":return this._handleClonedContainerAnimation(s,e*o+s,n,r===!0);case"leave":return this._handleLeave(s,e*o+s,n);default:return this._handleSimpleAnimation(s,e*o+s,n,r===!0)}},n.prototype._handleSimpleAnimation=function(t,e,n,i){var r=this._container,o=Array.prototype.slice.call(r.childNodes,t,e);if(0===o.length)return this._Promise.resolve();var s=this._animationQueue,a=this._animator.create(o,n),u=a.current.then(function(){var t=s.indexOf(l);t!==-1&&s.splice(t,1)}),c=function(){return a.previous.then(function(){u.start()}),u},l={animation:u,op:null};if(i&&s.length>0){var h=this._cancelCurrentAnimations().then(c);return s.push(l),h}return s.push(l),c()},n.prototype._handleLeave=function(t,e,n){var i=this._container,r=Array.prototype.slice.call(i.childNodes,t,e);if(0===r.length)return this._Promise.resolve();var o=this._animationQueue,s=this._animator.leave(r,n).then(function(){var t=o.indexOf(a);t!==-1&&o.splice(t,1)}),a={animation:s,op:"leave"};return o.push(a),s},n.prototype._handleClonedContainerAnimation=function(t,e,n,i){var r=this._container,o=r.cloneNode(!0),s=Array.prototype.slice.call(o.childNodes,t,e);if(0===s.length)return this._Promise.resolve();var a,u=this._animationQueue,c=this._animator.create(s,n),l=c.current.then(function(){var t=u.indexOf(p);t>-1&&u.splice(t,1),b(a)||a.replaceChild(r,o)}),h=function(){return a=r.parentNode,b(a)||l.isCanceled()?l:(a.replaceChild(o,r),c.previous.then(function(){l.start()}),l)},p={animation:l,op:"clone"};if(i&&u.length>0){var _=this._cancelCurrentAnimations().then(h);return u.push(p),_}return u.push(p),h()},n.prototype._cancelCurrentAnimations=function(){for(var t=this._animationQueue,e=[],n=t.length,i=0;i<n;++i)e.push(t[i].animation.cancel());return this._Promise.all(e)},n._inject={_animator:ve,_Promise:$t},n}(f);n.ForEach=s,Pt.control(Bn,s);var u=function(t){function e(){t.apply(this,arguments),this.replaceWith=ei,this._structuredDataElements=[]}return __extends(e,t),e.prototype.initialize=function(){var t=this;this.on(Ai,function(){t._removeAllElements()})},e.prototype.setTemplate=function(){var t=ni,e=ii,n=ai,i=oi,r=_i,o=si,s=ri,a=di,u=mi,c=vi,l=gi;this.element.setAttribute("prefix","og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"),this._titleElement=this._createElement(e),this._ogTitleElement=this._createElement(t,u+e),this._twitterTitleElement=this._createElement(t,l+e),this._descriptionElement=this._createElement(t,s),this._ogDescriptionElement=this._createElement(t,u+s),this._twitterDescriptionElement=this._createElement(t,l+s),this._ogUrlElement=this._createElement(t,u+a),this._twitterUrlElement=this._createElement(t,l+a),this._authorElement=this._createElement(t,i),this._googleAuthorElement=this._createElement(n,i),this._fbAuthorElement=this._createElement(t,c+i),this._twitterCreatorElement=this._createElement(t,l+o),this._ogTypeElement=this._createElement(t,u+r)},e.prototype.title=function(t){return _(t)?(this._titleElement.innerText=t,this._setContent([this._ogTitleElement,this._twitterTitleElement],t),t):this._getContent(this._titleElement)},e.prototype.description=function(t){return _(t)?(this._setContent([this._descriptionElement,this._ogDescriptionElement,this._twitterDescriptionElement],t),t):this._getContent(this._descriptionElement)},e.prototype.url=function(t){return _(t)?(this._setContent([this._ogUrlElement,this._twitterUrlElement],t),t):this._getContent(this._ogUrlElement)},e.prototype.author=function(t){return _(t)?(this._setContent([this._authorElement],t),t):this._getContent(this._authorElement)},e.prototype.googleAuthor=function(t){return _(t)?(this._setContent([this._googleAuthorElement],t),t):this._getContent(this._googleAuthorElement)},e.prototype.fbAuthor=function(t){return _(t)?(this._setContent([this._fbAuthorElement],t),t):this._getContent(this._fbAuthorElement)},e.prototype.twitterCreator=function(t){return _(t)?(this._setContent([this._twitterCreatorElement],t),t):this._getContent(this._twitterCreatorElement)},e.prototype.fbType=function(t){return _(t)?(this._setContent([this._ogTypeElement],t),t):this._getContent(this._ogTypeElement)},e.prototype.images=function(t){var e=this;if(x(t)){var n,i,r=ni,o=mi,s=gi,a=this.element;k(function(t){t=e._browser.urlUtils(t).href;var u=a.querySelectorAll(r+'[content="'+t+'"]');2!==u.length&&(n=e._createElement(r,o+hi,!0),i=e._createElement(r,s+hi,!0),e._setContent([n,i],t))},t)}},e.prototype.videos=function(t){var e=this;if(x(t)){var n,i=ni,r=mi,o=pi,s=this._browser,a=this.element;k(function(t){t=s.urlUtils(t).href;var u=a.querySelectorAll(i+'[content="'+t+'"]');1!==u.length&&(n=e._createElement(i,r+o,!0),e._setContent([n],t))},t)}},e.prototype.structuredData=function(t){if(!v(t)){var e=this._document.createElement("script"),n=this._titleElement.nextSibling;e.setAttribute("type","application/ld+json"),e.textContent=JSON.stringify(t),this._structuredDataElements.push(e),this.dom.insertBefore(this.element,e,n)}},e.prototype.blogPostings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=0,i=t.length;n<i;++n)this.structuredData(t[n])},e.prototype.loaded=function(){this.url(this._browser.url())},e.prototype.navigated=function(t){this.url(t)},e.prototype._getContent=function(t){var e=t.nodeName.toLowerCase();return e===ii?t.innerText:e===ni?t.getAttribute(yi):e===ai?t.getAttribute(ui):void 0},e.prototype._setContent=function(t,e){for(var n,i,r=this.element,o=Array.prototype.slice.call(r.children),s=t.length,a=yi,u=ui,c=this._titleElement.nextSibling,l=this.dom,h=0;h<s;++h)i=t[h],n=i.nodeName.toLowerCase(),n===ni?i.setAttribute(a,e):i.setAttribute(u,e),o.indexOf(i)===-1&&l.insertBefore(r,i,c)},e.prototype._createElement=function(t,e,n){var i,r=_(e),o=!r||0!==e.indexOf(mi)&&0!==e.indexOf(vi)?ci:li,s=this.element;return t===ai&&(o=fi),!n&&r?i=s.querySelector(t+"["+o+'="'+e+'"]'):n||(i=s.querySelector(t)),l(i)||(i=this._document.createElement(t)),r&&i.setAttribute(o,e),i},e.prototype._removeAllElements=function(){var t=Array.prototype.slice,e=this._document.head.querySelectorAll("meta["+li+'^="'+mi+'"]'),n=this._document.head.querySelectorAll("meta["+ci+'^="'+gi+'"]');this._removeElements.apply(this,[this._descriptionElement,this._authorElement,this._googleAuthorElement].concat(t.call(e),t.call(n),t.call(this._structuredDataElements))),this._structuredDataElements=[]},e.prototype._removeElements=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n,i=this.element,r=Array.prototype.slice.call(i.children),o=t.length,s=0;s<o;++s)n=t[s],r.indexOf(n)!==-1&&i.removeChild(n)},e._inject={_document:Qt,_browser:Ie},e}(t.TemplateControl);n.Head=u;var c=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setTemplate=function(){this.dom.clearNode(this.element)},e.prototype.loaded=function(){var t=this.options;a(t)&&(this._onOptionsChanged(t.value),t.observe(this._onOptionsChanged))},e.prototype._onOptionsChanged=function(t,e){var n=this;if(t!==e){if(!a(t))return void this._log.debug("plat-options for "+this.type+" must be an object.");var i=t.html;if(i!==this._html){this._html=i;var r=_(i);if(b(i)||r&&""===i.trim())return void(this.controls.length>0?this._TemplateControlFactory.dispose(this.controls[0]):this.dom.clearNode(this.element));if(!r)return void this._log.debug("Trying to bind a non-string value to "+this.type+".");if(t.compile===!0){var o=this.controls.length>0;return void this.bindableTemplates.once(i).then(function(t){o?n._TemplateControlFactory.dispose(n.controls[0]):n.dom.clearNode(n.element),n.element.insertBefore(t,null)})}K(this.element,i)}}},e._inject={_TemplateControlFactory:Ne},e}(f);n.InnerHtml=c,Pt.control(Un,c);var h=function(t){function n(){var n=this;t.call(this),this.replaceWith="select",this.priority=120,this.groups={},this.itemsLoaded=new this._Promise(function(t,e){n.__resolveFn=t,n.__rejectFn=e}).catch(e)}return __extends(n,t),n.prototype.setTemplate=function(){this.bindableTemplates.add("option",this.element.childNodes);var t=this.options||{},e=t.value||{},n=e.default;if(a(n)){var i=this._document.createElement("option"),r=n.value,o=n.textContent;i.value=C(r)?o:r,i.textContent=C(o)?r:o,this.element.insertBefore(i,null)}if(b(e.group))this._isGrouped=!1;else{var s=this._group=e.group,u=this._document.createElement("optgroup");u.label=Cr+s+xr,this.bindableTemplates.add("group",u),this._isGrouped=!0}},n.prototype.contextChanged=function(t,e){var n=this;if(v(t))return void(v(e)||this.itemsLoaded.then(function(){n._removeItems(n.controls.length)}));if(x(t)){var i=x(t)?t.length:0,r=x(e)?e.length:0;this._setListener(),i>r?this._addItems(i-r,r):i<r&&this._removeItems(r-i)}},n.prototype.loaded=function(){if(C(this._isGrouped)){var t=this.options||{},e=t.value||{};this._isGrouped=!b(this._group=e.group)}this._defaultOption=this.element.firstElementChild;var n=this.context;x(n)&&(this._addItems(n.length,0),this._setListener())},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.utils.isFunction(this.__rejectFn)&&(this.__rejectFn(),this.__resolveFn=this.__rejectFn=null),this._defaultOption=null},n.prototype.observeProperties=function(t){var e=this,n=this.element;this._binder=t,n.multiple?(b(t.evaluate())&&this.inputChanged([]),t.observeProperty(this._setSelectedIndices),t.observeArrayChange(function(){e._setSelectedIndices(t.evaluate(),null,null)})):t.observeProperty(this._setSelectedIndex),this.addEventListener(n,"change",this._observeChange,!1)},n.prototype._setSelectedIndex=function(t,e,n,i){var r=this,o=this.element,s=o.value;return b(t)?i!==!0&&this._document.body.contains(o)?void(o.selectedIndex=-1):void this.itemsLoaded.then(function(){b(r._binder.evaluate())&&r.inputChanged(o.value)}):(_(t)||(g(t)?(this._propertyType="number",t=t.toString()):m(t)?(this._propertyType="boolean",t=t.toString()):(t=y(t.toString)?t.toString():Object.prototype.toString.call(t),this._log.info('Trying to bind the invalid value "'+t+'" to a '+this.type+"."))),void(s!==t&&this.itemsLoaded.then(function(){return r._document.body.contains(o)?(o.value=t,void(o.value===t&&o.selectedIndex!==-1||(o.selectedIndex=-1))):(o.value=t,void(o.value!==t&&(o.value=s,r.inputChanged(r._castValue(o.value)))))})))},n.prototype._setSelectedIndices=function(t,e,n,i){var r=this;this.itemsLoaded.then(function(){var e,n=r.element,o=n.options,s=b(o)?0:o.length,a=b(t);if(!a&&x(t))for(var u,c,l,h=1/0;s-- >0;)e=o[s],
u=e.value,t.indexOf(u)===-1?(c=Number(u),g(c)&&(l=t.indexOf(c))!==-1?(l<h&&(r._propertyType="number",h=l),e.selected=!0):"true"===u&&(l=t.indexOf(!0))!==-1||"false"===u&&(l=t.indexOf(!1))!==-1?(l<h&&(r._propertyType="boolean",h=l),e.selected=!0):e.selected=!1):e.selected=!0;else for(i===!0&&b(r._binder.evaluate())&&r.inputChanged(r._getSelectedValues());s-- >0;){if(e=o[s],!a&&e.value===""+t)return void(e.selected=!0);e.selected=!1}})},n.prototype._observeChange=function(){var t=this.element;this.inputChanged(t.multiple?this._getSelectedValues():this._castValue(t.value))},n.prototype._getSelectedValues=function(){for(var t,e=this.element.options,n=e.length,i=[],r=0;r<n;++r)t=e[r],t.selected&&i.push(this._castValue(t.value));return i},n.prototype._castValue=function(t){var e=this._propertyType;if(b(e))return t;var n;switch(e){case"number":n=v(t)?void 0:Number(t);break;case"boolean":switch(t){case"true":n=!0;break;case"false":case"0":case"null":case"undefined":n=!1;break;default:n=!!t}break;default:n=t}return n},n.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this._executeEvent),this.__listenerSet=!0)},n.prototype._executeEvent=function(t){var e="_"+t[0].type;y(this[e])&&this[e](t)},n.prototype._addItems=function(t,e){for(var n=this,i=this.bindableTemplates,r=[],o=this._insertOption;t-- >0;)r.push(i.bind("option",e).then(o.bind(this,e++)));return r.length>0&&(this.itemsLoaded=this._Promise.all(r).then(function(){y(n.__resolveFn)&&(n.__resolveFn(),n.__resolveFn=n.__rejectFn=null)}).catch(function(t){O(function(){_(t)&&(t=new Error(t)),n._log.error(t)})})),this.itemsLoaded},n.prototype._insertOption=function(t,e){var n=this.element;if(this._isGrouped){var i=this.groups,r=(this.context[t]||{})[this._group],o=i[r];return b(o)?i[r]=this.bindableTemplates.bind("group",t).then(function(t){return o=i[r]=t.childNodes[1],o.insertBefore(e,null),n.insertBefore(t,null),o}):d(o)?o.then(function(t){t.insertBefore(e,null)}):(o.insertBefore(e,null),this._Promise.resolve())}return n.insertBefore(e,null),this._Promise.resolve()},n.prototype._removeItems=function(t){for(var e=f.dispose,n=this.controls;t-- >0;)e(n.pop())},n.prototype._removeItem=function(){return this._isGrouped?void this._resetSelect():void this._removeItems(1)},n.prototype._resetSelect=function(){this._removeItems(this.controls.length),this.groups={},b(this._defaultOption)||this.element.insertBefore(this._defaultOption.cloneNode(!0),null),this._addItems(this.context.length,0)},n.prototype._push=function(t){var e=t[0];this._addItems(e.addedCount,e.index)},n.prototype._pop=function(t){var e=this;0!==t[0].removed.length&&this.itemsLoaded.then(function(){e._removeItem()})},n.prototype._unshift=function(t){if(this._isGrouped)return void this._resetSelect();var e=t[0],n=e.addedCount;this._addItems(n,e.object.length-n-1)},n.prototype._shift=function(t){var e=this;0!==t[0].removed.length&&this.itemsLoaded.then(function(){e._removeItem()})},n.prototype._splice=function(t){var e=this;if(this._isGrouped)return void this._resetSelect();var n=t[0],i=n.addedCount,r=n.removed.length;i>r?this._addItems(i-r,n.object.length-i-1):r>i&&this.itemsLoaded.then(function(){e._removeItems(r-i)})},n.prototype._sort=function(t){this._isGrouped&&this._resetSelect()},n.prototype._reverse=function(t){this._isGrouped&&this._resetSelect()},n._inject={_Promise:$t,_document:Qt},n}(w);n.Select=h,Pt.control(qn,h);var p=function(t){function n(){t.call(this),this.__condition=!0,this.__firstTime=!0;var e=this._document;this.commentNode=e.createComment($n+Rr+"placeholder"),this.fragmentStore=e.createDocumentFragment()}return __extends(n,t),n.prototype.contextChanged=function(){var t=this.options.value;if(!v(t))return this._setter(t)},n.prototype.setTemplate=function(){this.bindableTemplates.add("template",Array.prototype.slice.call(this.element.childNodes))},n.prototype.loaded=function(){b(this.options)&&(this._log.warn("No condition specified in "+on+" for "+this.type+"."),this.options={value:{condition:!0},observe:e});var t=this.contextChanged();return this.__removeListener=this.options.observe(this._setter),t},n.prototype.dispose=function(){y(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.commentNode=null,this.fragmentStore=null},n.prototype._setter=function(t){var e,n=this,i=!!t.condition;return i!==this.__condition||this.__firstTime?(e=i?b(this.__leaveAnimation)?this._addItem():this.__leaveAnimation.cancel().then(function(){return n.__leaveAnimation=null,n._addItem()}):b(this.__enterAnimation)?this._removeItem():this.__enterAnimation.cancel().then(function(){return n.__enterAnimation=null,n._removeItem()}),this.__condition=i,e):this._Promise.resolve(null)},n.prototype._addItem=function(){var t=this;return this.__firstTime||l(this.commentNode.parentNode)?this.__firstTime?(this.__firstTime=!1,this.__initialBind=this.bindableTemplates.bind("template").then(function(e){t.__initialBind=null;var n=t.element;return n.parentNode===t.fragmentStore?(n.insertBefore(e,null),t._animateEntrance()):(t.__enterAnimation=t._animator.animate(n,$i),n.insertBefore(e,null),t.__enterAnimation)}).then(function(){t.__enterAnimation=null})):d(this.__initialBind)?this.__initialBind=this.__initialBind.then(function(){return t.__initialBind=null,t._animateEntrance()}):this._animateEntrance():this._Promise.resolve(null)},n.prototype._animateEntrance=function(){var t=this,n=this.commentNode,i=n.parentNode;return l(i)?this.__enterAnimation=this._animator.enter(this.element,$i,i,n).then(function(){t.__enterAnimation=null}):this._animator.resolve().then(e)},n.prototype._removeItem=function(){var t=this;return d(this.__initialBind)?this.__initialBind=this.__initialBind.then(function(){return t.__initialBind=null,t._animateLeave()}):this._animateLeave()},n.prototype._animateLeave=function(){var t=this,n=this.element,i=n.parentElement,r=n.nextSibling;return l(i)?this.__leaveAnimation=this._animator.leave(n,Vi).then(function(){t.__leaveAnimation=null,i.insertBefore(t.commentNode,r),t.fragmentStore.insertBefore(n,null)}):this._animator.resolve().then(e)},n._inject={_animator:ve,_Promise:$t,_document:Qt},n}(f);n.If=p,Pt.control($n,p);var E=function(t){function e(){t.apply(this,arguments),this.replaceWith="a",this._router=this._Router.currentRouter(),this._allowClick=!1}return __extends(e,t),e.prototype.initialize=function(){this._removeClickListener=this.dom.addEventListener(this.element,"click",this._handleClick.bind(this),!1)},e.prototype.loaded=function(){var t=this.options,e=this.setHref.bind(this);return a(t)?(a(t.value)||(t.value={view:""}),this.addEventListener(this.element,Xi,this._handleTap,!1),e(),void t.observe(e)):(this._log.warn("No options specified for "+this.type+". Please send in options of type plat.ui.controls.ILinkOptions."),t=this.options={},t.value={view:""},void this.setHref())},e.prototype.setHref=function(){var t=this.getHref();if(!v(t)){var e=this.element;e.href=t}},e.prototype.getHref=function(){if(!b(this._router)){var t=this.options.value,e=t.view;if(t.isUrl!==!0){var n=t.parameters,i=t.query;if(v(e))return e;e=this._router.generate(e,n,i)}return this._browser.formatUrl(e)}},e.prototype._handleClick=function(t){if(this._allowClick)return void(this._allowClick=!1);var e;if(g(t.buttons)&&0!==t.buttons)e=t.buttons;else if(g(t.which)&&t.which>0)e=t.which;else switch(t.button){case-1:e=0;break;case 0:e=1;break;case 1:e=4;break;case 2:e=2;break;case 3:e=8;break;case 4:e=16;break;default:e=1}1===e&&t.preventDefault()},e.prototype._handleTap=function(t){var e=this;if(1===t.buttons){var n=this.getHref();if(!C(n)){var i=this.element.target;if(v(i)||i===Zr)return t.preventDefault(),void D(function(){e._browser.url(n)});this._allowClick=!0,this.element.click()}}},e.prototype.dispose=function(){F(this._removeClickListener,3e3)},e._inject={_Router:je,_Injector:Qe,_browser:Ie,_window:Pe},e}(f);n.Link=E,Pt.control(zn,E)}(M=t.controls||(t.controls={}))}(Wo=t.ui||(t.ui={}));var Yo;!function(t){function n(t,e,n,i,r){return u._markupRegex=t.markupRegex,u._newLineRegex=t.newLineRegex,u._ContextManager=e,u._parser=n,u._TemplateControlFactory=i,u._log=r,u}function i(t,e,n,i,r,o){return c._document=t,c._managerCache=e,c._ResourcesFactory=n,c._AttributesFactory=i,c._BindableTemplatesFactory=r,c._log=o,c}function r(){return h}function o(){return p}var s=function(){function t(){}return t.prototype.compile=function(t,e){var n,i,r,o=t.childNodes,s=!b(e),a=s?this._managerCache.read(e.uid):null,u=this._ElementManagerFactory.create;if(o=C(o)?y(t.push)?t:Array.prototype.slice.call(t):Array.prototype.slice.call(o),b(a)){n=o.length;for(var c=0;c<n;++c)r=o[c],r.nodeType===Node.ELEMENT_NODE&&(b(u(r))||this.compile(r)),i=o.length,c+=i-n,n=i}else this._compileNodes(o,a)},t.prototype._compileNodes=function(t,e){for(var n,i,r,o=t.length,s=this._ElementManagerFactory.create,a=this._CommentManagerFactory.create,u=this._TextManagerFactory.create,c=0;c<o;++c){switch(n=t[c],n.nodeType){case Node.ELEMENT_NODE:i=s(n,e),b(i)||this._compileNodes(Array.prototype.slice.call(n.childNodes),i);break;case Node.TEXT_NODE:u(n,e);break;case Node.COMMENT_NODE:a(n,e)}r=t.length,c+=r-o,o=r}},t._inject={_ElementManagerFactory:ue,_TextManagerFactory:he,_CommentManagerFactory:se,_managerCache:fe},t}();t.Compiler=s,Pt.injectable(oe,s);var u=function(){function t(){this.isClone=!1}return t.hasMarkup=function(e){return t._markupRegex.test(e)},t.findMarkup=function(e){var n,i,r,o,s=Cr.length,a=xr.length,u=xr[a-1],c=[],l=t._wrapExpression,h=t._parser;for(e=e.replace(t._newLineRegex,"");(n=e.indexOf(Cr))!==-1&&(i=e.indexOf(xr))!==-1;){for(0!==n&&c.push(l(e.slice(0,n)));e[i++]!==u||e[i]===u;);r=e.slice(n+s,i-a),"="===r[0]?(o=h.parse(r.slice(1).trim()),o.oneTime=!0,c.push(o)):c.push(h.parse(r.trim())),e=e.slice(i)}return n>=0&&i>=0?c.push(l(e.slice(i))):""!==e&&c.push(l(e)),c},t.build=function(e,n){for(var i,r,o="",s=e.length,u={},c=t._TemplateControlFactory.evaluateExpression,l=0;l<s;++l)if(i=e[l],r=c(i,n,u),a(r))try{o+=JSON.stringify(r,null,4)}catch(e){b(e.description)||(e.description="Cannot stringify object: "+e.description),e.message="Cannot stringify object: "+e.message,t._log.warn(e)}else b(r)||(o+=r);return o},t.observeExpressions=function(e,n,i){for(var r,o,s,a,u=t.__findUniqueIdentifiers(e),c=u.identifiers,l=u.oneTimeIdentifiers,h={listener:i,uid:n.uid};c.length>0;)o=t.__getObservationDetails(c.pop(),n),s=o.manager,b(s)||s.observe(o.absoluteIdentifier,h);for(;l.length>0;)if(r=l.pop(),o=t.__getObservationDetails(r,n),s=o.manager,!b(s)&&!o.isDefined){a=o.absoluteIdentifier;var p=s.observe(a,h),_=s.observe(a,{uid:n.uid,listener:function(){p(),_()}})}},t._wrapExpression=function(t){return{evaluate:function(){return t},identifiers:[],aliases:[],expression:t}},t.__findUniqueIdentifiers=function(t){var e,n=t.length;if(1===n)return e=t[0],e.oneTime===!0?{identifiers:[],oneTimeIdentifiers:e.identifiers.slice(0)}:{identifiers:e.identifiers.slice(0),oneTimeIdentifiers:[]};for(var i,r,o,s,a,u={},c={},l=[],h=[],p=0;p<n;++p)for(e=t[p],a=e.oneTime,i=e.identifiers,s=i.length,o=0;o<s;++o)if(r=i[o],a){if(u[r]===!0)continue;c[r]||(c[r]=!0,h.push(r))}else u[r]||(u[r]=!0,l.push(r)),c[r]===!0&&(c[r]=!1,h.splice(h.indexOf(r),1));return{identifiers:l,oneTimeIdentifiers:h}},t.__getObservationDetails=function(e,n){var i,r=t._ContextManager,o=e.split("."),s="",a=!1;if("@"===e[0]){var u=void 0,c={},l=o.shift(),h=l.slice(1);if(o.length>0&&(s="."+o.join(".")),u=c[h],b(u)&&(u=c[h]=n.findResource(h)),!b(u)&&!b(u.resource)){var p=u.resource.type;h===to?(i=r.getManager(Ho.getRootControl(n)),s=n.absoluteContextPath+s):h===Jr?(i=r.getManager(c[h].control),s="context"+s):p!==Hr&&p!==Xr||(i=r.getManager(c[h].control),s="resources."+h+".value"+s)}}else a=!C(r.getContext(n.context,o)),a||C(r.getContext(n,o))?(i=r.getManager(Ho.getRootControl(n)),s=n.absoluteContextPath+"."+e):i=null;return{absoluteIdentifier:s,manager:i,isDefined:a}},t.prototype.initialize=function(t,e){this.nodeMap=t,this.parent=e,b(e)||(this.isClone=e.isClone,e.children.push(this))},t.prototype.getParentControl=function(){for(var t,e=this.parent;b(t)&&!b(e);)t=e.getUiControl(),e=e.parent;return t},t.prototype.clone=function(t,e){return 1},t.prototype.bind=function(){},t}();t.NodeManager=u,t.INodeManagerStatic=n,Pt.injectable(le,n,[te,ie,Zt,Ne,Kt],Er);var c=function(t){function e(){t.apply(this,arguments),this.children=[],this.type="element",this.replace=!1,this.hasOwnContext=!1}return __extends(e,t),e.create=function(t,n){var i,r=t.nodeName.toLowerCase(),o=r,s=Eo[r]||wo[r],a=!0,u=!1;if(b(s)&&(t.hasAttribute(Wn)?(r=t.getAttribute(Wn).toLowerCase(),s=Eo[r]||wo[r],a=!1):t.hasAttribute(Zn+Wn)&&(r=t.getAttribute(Zn+Wn).toLowerCase(),s=Eo[r]||wo[r],a=!1)),!b(s)){var c=s.inject(),l=e.locateResources(t);i={control:c,resourceElement:l,nodeName:r,expressions:[],injector:s},u=!0,a&&t.setAttribute(Wn,r);var h=c.replaceWith,p="any"===h&&a;if(!v(h)&&("any"!==h||p)&&h.toLowerCase()!==o){p&&(h="div");var f=e._document.createElement(h);f.nodeType===Node.ELEMENT_NODE&&(t=et(t,f))}}var d=e._collectAttributes(t.attributes),m=e.getInstance();return d.element=t,!u&&_(d.childContext)?(s=No[ke],u=!0,d.uiControlNode={control:s.inject(),resourceElement:null,nodeName:Jn,expressions:[],injector:s}):d.uiControlNode=i,m.initialize(d,n),d.hasControl||u?(m.setUiControlTemplate(),u?null:m):(m.bind=function(){return[]},m)},e.locateResources=function(t){for(var e,n,i=Array.prototype.slice.call(t.childNodes);i.length>0;)if(e=i.shift(),n=e.nodeName.toLowerCase(),n===Xn||n==="x-"+Xn)return t.removeChild(e);return null},e.clone=function(t,n,i,r,o){b(o)&&(o=e._cloneNodeMap(t.nodeMap,i,n.getUiControl()||n.getParentControl(),r));var s=e.getInstance(),a=!b(r);return s.nodeMap=o,s.parent=n,b(n)||n.children.push(s),s.replace=t.replace,s.replaceNodeLength=t.replaceNodeLength,s.hasOwnContext=t.hasOwnContext,s.isClone=!0,o.hasControl||a||(s.bind=function(){return[]}),a&&e._managerCache.put(r.uid,s),s},e.cloneUiControl=function(t,n){var i=t.uiControlNode;if(!b(i)&&!b(i.injector)){var r=i.control,o=i.injector.inject(),s=e._ResourcesFactory.getInstance(),a=e._AttributesFactory.getInstance();return o.parent=n,n.controls.push(o),o.controls=[],a.initialize(o,t.attributes),o.attributes=a,s.initialize(o,r.resources),o.resources=s,e._ResourcesFactory.addControlResources(o),b(r.innerTemplate)||(o.innerTemplate=r.innerTemplate.cloneNode(!0)),o.type=r.type,o.bindableTemplates=e._BindableTemplatesFactory.create(o,r.bindableTemplates),o.replaceWith=r.replaceWith,o}},e.createAttributeControls=function(t,n,i,r,o){var s,a=t.nodes,u=o===!0?r:t.element;if(l(u)){if(u.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return o===!0?e._copyAttributeNodes(a):[];s=u.attributes}var c,h,p,f,d,v,m=t.attributes,C=[],x=a.length;for(v=0;v<x;++v)h=a[v],d=h.nodeName,p=h.injector,f=null,b(p)||(f=p.inject(),h.control=f,f.parent=n,f.element=u,c=e._AttributesFactory.getInstance(),c.initialize(f,m),f.attributes=c,f.type=d,_(f.uid)||(f.uid=z(Xe)),f.templateControl=i),o===!0&&(C.push({control:f,expressions:h.expressions,node:s?s.getNamedItem(d)||s.getNamedItem(Zn+d):null,nodeName:d,injector:p}),b(f)||(b(n)||n.controls.push(f),y(f.initialize)&&f.initialize()));if(!o)for(a.sort(function(t,e){var n=t.control,i=e.control;if(b(n))return 1;if(b(i))return-1;var r=g(n.priority)?n.priority:0,o=g(i.priority)?i.priority:0;return o-r}),v=0;v<x;++v)h=a[v],f=h.control,b(f)||(b(n)||n.controls.push(f),y(f.initialize)&&f.initialize());return C},e.getInstance=function(){var t=new e;return t._Promise=dt($t),t._ContextManager=u._ContextManager,t._compiler=dt(oe),t._CommentManagerFactory=dt(se),t._ControlFactory=dt(qt),t._TemplateControlFactory=u._TemplateControlFactory,t._BindableTemplatesFactory=e._BindableTemplatesFactory,t._log=e._log,t},e._collectAttributes=function(t){for(var n,i,r,o,s,a,c,l,h=[],p=u.hasMarkup,_=u.findMarkup,f=u._parser,d=!1,v=t.length,m={},g=0;g<v;++g)n=t[g],r=n.value,i=n.name.replace(/^data-/i,"").toLowerCase(),l=Eo[i]||wo[i],i===Gn?""!==r&&(o=f.parse(r),1!==o.identifiers.length&&e._log.warn("Incorrect "+Gn+": "+r+", must contain a single identifier."),s=o.identifiers[0]):i!==Wn&&(a=p(r),c=a?_(r):[],d||!a&&b(l)||(d=!0),h.push({control:null,node:n,nodeName:i,expressions:c,injector:l})),m[B(i)]=r;return{element:null,attributes:m,nodes:h,childContext:s,hasControl:d}},e._copyAttributeNodes=function(t){for(var e,n=[],i=t.length,r=0;r<i;++r)e=t[r],n.push({expressions:e.expressions,nodeName:e.nodeName});return n},e._cloneNode=function(t,e,n){return{control:n,injector:t.injector,expressions:t.expressions,node:e,nodeName:t.nodeName}},e._cloneNodeMap=function(t,n,i,r){var o=t.hasControl,s={attributes:t.attributes,childContext:t.childContext,nodes:[],element:n,uiControlNode:b(t.uiControlNode)?null:e._cloneNode(t.uiControlNode,n,r),hasControl:o};return o&&(s.nodes=e.createAttributeControls(t,i,r,n,!0)),s},e.prototype.clone=function(t,n,i){var r,o,s,a,u=this.replace,c=this.children,l=b(i)?null:i.uiControlNode.control,h=!b(l);if(h||(l=e.cloneUiControl(this.nodeMap,n.getUiControl()||n.getParentControl()),h=!b(l)),u){var p=t.parentNode.childNodes,_=Array.prototype,f=_.indexOf.call(p,t);r=_.slice.call(p,f+1,f+this.replaceNodeLength),o=e.clone(this,n,null,l,i),l.elementNodes=r,l.startNode=t,l.endNode=r.pop(),s=c.shift(),a=c.shift(),s.clone(l.startNode,o),a.clone(l.endNode,o),y(l.initialize)&&l.initialize()}else r=Array.prototype.slice.call(t.childNodes),o=e.clone(this,n,t,l,i),i=o.nodeMap,h&&(l.element=t,y(l.initialize)&&l.initialize());for(var d=c.length,v=0,m=0;m<d;++m)v+=c[m].clone(r[v],o);return u?(c.unshift(a),c.unshift(s),v+2):1},e.prototype.initialize=function(n,i,r){t.prototype.initialize.call(this,n,i);var o,s=n.uiControlNode,a=!b(s);a&&(this._populateUiControl(),o=s.control,this.hasOwnContext=o.hasOwnContext),n.hasControl&&e.createAttributeControls(n,this.getParentControl(),o),!r&&a&&y(o.initialize)&&o.initialize()},e.prototype.bind=function(){var t=this,e=this.nodeMap,n=this.getParentControl(),i=e.uiControlNode,r=[];if(!b(i)){var o,s=i.control,u=e.childContext,c=this._ContextManager.getManager,l=b(n)?Ft:n.absoluteContextPath,h=this._TemplateControlFactory,p=!s.hasOwnContext;if(r.push(s),p&&!b(u))if("@"===u[0]){var _=u.split("."),f=_.shift(),d=f.slice(1),v=h.findResource(s,d);if(a(v)){var m=v.resource;u=_.length>0?"."+_.join("."):"",d===to?l+=u:d===Jr?l=Ft+u:m.type===Hr||m.type===Xr?(l="resources."+d+".value"+u,s.root=v.control):this._log.warn('Only resources of type "observable" can be set as context.')}else this._log.warn("Could not set the context of "+s.type+' with the resource specified as "'+u+'".')}else l+="."+u;a(s.root)||(s.root=this._ControlFactory.getRootControl(s)||s),o=c(s.root);var g=!1;p?(s.context=o.getContext(l.split("."),!1),g=C(s.context)&&!this._BindableTemplatesFactory.isBoundControl(s)):l=Ft,g?this.contextPromise=new this._Promise(function(e,n){var i=o.observe(l,{uid:s.uid,listener:function(n,r){C(n)||(i(),s.context=n,t._beforeLoad(s,l),e())}})}):this._beforeLoad(s,l)}return this._observeControlIdentifiers(e.nodes,n,r,e.element),r},e.prototype.setUiControlTemplate=function(t){var e=this,n=this.nodeMap.uiControlNode;if(!b(n)){var i=n.control;return void(this.templatePromise=this._TemplateControlFactory.determineTemplate(i,t).then(function(t){e.templatePromise=null,e._initializeControl(i,t.cloneNode(!0))},function(t){if(e.templatePromise=null,b(t)){var n=t;e._BindableTemplatesFactory.isBoundControl(i)&&(n=W(i.element.childNodes)),e._initializeControl(i,n)}else O(function(){_(t)&&(t=new Error(t)),e._log.error(t)})}))}b(this.parent)&&this.bindAndLoad()},e.prototype.getUiControl=function(){var t=this.nodeMap.uiControlNode;if(!b(t))return t.control},e.prototype.fulfillTemplate=function(){var t=this;return b(this.templatePromise)?this._fulfillChildTemplates():this.templatePromise.then(function(){return t._fulfillChildTemplates()})},e.prototype.fulfillAndLoad=function(){var t=this;return this.fulfillTemplate().then(function(){return t.bindAndLoad()}).catch(function(e){O(function(){_(e)&&(e=new Error(e)),t._log.error(e)})})},e.prototype.bindAndLoad=function(){var t,e=this,n=this.bind();return t=d(this.contextPromise)?this.contextPromise.then(function(){return e._bindChildren()}):this._bindChildren(),t.then(function(){return e._loadControls(n,e.getUiControl())}).catch(function(t){O(function(){_(t)&&(t=new Error(t)),e._log.error(t)})})},e.prototype.observeRootContext=function(t,e){var n=this;return e=e.bind(this),b(t.context)?new this._Promise(function(i){var r=n._ContextManager.getManager(t).observe(Ft,{listener:function(){r(),e().then(i)},uid:t.uid})}).catch(function(t){O(function(){_(t)&&(t=new Error(t)),n._log.error(t)})}):e()},e.prototype._beforeLoad=function(t,n){var i=this._ContextManager.getManager(t.root),r=this._TemplateControlFactory;t.zCC__plat=i.observe(n,{uid:t.uid,priority:br,listener:function(e,n){t.context=e}}),r.setAbsoluteContextPath(t,n),r.setContextResources(t),e._ResourcesFactory.bindResources(t.resources)},e.prototype._bindChildren=function(){for(var t,e=this.children,n=e.length,i=[],r=0;r<n;++r)t=e[r],t.hasOwnContext?this.isClone?i.push(t.observeRootContext(t.getUiControl(),t.bindAndLoad)):i.push(t.observeRootContext(t.getUiControl(),t.fulfillAndLoad)):C(t.children)?t.bind():i.push(t.bindAndLoad());return this._Promise.all(i)},e.prototype._loadControls=function(t,e){var n,i,r,o,s=t.length,a=this._ControlFactory.load,u=b(e);if(u)o=0;else{var c=e.priority;r=g(c)?c:100,o=1}for(;o<s;++o)n=t[o],n.templateControl=e,!u&&r>n.priority&&(u=!0,i=a(e)),a(n);return u||(i=a(e)),i},e.prototype._populateUiControl=function(){var t=this.nodeMap,n=this.getParentControl(),i=t.uiControlNode,r=i.control,o=r.uid,s=r.resources,u=t.element,c=Array.prototype.slice.call(u.childNodes),l=e._AttributesFactory.getInstance(),h=this.replace=null===r.replaceWith||""===r.replaceWith;_(o)||(o=r.uid=z(Xe)),e._managerCache.put(o,this),b(n)||r.parent===n||(n.controls.push(r),r.parent=n),y(u.setAttribute)&&u.setAttribute(Di,""),r.element=u,r.controls=[],l.initialize(r,t.attributes),r.attributes=l,a(s)&&y(s.add)?s.add(i.resourceElement):(s=e._ResourcesFactory.getInstance(),s.initialize(r,i.resourceElement),r.resources=s),e._ResourcesFactory.addControlResources(r),r.type=i.nodeName,r.bindableTemplates=r.bindableTemplates||this._BindableTemplatesFactory.create(r),!(c.length>0)||v(r.templateString)&&v(r.templateUrl)||(r.innerTemplate=W(c)),h&&this._replaceElement(r,t)},e.prototype._replaceElement=function(t,n){var i=n.element,r=i.parentNode,o=e._document,s=t.type,a=t.uid,u=t.startNode=o.createComment(s+" "+a+jr),c=t.endNode=o.createComment(s+" "+a+Lr),l=this._CommentManagerFactory.create;l(u,this),l(c,this),r.insertBefore(u,i),r.insertBefore(c,i.nextSibling),t.elementNodes=tt(i),t.element=n.element=null},e.prototype._initializeControl=function(t,n){var i,r=this.nodeMap.element,o=this.replace;if(!b(n)){var s=e.locateResources(n);b(s)||t.resources.add(e._ResourcesFactory.parseElement(s)),o?(i=t.endNode,t.elementNodes=Array.prototype.slice.call(n.childNodes),Z(i.parentNode,n,i)):Z(r,n,r.lastChild)}if(y(t.setTemplate)&&t.setTemplate(),o){this._compiler.compile(t.elementNodes,t);var a=t.startNode,u=a.parentNode,c=Array.prototype.slice.call(u.childNodes);i=t.endNode,t.elementNodes=c.slice(c.indexOf(a)+1,c.indexOf(i)),this.replaceNodeLength=t.elementNodes.length+2}else this._compiler.compile(r,t);b(t.parent)&&this.fulfillAndLoad()},e.prototype._observeControlIdentifiers=function(t,e,n,i){for(var r,o,s,a=t.length,c=!b(e),l=0,h=this.replace,p=[];l<a;++l)r=t[l],o=r.control,c&&r.expressions.length>0&&(s=f.getInstance(),p.push(s),s.initialize(i,r,e,n,h),u.observeExpressions(r.expressions,e,s.attributeChanged.bind(s))),b(o)||n.push(o);for(a=p.length,l=0;l<a;++l)p[l].attributeChanged()},e.prototype._fulfillChildTemplates=function(){for(var t,e=this,n=this.children,i=n.length,r=[],o=0;o<i;++o)t=n[o],C(t.children)||r.push(t.fulfillTemplate());return this._Promise.all(r).catch(function(t){O(function(){_(t)&&(t=new Error(t)),e._log.error(t)})})},e._inject={_Promise:$t,_ContextManager:ie,_compiler:oe,_CommentManagerFactory:se,_ControlFactory:qt,_TemplateControlFactory:Ne,_BindableTemplatesFactory:ye,_log:Kt},e}(u);t.ElementManager=c,t.IElementManagerFactory=i,Pt.injectable(ue,i,[Qt,fe,we,me,ye,Kt],Nr),Pt.injectable(ce,c,null,Tr);var h=function(t){function n(){t.apply(this,arguments),this.type="text"}return __extends(n,t),n.create=function(t,i){var r=t.nodeValue,o=new n;if(u.hasMarkup(r)){var s=u.findMarkup(r),a={nodes:[{node:t,expressions:s}]};return o.initialize(a,i),o}return o.initialize(null,i),o.bind=e,o},n._cloneNodeMap=function(t,e){var n=t.nodes[0],i={nodes:[{expressions:n.expressions,nodeName:n.nodeName,node:e}]};return i},n._clone=function(t,i,r){var o=t.nodeMap,s=new n;return b(o)?(s.initialize(null,r),s.bind=e):s.initialize(n._cloneNodeMap(o,i),r),s},n.prototype.clone=function(t,e){return n._clone(this,t,e),1},n.prototype.bind=function(){var t=this.getParentControl(),e=this.nodeMap.nodes[0],n=e.node,i=e.expressions;u.observeExpressions(e.expressions,t,this._setText.bind(this,n,t,i)),this._setText(n,t,i)},n.prototype._setText=function(t,e,n){t.nodeValue=u.build(n,e||{})},n}(u);t.TextManager=h,t.ITextManagerFactory=r,Pt.injectable(he,r,null,Nr),Pt.injectable(pe,h,null,Tr);var p=function(t){function e(){t.apply(this,arguments),this.type="comment"}return __extends(e,t),e.create=function(t,n){var i=new e;return i.initialize({nodes:[{node:t}]},n),i},e.prototype.clone=function(t,n){return e.create(t,n),1},e}(u);t.CommentManager=p,t.ICommentManagerFactory=o,Pt.injectable(se,o,null,Nr),Pt.injectable(ae,p,null,Tr);var f=function(){function t(){this._lastValues={}}return t.getInstance=function(){var e=new t;return e._NodeManager=dt(le),e},t.prototype.initialize=function(t,e,n,i,r){this.element=t,this.node=e,this.parent=n,this._controls=i,this.replace=r,e.nodeName!==kr?this.attributeChanged=this._staticAttributeChanged:this.attributeChanged=this._dynamicAttributeChanged},t.prototype._dynamicAttributeChanged=function(){var t,e,n=this.node,i=n.node,r=this._NodeManager,o=i.value,s=r.build(n.expressions,this.parent).trim().split(/\s+/),a=this._lastValues,u=this.element,c=s.length;if(r.hasMarkup(o)){for(var l=void 0,h=void 0,p=(Cr.length,xr.length),_=xr[p-1];(l=o.indexOf(Cr))!==-1&&(h=o.indexOf(xr))!==-1;){for(;o[h++]!==_||o[h]===_;);o=o.slice(0,l).trim()+" "+o.slice(h).trim()}i.value=o.trim()}for(e=0;e<c;++e)a[s[e]]=!0;for(s=Object.keys(a),c=s.length,e=0;e<c;++e)t=s[e],a[t]?(at(u,t),a[t]=!1):($(a,t),ut(u,t));this._notifyAttributes(n.nodeName,i.value)},t.prototype._staticAttributeChanged=function(){var t=(this._controls,this.node),e=B(t.nodeName),n=this._NodeManager.build(t.expressions,this.parent);this._notifyAttributes(e,n),this.replace||(t.node.value=n)},t.prototype._notifyAttributes=function(t,e){for(var n,i,r=this._controls,o=r.length,s=0;s<o;++s)n=r[s].attributes,i=n[t],n[t]=e,n._attributeChanged(t,e,i)},t}();t.AttributeManager=f}(Yo=t.processing||(t.processing={}));var Xo;!function(t){function n(t){return t.history}function i(t){return m._regex=t,m}function r(){return S}function s(){return O}var u=function(){function t(){this.uid=z(Xe),this.isRoot=!1,this._removeUrlListener=e,this._ignoreOnce=!1,this._backNavigate=!1}return t.prototype.initialize=function(e){this._router=e,a(e)&&e.isRoot&&!a(t._root)&&(this.isRoot=!0,t._root=this,this._observeUrl())},t.prototype.navigate=function(t,e){var n=this;e=a(e)?e:{};var i;return this.finishNavigating().then(function(){if(i=e.isUrl?t:n._generate(t,e.parameters,e.query),!_(i)){var r=new Error("Cannot serialize url from input parameters, check your view reference.");n._log.error(r)}return n._navigate(i,e.replace)})},t.prototype.finishNavigating=function(){var n=t._root._router;return n.navigating?n.finishNavigating.catch(e):this._Promise.resolve()},t.prototype.goBack=function(e){var n=this;e=a(e)?e:{};var i=Number(e.length);return g(i)||(i=1),this.isRoot?this.finishNavigating().then(function(){return n._backNavigate=!0,n._goBack(i)}):t._root.goBack(e)},t.prototype.isBackNavigation=function(){return this.isRoot?this._backNavigate:t._root.isBackNavigation()},t.prototype.dispose=function(){this._removeUrlListener(),$(this,"router")},t.prototype._navigate=function(e,n){var i=this;return this.isRoot?new this._Promise(function(t,r){i._resolveNavigate=t,i._rejectNavigate=r;var o=i._browser.url(),s=i._browser.url(e,n);o===s&&i._resolveNavigate()}):t._root._navigate(e,n)},t.prototype._goBack=function(t){var e=this;return new this._Promise(function(n,i){e._resolveNavigate=n,e._rejectNavigate=i,e._browser.back(t)})},t.prototype._observeUrl=function(){var t=this;if(a(this._router)){var e,n=this._EventManager,i=dt(ei),r=a(i)&&y(i.navigated),o=function(n){t._previousUrl=e;var i=t._history,r=i.state;t._ignoreOnce=!0,b(r.previousLocation)||r.previousLocation===e?i.go(-1):i.go(1),t._backNavigate=!1,y(t._rejectNavigate)&&t._rejectNavigate(n),v(n)||t._log.warn(n)};this._previousUrl=this._browser.url(),n.dispose(this.uid),n.on(this.uid,Oi,function(){var e=n.dispatch(Mi,t,n.DIRECT);e.defaultPrevented||t.goBack()}),n.on(this.uid,ji,function(s,a){return t._ignoreOnce?(t._ignoreOnce=!1,void(y(t._resolveNavigate)&&(t._backNavigate=!1,t._resolveNavigate()))):(e=t._previousUrl,s=n.dispatch(Ii,t,n.DIRECT,[a]),s.defaultPrevented?void o(new Error("Navigation prevented during "+Ii+" event")):void t.finishNavigating().then(function(){return n.dispatch(Ai,t,n.DIRECT,[a]),t._router.navigate(a.pathname,a.query)}).then(function(){t._previousUrl=a.pathname,y(t._resolveNavigate)&&(t._backNavigate=!1,t._resolveNavigate()),r&&i.navigated(a.href),n.dispatch(Ri,t,n.DIRECT,[a])},o))})}},t.prototype._generate=function(t,e,n){if(!b(this._router))return v(t)?t:this._router.generate(t,e,n)},t._inject={_Promise:$t,_Injector:Qe,_browserConfig:Re,_browser:Ie,_EventManager:Xt,_window:Pe,_log:Kt,_history:We},t}();t.Navigator=u,Pt.injectable(ne,u,null,Tr),t.History=n,Pt.injectable(We,n,[Pe]);var c,l=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],h=new RegExp("(\\"+l.join("|\\")+")","g"),p={},f={},d={},m=function(){function t(){this.type=dr,this.name="",this.regex=""}return t.parse=function(e,n,i){if(!(_(e)&&x(n)&&a(i)))return[];"/"===e[0]&&(e=e.slice(1));for(var r,o,s,u=e.split("/"),l=u.length,h=t.__findSegment,v=[],m=t._regex,g=0;g<l;++g)r=u[g],""===r?(a(c)||(c=dt(De)),v.push(c)):(s=r.match(m.dynamicSegmentsRegex))?(o=s[1],v.push(h(o,Ue,p)),n.push(o),i.dynamics++):(s=r.match(m.splatSegmentRegex))?(o=s[1],v.push(h(o,$e,f)),n.push(o),i.splats++):(v.push(h(r,ze,d)),i.statics++);return v},t.__findSegment=function(t,e,n){var i=n[t];return a(i)||(i=n[t]=dt(e),i.initialize(t)),i},t.prototype.initialize=function(t){this.name=t},t.prototype.reduceCharacters=function(t,e){return a(this._specification)&&(e=t(e,this._specification)),e},t.prototype.generate=function(t){return this.name},t}();t.BaseSegment=m,t.IBaseSegmentFactory=i,Pt.injectable(Me,i,[te],Nr),Pt.injectable(De,m,null,Tr);var E=function(t){function e(){t.apply(this,arguments),this.type=mr}return __extends(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.regex=this.name.replace(h,"\\$1")},e.prototype.reduceCharacters=function(t,e){for(var n=this.name,i=n.length,r=e,o=0;o<i;++o)r=t(r,{validCharacters:n[o]});return r},e}(m);t.StaticSegment=E,Pt.injectable(ze,E,null,Tr);var w=function(t){function e(){t.apply(this,arguments),this.type=vr}return __extends(e,t),e.prototype.generate=function(t){if(a(t))return t[this.name]},e}(m);t.VariableSegment=w,Pt.injectable(Be,w,null,Tr);var T=function(t){function e(){t.apply(this,arguments),this.type=gr,this.regex="(.+)",this._specification={invalidCharacters:"",repeat:!0}}return __extends(e,t),e}(w);t.SplatSegment=T,Pt.injectable($e,T,null,Tr);var N=function(t){function e(){t.apply(this,arguments),this.type=yr,this.regex="([^/]+)",this._specification={invalidCharacters:"/",repeat:!0}}return __extends(e,t),e}(w);t.DynamicSegment=N,Pt.injectable(Ue,N,null,Tr);var S=function(){
function t(){this.initialize()}return t.compile=function(t,e){return t.reduceCharacters(function(t,e){return t.add(e)},e)},t.link=function(t,e){for(var n,i,r,o,s,a=t.delegates,u=t.regex,c=a.length,l=e.match(u),h=1,p=[],_=0;_<c;++_){for(s=a[_],n=s.names,i={},r=0,o=n.length;r<o;++r)i[n[r]]=l[h++];p.push({delegate:s.delegate,parameters:i,isDynamic:o>0})}return p},t.recognize=function(t,e){for(var n,i=[],r=e.length,o=0;o<r;++o)n=e[o],i=i.concat(n.match(t));return i},t.sort=function(t){if(!x(t))return t;var e,n,i,r,o,s,a,u;return t.sort(function(t,c){if(e=t.types,o=c.types,n=e.splats,s=o.splats,n!==s)return n-s;if(i=e.statics,r=e.dynamics,a=o.statics,u=o.dynamics,n>0){if(i!==a)return a-i;if(r!==u)return u-r}return r!==u?r-u:i!==a?a=i:0})},t.prototype.initialize=function(t){this.specification=t,this.nextStates=[]},t.prototype.add=function(e){var n=this._find(e);return a(n)?n:(n=dt(t),n.initialize(e),this.nextStates.push(n),e.repeat&&n.nextStates.push(n),n)},t.prototype.match=function(t){var e,n,i=[];return this._someChildren(function(r){return e=r.specification,n=e.validCharacters,_(n)&&n.indexOf(t)>-1?void i.push(r):(n=e.invalidCharacters,void(_(n)&&n.indexOf(t)===-1&&i.push(r)))}),i},t.prototype._find=function(t){var e,n,i=t.validCharacters,r=t.invalidCharacters;return this._someChildren(function(t){if(e=t.specification,e.validCharacters===i&&e.invalidCharacters===r)return n=t,!0}),n},t.prototype._someChildren=function(t){for(var e=this.nextStates,n=e.length,i=0;i<n;++i)if(t(e[i])===!0)return!0;return!1},t}();t.State=S,t.IStateStatic=r,Pt.injectable(Ve,r,null,Er),Pt.injectable(qe,S,null,Tr);var R=function(){function t(){this._namedRoutes={}}return t.prototype.register=function(t,e){if(x(t)){for(var n,i=this._rootState,r=t.length,o=["^"],s={statics:0,dynamics:0,splats:0},u=[],c=[],l=0;l<r;++l)n=this._parse(t[l],u,s),c=c.concat(n),i=this._compile(n,i,o);i=this._finalize(i,o),i.delegates=u,i.regex=new RegExp(o.join("")+"$"),i.types=s,a(e)&&_(e.name)&&(this._namedRoutes[this._toLowerCase(e.name)]={segments:c,delegates:u})}},t.prototype.recognize=function(t){var e=!1,n=[];return t=this._addLeadingSlash(t),e=this._hasTrailingSlash(t),e&&(t=t.substr(0,t.length-1)),n=this._filter(this._findStates(t)),this._link(n[0],t,e)},t.prototype.generate=function(t,e){t=this._toLowerCase(t);var n,i,r=this._namedRoutes[t],o="";if(a(r)){n=r.segments,i=n.length;for(var s=0;s<i;s++){var u=n[s];u.type!==dr&&(o+="/",o+=u.generate(e))}return o=this._addLeadingSlash(o)}},t.prototype.delegatesFor=function(t){t=this._toLowerCase(t);var e,n=this._namedRoutes[t];return a(n)?(e=n.delegates,x(e)?e.slice(0):[]):[]},t.prototype.exists=function(t){return a(this._namedRoutes[this._toLowerCase(t)])},t.prototype._toLowerCase=function(t){return _(t)?t.toLowerCase():t},t.prototype._finalize=function(t,e){return t===this._rootState&&(t=t.add({validCharacters:"/"}),e.push("/")),t},t.prototype._parse=function(t,e,n){var i=[];return e.push({delegate:t.delegate,names:i}),this._BaseSegmentFactory.parse(t.pattern,i,n)},t.prototype._compile=function(t,e,n){for(var i,r=t.length,o=this._State.compile,s=0;s<r;++s)i=t[s],i.type!==dr&&(e=e.add({validCharacters:"/"}),e=o(i,e),n.push("/"+i.regex));return e},t.prototype._addLeadingSlash=function(t){return t=decodeURI(t),"/"!==t[0]&&(t="/"+t),t},t.prototype._hasTrailingSlash=function(t){var e=t.length;return e>1&&"/"===t[e-1]},t.prototype._findStates=function(t){for(var e=[this._rootState],n=this._State.recognize,i=t.length,r=0;r<i&&(e=n(t[r],e),0!==e.length);++r);return e},t.prototype._filter=function(t){for(var e,n=t.length,i=[],r=0;r<n;++r)e=t[r],x(e.delegates)&&i.push(e);return this._State.sort(i)},t.prototype._link=function(t,e,n){if(a(t)&&x(t.delegates))return n&&this._isDynamic(t)&&(e+="/"),this._State.link(t,e)},t.prototype._isDynamic=function(t){return"(.+)$"===t.regex.source.slice(-5)},t._inject={_BaseSegmentFactory:Me,_State:Ve,_rootState:qe},t}();t.RouteRecognizer=R,Pt.injectable(He,R,null,Tr);var j="/*childRoute",L=j.length,O=function(){function t(){this.navigating=!1,this.children=[],this.isRoot=!1,this._paramTransforms={},this._queryTransforms={},this._interceptors={},this._ports=[],this._resolve=this._Promise.resolve.bind(this._Promise),this._reject=this._Promise.reject.bind(this._Promise),this.uid=z(Xe),this.isRoot=b(t.currentRouter()),t.currentRouter(this),this.initialize()}return t.currentRouter=function(e){return b(e)||(t.__currentRouter=e),t.__currentRouter},t.prototype.initialize=function(t){this.parent=t},t.prototype.addChild=function(t){return b(t)||this.children.indexOf(t)>-1?t:(t.initialize(this),this.children.push(t),t)},t.prototype.removeChild=function(e){var n=this.children,i=n.indexOf(e);if(!(i<0)){n.splice(i,1);var r=t.currentRouter();r===e&&t.currentRouter(this)}},t.prototype.register=function(t){var n=this,i=this._ports;return b(t)||i.indexOf(t)>-1?this._resolve():(i.push(t),a(this.currentRouteInfo)?(this.navigating=!0,this._resolve(this.finishNavigating).catch(e).then(function(){var t=o(n.currentRouteInfo,!0);return n.finishNavigating=n._canNavigateTo(t).then(function(e){if(e)return n.currentRouteInfo=void 0,n._performNavigation(t)}).then(function(){n.navigating=!1,n.currentRouteInfo=t},function(){n.navigating=!1})})):this._resolve())},t.prototype.unregister=function(t){var e=this._ports,n=e.indexOf(t);n<0||(e.splice(n,1),0!==e.length||b(this.parent)||this.parent.removeChild(this))},t.prototype.configure=function(t){var e=this;return x(t)?k(function(t){e._configureRoute(t)},t):this._configureRoute(t),this._forceNavigate()},t.prototype.unknown=function(t){return this._unknownHandler=t,this},t.prototype.param=function(t,e,n){return this._addHandler(t,e,n,this._paramTransforms)},t.prototype.queryParam=function(t,e,n){return this._addHandler(t,e,n,this._queryTransforms)},t.prototype.intercept=function(t,e){C(e)&&(e="*");var n=e;"*"!==e&&(e=this._Injector.convertDependency(e)),e===zr&&(e=n);var i=this._interceptors[e];return x(i)||(i=this._interceptors[e]=[]),i.push(t),this},t.prototype.navigate=function(t,e,n,i){var r=this;i===!1&&(i=!a(this.currentRouteInfo)),a(e)||(e={});var s=this._resolve,u=H(e);if("/"===t&&(t=""),n=n===!0,!_(t)||this.navigating||!n&&t===this._previousUrl&&u===this._previousQuery)return this.navigating?this.finishNavigating.then(function(){return r.navigate(t,e,n)}):s();var c,l,h,p=this._recognizer,f=p.recognize(t),d=v(f);d||(c=f[0],c.query=e);var m=this._isSameRoute(c);if(d||m){var g=t;if(m&&(h=p.generate(c.delegate.alias||c.delegate.view,c.parameters),g=g.replace(h,"")),"/"===g||""===g?(g="",P(function(t){return f=t._recognizer.recognize(g),!v(f)},this.children)):f=this._childRecognizer.recognize(g),v(f)){if(d){if(this._previousUrl=g,this._previousQuery=u,this.currentRouteInfo=c,y(this._unknownHandler)){var b={segment:t,view:void 0};return s(this._unknownHandler(b)).then(function(){var e=b.view;if(!C(e))return r.configure({pattern:t,view:e})})}return s()}f=p.recognize(t),c=f[0],c.query=e,l=c.delegate.pattern}else if(c=f[0],c.query=e,l=c.delegate.pattern,l=l.slice(0,l.length-L),!d||this._isSameRoute(c))return this.navigating=!0,this.finishNavigating=this._navigateChildren(c).then(function(){r._previousUrl=t,r._previousQuery=u,r.navigating=!1},function(t){throw r.navigating=!1,t})}else l=c.delegate.pattern;h=p.generate(c.delegate.alias||c.delegate.view,c.parameters);var x=this._previousSegment;this._previousSegment=h,this.navigating=!0;var E=this._nextRouteInfo=o(c,!0);return this.finishNavigating=this._canNavigate(c,i).then(function(e){if(!e)throw r.navigating=!1,new Error("Not cleared to navigate");return r._previousUrl=t,r._previousQuery=u,r._performNavigation(c)}).then(function(){r._previousPattern=l,r._previousSegment=h,r.currentRouteInfo=E,r.navigating=!1},function(t){throw r._previousSegment=x,r.navigating=!1,t})},t.prototype.generate=function(t,e,n){var i=t;t=this._Injector.convertDependency(t),t===zr&&(t=i);for(var r=this,o="";!b(r)&&!r._recognizer.exists(t);)r=r.parent;if(b(r))throw new Error("Route for "+t+" does not exist.");for(var s,a=r._recognizer.generate(t,e);!b(r=r.parent);)s=r._previousSegment,s=b(s)||"/"===s?"":s,o=s+o;return o+a+H(n)},t.prototype._configureRoute=function(t){var e=this._Injector.convertDependency(t.view),n=t.alias||e;if(e!==zr){t.view=e,t.alias=n||e;var i={pattern:t.pattern,delegate:t},r=t.pattern+j,o={pattern:r,delegate:{pattern:r,view:e,alias:n}};this._recognizer.register([i],{name:n}),this._childRecognizer.register([o])}},t.prototype._addHandler=function(t,e,n,i){C(n)&&(n="*");var r=n;if("*"!==n&&(n=this._Injector.convertDependency(n)),n===zr&&(n=r),v(n)||v(e))return this;var o=i[n];a(o)||(o=i[n]={});var s=o[e];return x(s)||(s=o[e]=[]),s.push(t),this},t.prototype._forceNavigate=function(){var t,e=this,n=this._resolve;if(this.navigating)return this.finishNavigating.then(function(){return e._forceNavigate()});if(this.isRoot&&v(this._previousUrl)){var i=this._browser.urlUtils();this._previousUrl=i.pathname,t=i.query}return v(this._previousQuery)||(t=q(this._previousQuery)),v(this._previousUrl)?n():this.navigate(this._previousUrl,t,!0)},t.prototype._navigateChildren=function(t,n){void 0===n&&(n=!0);var i=this._getChildRoute(t);return b(i)?this._resolve():I(function(e){return e.navigate(i,t.query,void 0,n)},this.children).then(e)},t.prototype._getChildRoute=function(t){if(!b(t)){var e=t.parameters.childRoute;return _(e)||(e=""),"/"+e}},t.prototype._performNavigation=function(t){var e=this,n=this._isSameRoute(this._nextRouteInfo);return this._performNavigateFrom(n).then(function(){if(!n)return I(function(e){return e.navigateTo(t)},e._ports)}).then(function(){return e._navigateChildren(t,!1)})},t.prototype._performNavigateFrom=function(t){var n=this;return I(function(t){return t._performNavigateFrom()},this.children).then(function(){if(!t)return I(function(t){return t.navigateFrom()},n._ports)}).then(e)},t.prototype._canNavigate=function(t,e){var n=this;void 0===e&&(e=!0);var i=this._isSameRoute(this._nextRouteInfo);return e?this._canNavigateFrom(i).then(function(e){return e&&n._canNavigateTo(t,i)}):this._callAllHandlers(t.delegate.alias,t.parameters,t.query).then(function(){return n._callInterceptors(t)}).then(function(){return!0},function(){return!0})},t.prototype._canNavigateFrom=function(t){var e=this;return this._Promise.all(this.children.reduce(function(t,e){return t.concat(e._canNavigateFrom())},[])).then(Q).then(function(n){return!n||t?[n]:I(function(t){return t.canNavigateFrom()},e._ports)}).then(Q)},t.prototype._canNavigateTo=function(t,e){var n=this;return v(this._ports)?this._resolve(!0):this._callAllHandlers(t.delegate.alias,t.parameters,t.query).then(function(){return n._callInterceptors(t)}).then(function(i){return i===!1||e?[i]:I(function(e){return e.canNavigateTo(t)},n._ports)}).then(Q)},t.prototype._callAllHandlers=function(t,n,i){var r=this;return this._callHandlers(this._queryTransforms["*"],i).then(function(){return r._callHandlers(r._queryTransforms[t],i)}).then(function(){return r._callHandlers(r._paramTransforms["*"],n,i)}).then(function(){return r._callHandlers(r._paramTransforms[t],n,i)}).then(e)},t.prototype._callHandlers=function(t,n,i){var r=this._resolve;return a(n)||(n={}),I(function(t,e){return A(function(t){return r(t(n[e],n,i))},t)},t).then(e)},t.prototype._callInterceptors=function(t){var e=this,n=this._resolve;return A(function(e){return n(e(t))},this._interceptors["*"]).then(Q).then(function(i){return i?I(function(e){return n(e(t))},e._interceptors[t.delegate.alias]):[i]}).then(Q)},t.prototype._isSameRoute=function(t){var e=o(this.currentRouteInfo,!0);if(t=o(t,!0),this._sanitizeRouteInfo(e),this._sanitizeRouteInfo(t),!a(e)||!a(t))return!1;var n=e.delegate,i=t.delegate,r=H(e.parameters),s=H(t.parameters),u=H(e.query),c=H(t.query);return n.view===i.view&&n.alias===i.alias&&n.pattern===i.pattern&&r===s&&u===c},t.prototype._sanitizeRouteInfo=function(t){if(a(t)&&t.parameters.hasOwnProperty("childRoute")){var e=t.delegate,n=e.pattern;e.pattern=n.slice(0,n.length-L),$(t.parameters,"childRoute")}},t.prototype._clearInfo=function(){this._previousSegment=void 0,this._previousPattern=void 0,this._previousUrl=void 0,this._previousQuery=void 0,this.currentRouteInfo=void 0,this.navigating=!1,k(function(t){t._clearInfo()},this.children)},t._inject={_Promise:$t,_Injector:Qe,_EventManager:Xt,_browser:Ie,_browserConfig:Re,_recognizer:He,_childRecognizer:He},t}();t.Router=O,Pt.injectable(Ae,O,null,Tr),t.IRouterStatic=s,Pt.injectable(je,s)}(Xo=t.routing||(t.routing={}));var Go;!function(t){var n=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.initialize=function(){var t=B(this.type),e=this.attributes[t];v(e)||this._isPrecompiled()||(this._label=e,this._define(e))},e.prototype.dispose=function(){for(var t=this._label,e=this.parent;!C(t)&&a(e);)a(e[t])&&l(e[t].element)&&e[t].element===this.element&&$(e,t),e=e.parent},e.prototype._define=function(t){var e=this.templateControl;b(e)||(e.name=t);for(var n=this.parent,i={element:this.element,control:e};a(n);){var r=n[t];a(r)||(n[t]=i),n=n.parent}},e.prototype._isPrecompiled=function(){for(var t=this.parent;!b(t);){if(t.type.indexOf(Ir)!==-1)return!0;t=t.parent}return!1},e}(Qo);t.Name=n,Pt.control(rn,n);var i=function(t){function n(){t.apply(this,arguments),this._aliases=[]}return __extends(n,t),n.prototype.loaded=function(){b(this.element)||(this.attribute=B(this.type),this._setListener())},n.prototype._setListener=function(){var t=this.attributes[this.attribute];v(this.event)||v(t)||(this._parseArgs(t),this._addEventListeners())},n.prototype._addEventListeners=function(){this.addEventListener(this.element,this.event,this._onEvent,!1)},n.prototype._buildExpression=function(){var t,n,i,r=this.parent,o=this.templateControl,s=this._listener,u=e;if(b(o)?b(r)||(n=r.getResources(this._aliases),i=r.context):(n=o.getResources(this._aliases),b(r)||(i=r.context)),"@"===s[0]){if(!b(n)){var c=s.split("."),l=n[c[0].slice(1)];if(a(l)){c.shift();for(var h=void 0;c.length>1&&(h=c.shift(),!b(l[h]));)l=l[h];1===c.length?(h=c.shift(),y(l[h])&&(t=l,u=l[h])):this._log.warn('Invalid path for function "'+s+'"')}else y(l)&&(u=l)}}else{var p=this.findProperty(s,this.templateControl);if(b(p))return this._log.warn("Could not find property "+s+" on any associated control."),{fn:e,context:{},args:[]};var _=p.expresssion,f=_.identifiers;if(f.length>1)return this._log.warn("Cannot have more than one identifier in a "+this.type+"'s expression."),{fn:e,context:{},args:[]};var d=f[0],v=d.split("."),m=p.control;if(v.pop(),v.length>0)for(var g=void 0;v.length>0&&(g=v.shift(),!b(m[g]));)m=m[g];u=p.value,t=m}return{fn:u,context:t,args:b(this._args)?[]:this._args.evaluate(i,n)}},n.prototype._onEvent=function(t){var e=this._buildExpression(),n=e.fn;return y(n)?void n.apply(e.context,e.args.concat(t)):void this._log.warn("Cannot find registered event method "+this._listener+" for control: "+this.type)},n.prototype._parseArgs=function(t){if(!v(t)){var e,n=this._regex.argumentRegex.exec(t),i=[];if(b(n))e=t;else if(e=t.slice(0,n.index),""!==n[1]){var r=this._parser.parse("["+n[1]+"]");i=r.aliases,this._args=r}if("@"===e[0]){var o=e.slice(1).split(".")[0];i.indexOf(o)===-1&&i.push(o)}this._listener=e,this._aliases=i}},n._inject={_parser:Zt,_regex:te},n}(Qo);t.SimpleEventControl=i;var r=function(t){function e(){t.apply(this,arguments),this.event=Xi}return __extends(e,t),e}(i);t.Tap=r;var o=function(t){function e(){t.apply(this,arguments),this.event="blur"}return __extends(e,t),e}(i);t.Blur=o;var s=function(t){function e(){t.apply(this,arguments),this.event="change"}return __extends(e,t),e}(i);t.Change=s;var c=function(t){function e(){t.apply(this,arguments),this.event="copy"}return __extends(e,t),e}(i);t.Copy=c;var h=function(t){function e(){t.apply(this,arguments),this.event="cut"}return __extends(e,t),e}(i);t.Cut=h;var f=function(t){function e(){t.apply(this,arguments),this.event="paste"}return __extends(e,t),e}(i);t.Paste=f;var E=function(t){function e(){t.apply(this,arguments),this.event=Gi}return __extends(e,t),e}(i);t.DblTap=E;var T=function(t){function e(){t.apply(this,arguments),this.event="focus"}return __extends(e,t),e}(i);t.Focus=T;var N=function(t){function e(){t.apply(this,arguments),this.event=Ji}return __extends(e,t),e}(i);t.TouchStart=N;var k=function(t){function e(){t.apply(this,arguments),this.event=Ki}return __extends(e,t),e}(i);t.TouchEnd=k;var S=function(t){function e(){t.apply(this,arguments),this.event=Zi}return __extends(e,t),e}(i);t.TouchMove=S;var I=function(t){function e(){t.apply(this,arguments),this.event=tr}return __extends(e,t),e}(i);t.TouchCancel=I;var R=function(t){function e(){t.apply(this,arguments),this.event=er}return __extends(e,t),e}(i);t.Hold=R;var A=function(t){function e(){t.apply(this,arguments),this.event=nr}return __extends(e,t),e}(i);t.Release=A;var j=function(t){function e(){t.apply(this,arguments),this.event=ir}return __extends(e,t),e}(i);t.Swipe=j;var L=function(t){function e(){t.apply(this,arguments),this.event=rr}return __extends(e,t),e}(i);t.SwipeLeft=L;var P=function(t){function e(){t.apply(this,arguments),this.event=or}return __extends(e,t),e}(i);t.SwipeRight=P;var F=function(t){function e(){t.apply(this,arguments),this.event=sr}return __extends(e,t),e}(i);t.SwipeUp=F;var M=function(t){function e(){t.apply(this,arguments),this.event=ar}return __extends(e,t),e}(i);t.SwipeDown=M;var z=function(t){function e(){t.apply(this,arguments),this.event=ur}return __extends(e,t),e}(i);t.Track=z;var U=function(t){function e(){t.apply(this,arguments),this.event=cr}return __extends(e,t),e}(i);t.TrackLeft=U;var V=function(t){function e(){t.apply(this,arguments),this.event=lr}return __extends(e,t),e}(i);t.TrackRight=V;var q=function(t){function e(){t.apply(this,arguments),this.event=hr}return __extends(e,t),e}(i);t.TrackUp=q;var H=function(t){function e(){t.apply(this,arguments),this.event=pr}return __extends(e,t),e}(i);t.TrackDown=H;var Q=function(t){function e(){t.apply(this,arguments),this.event=_r}return __extends(e,t),e}(i);t.TrackEnd=Q;var W=function(t){function e(){t.apply(this,arguments),this.event="submit"}return __extends(e,t),e.prototype._onEvent=function(e){this.element.hasAttribute("action")||e.preventDefault(),t.prototype._onEvent.call(this,e)},e}(i);t.Submit=W;var Y=function(e){function n(){e.apply(this,arguments),this.event="input"}return __extends(n,e),n.prototype._addEventListeners=function(){var e,n=this,i=this.element,r=this._compat,o=!1,s=!1,a="input",u=function(t){o||n._onEvent(t)},c=function(t){y(e)||(e=O(function(){u(t),e=null}))};C(r.ANDROID)&&(this.addEventListener(i,"compositionstart",function(){o=!0},!1),this.addEventListener(i,"compositionend",function(t){o=!1,u(t)},!1)),this.addEventListener(i,a,function(t){s=!0,u(t)},!1),this.addEventListener(i,"change",function(t){return s?void(s=!1):void u(t)},!1),r.hasEvent(a)||(this.addEventListener(i,"keydown",function(e){var n=e.keyCode,i=t.KeyCodes;n===i.lwk||n===i.rwk||n>=i.shift&&n<=i.escape||n>i.space&&n<=i.down||c(e)},!1),this.addEventListener(i,"cut",c,!1),this.addEventListener(i,"paste",c,!1))},n._inject={_compat:Vt},n}(i);t.React=Y,Pt.control(pn,r),Pt.control(_n,o),Pt.control(fn,s),Pt.control(dn,c),Pt.control(vn,h),Pt.control(mn,f),Pt.control(gn,E),Pt.control(yn,T),Pt.control(bn,W),Pt.control(Cn,N),Pt.control(xn,k),Pt.control(En,S),Pt.control(wn,I),Pt.control(Tn,R),Pt.control(Nn,A),Pt.control(kn,j),Pt.control(Sn,L),Pt.control(In,P),Pt.control(Rn,F),Pt.control(An,M),Pt.control(jn,z),Pt.control(Ln,U),Pt.control(Pn,V),Pt.control(On,q),Pt.control(Fn,H),Pt.control(Mn,Q),Pt.control(Dn,Y),t.KeyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,break:19,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,"left arrow":37,up:38,"up arrow":38,right:39,"right arrow":39,down:40,"down arrow":40,insert:45,delete:46,0:48,zero:48,")":48,"right parenthesis":48,1:49,one:49,"!":49,exclamation:49,"exclamation point":49,2:50,two:50,"@":50,at:50,3:51,three:51,"#":51,"number sign":51,hash:51,pound:51,4:52,four:52,$:52,dollar:52,"dollar sign":52,5:53,five:53,"%":53,percent:53,"percent sign":53,6:54,six:54,"^":54,caret:54,7:55,seven:55,"&":55,ampersand:55,8:56,eight:56,"*":56,asterisk:56,9:57,nine:57,"(":57,"left parenthesis":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,lwk:91,"left window key":91,rwk:92,"right window key":92,select:93,"select key":93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"scroll lock":145,";":186,"semi-colon":186,":":186,colon:186,"=":187,equal:187,"equal sign":187,"+":187,plus:187,",":188,comma:188,"<":188,lt:188,"less than":188,"left angle bracket":188,"-":189,dash:189,_:189,underscore:189,".":190,period:190,">":190,gt:190,"greater than":190,"right angle bracket":190,"/":191,"forward slash":191,"?":191,"question mark":191,"`":192,"grave accent":192,"~":192,tilde:192,"[":219,"open bracket":219,"{":219,"open brace":219,"\\":220,"back slash":220,"|":220,pipe:220,"]":221,"close bracket":221,"}":221,"close brace":221,"'":222,"single quote":222,'"':222,"double quote":222};var X=function(e){function n(){e.apply(this,arguments),this.keyCodes={}}return __extends(n,e),n.prototype._setListener=function(){var t=this.attribute;if(!v(this.event)&&!v(t)){var n=this.attributes[t].trim();if("{"===n[0]){var i=this.evaluateExpression(n)||{method:""},r=this._filterArgs(i);return this._setKeyCodes(r),void this.addEventListener(this.element,this.event,this._onEvent,!1)}e.prototype._setListener.call(this)}},n.prototype._filterArgs=function(t){var e=t.key,n=t.keys;return this._parseArgs(t.method),x(n)?n:_(n)?[n]:x(e)?e:_(e)?[e]:void(b(t.char)&&b(t.chars)||this._log.warn(this.type+" should be using the property key or keys to denote key codes or keys and not char codes or characters."))},n.prototype._onEvent=function(t){this._compareKeys(t)&&e.prototype._onEvent.call(this,t)},n.prototype._compareKeys=function(t){var e=this.keyCodes,n=t.keyCode||t.which;return v(e)||e[n]===!0},n.prototype._setKeyCodes=function(e){x(e)||(e=[]);for(var n,i,r=e.length,o=this.keyCodes,s=0;s<r;++s)n=e[s],i=g(n)?n:t.KeyCodes[n.toLowerCase()],o[i]=!0},n}(i);t.KeyCodeEventControl=X;var G=function(t){function e(){t.apply(this,arguments),this.event="keydown"}return __extends(e,t),e}(X);t.KeyDown=G;var J=function(t){function e(){t.apply(this,arguments),this.event="keydown"}return __extends(e,t),e.prototype._onEvent=function(e){var n=this,i=e.keyCode||e.which;if(t.prototype._compareKeys.call(this,e)&&(i>=48&&i<=90||i>=186||i>=96&&i<=111))var r=this.addEventListener(this.element,"keypress",function(e){r(),t.prototype._onEvent.call(n,e)},!1)},e.prototype._compareKeys=function(t){return!0},e}(X);t.KeyPress=J;var K=function(t){function e(){t.apply(this,arguments),this.event="keyup"}return __extends(e,t),e}(X);t.KeyUp=K;var Z=function(t){function e(){t.apply(this,arguments),this.event="keypress"}return __extends(e,t),e.prototype._filterArgs=function(t){var e=t.char,n=t.chars;return this._parseArgs(t.method),x(n)?n:_(n)?[n]:x(e)?e:_(e)?[e]:void(b(t.key)&&b(t.keys)||this._log.warn(this.type+" should be using the property key or keys to denote key codes or keys and not char codes or characters."))},e.prototype._onEvent=function(e){var n,i=this.keyCodes,r=e.charCode||e.which;if(r)n=String.fromCharCode(r);else if(n=e.key,!n)return;(v(i)||i[n]===!0)&&t.prototype._onEvent.call(this,e)},e.prototype._compareKeys=function(t){return!0},e.prototype._setKeyCodes=function(t){x(t)||(t=[]);for(var e,n,i=t.length,r=this.keyCodes,o=0;o<i;++o)e=t[o],n=g(e)?String.fromCharCode(e):e,r[n]=!0},e}(X);t.CharPress=Z,Pt.control(Ze,G),Pt.control(tn,J),Pt.control(en,K),Pt.control(nn,Z);var tt=function(t){function n(){t.apply(this,arguments),this.property="",this._stopSetter=e}return __extends(n,t),n.prototype.loaded=function(){b(this.element)||(this.attribute=B(this.type),this.setter(),this.__removeListener=this.attributes.observe(this.setter,this.attribute))},n.prototype.contextChanged=function(){b(this.element)||this.setter()},n.prototype.dispose=function(){this._stopSetter(),y(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null)},n.prototype.setter=function(){var t=this;this._stopSetter(),this._stopSetter=D(function(){var e=t.element,n=t.property;if(l(e))switch(t.attributes[t.attribute]){case"false":case"0":case"null":case"":e.setAttribute(n,""),e[n]=!1,e.removeAttribute(n);break;default:e.setAttribute(n,n),e[n]=!0}})},n}(Qo);t.SetAttributeControl=tt;var et=function(t){function e(){t.apply(this,arguments),this.property="checked"}return __extends(e,t),e}(tt);t.Checked=et;var nt=function(t){function e(){t.apply(this,arguments),this.property="disabled"}return __extends(e,t),e}(tt);t.Disabled=nt;var it=function(t){function e(){t.apply(this,arguments),this.property="selected"}return __extends(e,t),e}(tt);t.Selected=it;var rt=function(t){function e(){t.apply(this,arguments),this.property="readonly"}return __extends(e,t),e}(tt);t.ReadOnly=rt;var ot=function(t){function n(){t.apply(this,arguments),this.property="display",this.value="none",this.importance="important",this._initialValue=""}return __extends(n,t),n.prototype.initialize=function(){var t=this.element.style||{getPropertyValue:e},n=t.getPropertyValue(this.property);this._setValue(this.value,this.importance),v(n)||"none"===n||(this._initialValue=n)},n.prototype.setter=function(){var t=this;this._stopSetter(),this._stopSetter=D(function(){if(l(t.element))switch(t.attributes[t.attribute]){case"false":case"0":case"null":case"":t._setValue(t.value,t.importance);break;default:t._setValue(t._initialValue)}})},n.prototype._setValue=function(t,n){var i=this.property,r=this.element.style||{setProperty:e,removeProperty:e,getPropertyValue:e,getPropertyPriority:e},o=r.getPropertyValue(i),s=r.getPropertyPriority(i);if(t!==o||n!==s)return v(t)?void r.removeProperty(i):void r.setProperty(i,t,n)},n}(tt);t.Visible=ot;var st=function(t){function e(){t.apply(this,arguments),this.property="style",this._styleRegex=/(.*?):(.*)/,this._urlRegex=/url\([^\)]*\)/gi,this._urlReplace="[PLAT-STYLE-URL]",this.__addedStyles=[],this.__oldStyles={}}return __extends(e,t),e.prototype.setter=function(){var t=this;this._stopSetter();var e=this.element,n=this.attributes[this.attribute];v(n)||b(e)||(this._stopSetter=D(function(){var i=[],r=t._urlReplace;n=n.replace(t._urlRegex,function(t){return i.push(t),r});var o,s,a,u,c=e.style,l=t.__addedStyles,h=t.__oldStyles,p=[],_=n.split(";"),f=_.length,d=t._styleRegex,v={};for(u=0;u<f;++u)a=d.exec(_[u]),b(a)||a.length<3||(o=a[1].trim(),0===o.length||C(c[o])||(l.indexOf(o)===-1&&(h[o]=c[o]),p.push(o),s=a[2].trim(),i.length>0&&s.indexOf(r)!==-1&&(s=s.replace(r,i.shift())),v[o]=s));for(f=l.length;f-- >0;)o=l[f],p.indexOf(o)===-1&&(v[o]=h[o],l.splice(f,1));var m=Object.keys(v);for(f=m.length;f-- >0;)o=m[f],c[o]=v[o];t.__addedStyles=l.concat(p)}))},e}(tt);t.Style=st,Pt.control(sn,et),Pt.control(an,nt),Pt.control(un,it),Pt.control(cn,rt),Pt.control(ln,ot),Pt.control(hn,st);var at=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setter=function(){var t=this.element,e=this.property,n=this.attributes[this.attribute];v(n)||b(t)||C(t[e])||(t[e]=n)},e}(tt);t.ElementPropertyControl=at;var ut=function(t){function e(){t.apply(this,arguments),this.property="href"}return __extends(e,t),e}(at);t.Href=ut;var ct=function(t){function e(){t.apply(this,arguments),this.property="src"}return __extends(e,t),e.prototype.setter=function(){var t=this.element,e=this.property,n=this.attributes[this.attribute];v(n)||b(t)||C(t[e])||(t[e]=this._browser.urlUtils(n))},e._inject={_browser:Ie},e}(at);t.Src=ct,Pt.control(Je,ut),Pt.control(Ke,ct);var lt=function(n){function i(){n.apply(this,arguments),this.priority=100,this._supportsTwoWayBinding=!1,this._dateRegex=/([0-9]{4})-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])/,this._dateTimeLocalRegex=/([0-9]{4})-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])T(0[1-9]|1[0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9])(?:\.([0-9]+))?)?/,this.__fileSupported=dt(Vt).fileSupported,this.__fileNameRegex=dt(te).fileNameRegex,this.__isSelf=!1}return __extends(i,n),i.prototype.initialize=function(){this._determineType()},i.prototype.loaded=function(){var t=this.parent;if(!b(t)&&!b(this.element)){var e=B(this.type),n=this._parser,i=this._expression=n.parse(this.attributes[e]),r=i.identifiers;if(1!==r.length)return this._log.warn("Only 1 identifier allowed in a "+this.type+" expression."),void(this._contextExpression=null);var o=r[0].split(".");if(this._property=o.pop(),i.aliases.length>0){var s=i.aliases[0],u=t.findResource(s),c=void 0;if(a(u)){if(c=u.resource.type,c!==Hr&&c!==Xr)return}else u={resource:{}};s===to||s===Jr?this._contextExpression=n.parse(o.join(".")):(this._property="value",this._contextExpression={evaluate:function(){return u.resource},aliases:[],identifiers:[],expression:""})}else o.length>0?this._contextExpression=n.parse(o.join(".")):this._contextExpression={evaluate:function(){return t.context},aliases:[],identifiers:[],expression:""};this._supportsTwoWayBinding&&this.templateControl.observeProperties(this),this._watchExpression(),b(this._addEventType)||this._addEventType()}},i.prototype.contextChanged=function(){this._watchExpression()},i.prototype.dispose=function(){this._addEventType=null},i.prototype.evaluate=function(){var t=this._expression;if(!C(t))return this.evaluateExpression(t)},i.prototype.observeProperty=function(t,e,n){return this._observeProperty(t,e,n)},i.prototype.observeArrayChange=function(t,e){return this._observeProperty(t,e,!1,!0)},i.prototype._addTextEventListener=function(){var e,n=this,i=this.element,r=this._compat,o=!1,s="input",a=function(){o||n._propertyChanged()},u=function(){y(e)||(e=O(function(){a(),e=null}))};C(r.ANDROID)&&(this.addEventListener(i,"compositionstart",function(){o=!0},!1),this.addEventListener(i,"compositionend",function(){o=!1,a()},!1)),r.hasEvent(s)?this.addEventListener(i,s,a,!1):(this.addEventListener(i,"keydown",function(e){var n=e.keyCode||e.which,i=t.KeyCodes;n===i.lwk||n===i.rwk||n>=i.shift&&n<=i.escape||n>i.space&&n<=i.down||u()},!1),this.addEventListener(i,"cut",u,!1),this.addEventListener(i,"paste",u,!1)),this.addEventListener(i,"change",a,!1)},i.prototype._addChangeEventListener=function(){this.addEventListener(this.element,"change",this._propertyChanged,!1)},i.prototype._addButtonEventListener=function(){this.addEventListener(this.element,Xi,this._propertyChanged,!1)},i.prototype._addRangeEventListener=function(){var t=this.element,e="input";this._compat.hasEvent(e)&&this.addEventListener(t,e,this._propertyChanged,!1),this.addEventListener(t,"change",this._propertyChanged,!1)},i.prototype._getChecked=function(){return this.element.checked},i.prototype._getValue=function(){return this.element.value},i.prototype._getTextContent=function(){return this.element.textContent},i.prototype._getDate=function(){var t=this.element.value,e=this._dateRegex;if("string"!==this._propertyType&&e.test(t)){var n=e.exec(t);if(4===n.length)return new Date(Number(n[1]),Number(n[2])-1,Number(n[3]))}return t},i.prototype._getDateTimeLocal=function(){var t=this.element.value,e=this._dateTimeLocalRegex;if("string"!==this._propertyType&&e.test(t)){var n=e.exec(t);if(8===n.length)return b(n[6])?new Date(Number(n[1]),Number(n[2])-1,Number(n[3]),Number(n[4]),Number(n[5])):b(n[7])?new Date(Number(n[1]),Number(n[2])-1,Number(n[3]),Number(n[4]),Number(n[5]),Number(n[6])):new Date(Number(n[1]),Number(n[2])-1,Number(n[3]),Number(n[4]),Number(n[5]),Number(n[6]),Number(n[7]))}return t},i.prototype._getFile=function(){var t=this.element,n=t.value;return this.__fileSupported?t.files.length>0?t.files[0]:null:{
name:n.replace(this.__fileNameRegex,""),path:n,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:e,msClose:e,slice:function(){return{}}}},i.prototype._getFiles=function(){var t=this.element;if(this.__fileSupported)return Array.prototype.slice.call(t.files);for(var n,i=t.value.split(/,|;/g),r=i.length,o=[],s=function(){return{}},a=0;a<r;++a)n=i[a],o.push({name:n.replace(this.__fileNameRegex,""),path:n,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:e,msClose:e,slice:s});return o},i.prototype._getSelectedValues=function(){for(var t,e=this.element.options,n=e.length,i=[],r=0;r<n;++r)t=e[r],t.selected&&i.push(t.value);return i},i.prototype._setText=function(t,e,n){if(!this.__isSelf)return b(t)&&(t="",n===!0)?(b(this.element.value)&&this._setValue(t),void this._propertyChanged()):void this._setValue(t)},i.prototype._setRange=function(t,e,n){if(!this.__isSelf)return v(t)&&(t=""===t?"0":0,n===!0)?(v(this.element.value)&&this._setValue(t),void this._propertyChanged()):void this._setValue(t)},i.prototype._setHidden=function(t,e,n){if(!this.__isSelf)return v(t)&&(t="",n===!0)?(v(this.element.value)&&this._setValue(t),void this._propertyChanged()):void this._setValue(t)},i.prototype._setValue=function(t){var e=this.element;_(t)||(g(t)?(this._propertyType="number",t=t.toString()):m(t)&&(this._propertyType="boolean",t=t.toString())),e.value!==t&&(e.value=t)},i.prototype._setChecked=function(t,e,n){if(!this.__isSelf)return m(t)||(t=!!t,n!==!0)?void(this.element.checked=t):(this.element.checked=t,void this._propertyChanged())},i.prototype._setRadio=function(t){var e=this.element;if(!this.__isSelf){if(b(t))return void(e.checked&&this._propertyChanged());_(t)||(g(t)?(this._propertyType="number",t=t.toString()):m(t)&&(this._propertyType="boolean",t=t.toString())),e.checked=e.value===t}},i.prototype._setDate=function(t,e,n){if(!this.__isSelf){if(!w(t))return this._dateRegex.test(t)?(this._propertyType="string",void this._setValue(t)):(this._setValue(""),void(n===!0&&this._propertyChanged()));var i=("0"+t.getDate()).slice(-2),r=("0"+(t.getMonth()+1)).slice(-2);this._setValue(t.getFullYear()+"-"+r+"-"+i)}},i.prototype._setDateTimeLocal=function(t,e,n){if(!this.__isSelf){if(!w(t))return this._dateTimeLocalRegex.test(t)?(this._propertyType="string",void this._setValue(t)):(this._setValue(""),void(n===!0&&this._propertyChanged()));var i=("0"+t.getDate()).slice(-2),r=("0"+(t.getMonth()+1)).slice(-2),o=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2),a=("0"+t.getSeconds()).slice(-2),u=t.getMilliseconds();this._setValue(t.getFullYear()+"-"+r+"-"+i+"T"+o+":"+s+":"+a+"."+u)}},i.prototype._setSelectedIndex=function(t,e,n){if(!this.__isSelf){var i=this.element,r=i.value;if(b(t))return n!==!0&&this._document.body.contains(i)?void(i.selectedIndex=-1):void this._propertyChanged();if(_(t)||(g(t)?(this._propertyType="number",t=t.toString()):m(t)?(this._propertyType="boolean",t=t.toString()):this._log.info("Trying to bind an invalid value to a <select> element using a "+this.type+".")),r!==t){if(!this._document.body.contains(i))return i.value=t,void(i.value!==t&&(i.value=r,this._propertyChanged()));i.value=t,i.value===t&&i.selectedIndex!==-1||(i.selectedIndex=-1)}}},i.prototype._setSelectedIndices=function(t,e,n){if(!this.__isSelf){var i,r=this.element.options,o=b(r)?0:r.length,s=b(t);if(!s&&x(t))for(var a,u,c,l=1/0;o-- >0;)i=r[o],a=i.value,t.indexOf(a)===-1?(u=Number(a),g(u)&&(c=t.indexOf(u))!==-1?(c<l&&(this._propertyType="number",l=c),i.selected=!0):"true"===a&&(c=t.indexOf(!0))!==-1||"false"===a&&(c=t.indexOf(!1))!==-1?(c<l&&(this._propertyType="boolean",l=c),i.selected=!0):i.selected=!1):i.selected=!0;else for(n===!0&&this._propertyChanged();o-- >0;){if(i=r[o],!s&&i.value===""+t)return void(i.selected=!0);i.selected=!1}}},i.prototype._determineType=function(){if(!this._observingBindableProperty()){var t=this.element;if(!b(t))switch(t.nodeName.toLowerCase()){case"input":switch(t.type){case"button":case"submit":case"reset":case"image":this._addEventType=this._addButtonEventListener,this._getter=this._getValue;break;case"checkbox":this._addEventType=this._addChangeEventListener,this._getter=this._getChecked,this._setter=this._setChecked;break;case"radio":this._initializeRadio();break;case"range":this._addEventType=this._addRangeEventListener,this._getter=this._getValue,this._setter=this._setRange;break;case"date":this._propertyType="nullable",this._addEventType=this._addChangeEventListener,this._getter=this._getDate,this._setter=this._setDate;break;case"datetime-local":this._propertyType="nullable",this._addEventType=this._addChangeEventListener,this._getter=this._getDateTimeLocal,this._setter=this._setDateTimeLocal;break;case"file":this._propertyType="nullable";var e=t.multiple;this._addEventType=this._addChangeEventListener,this._getter=e?this._getFiles:this._getFile;break;case"hidden":this._getter=this._getValue,this._setter=this._setHidden;break;case"number":this._propertyType="number";default:this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText}break;case"textarea":this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText;break;case"select":this._initializeSelect();break;case"button":this._addEventType=this._addButtonEventListener,this._getter=this._getTextContent}}},i.prototype._watchExpression=function(){var t=this,e=this._contextExpression,n=this.evaluateExpression(e);if(!a(n)){if(!(b(n)&&e.identifiers.length>0))return void this._log.warn(this.type+" is trying to index into a primitive type. "+this._contextExpression.expression+" is already defined and not an object when trying to evaluate "+this.type+'="'+this._expression.expression+'"');n=this._createContext(e.identifiers[0])}var i;if(y(this._setter)){this._setter===this._setSelectedIndices&&(i=this._property,b(n[i])&&(n[i]=[]),this.observeArray(function(e){t._setter(e[0].object,null,!0)},e+"."+i));var r=this._expression;this.observeExpression(function(e,n){t._setter(e,n)},r),this._setter(this.evaluateExpression(r),void 0,!0)}},i.prototype._createContext=function(t){var e=t.split("."),n=e.shift().slice(1),i=this.parent;return n===Jr?(t=e.join("."),i=this.parent.root):n===Ft&&(t=e.join(".")),this._ContextManager.createContext(i,t)},i.prototype._castProperty=function(t,e){var n;if(e=e||this._propertyType,b(e))return t;if(a(t))if(x(t)){var i=t.length;n=[];for(var r=0;r<i;++r)n.push(this._castProperty(t[r],e))}else if(w(t)||p(t)||d(t)||u(t)||l(t))n=t;else{var o=Object.keys(t),s=void 0;for(n={};o.length>0;)s=o.pop(),n[s]=t[s]}else switch(e){case"string":n=_(t)?t:y(t.toString)?t.toString():Object.prototype.toString.call(t);break;case"number":n=v(t)?void 0:Number(t);break;case"boolean":switch(t){case"true":n=!0;break;case"false":case"0":case"null":case"undefined":n=!1;break;default:n=!!t}break;case"nullable":v(t)&&(n=null);break;default:n=t}return n},i.prototype._propertyChanged=function(){if(!b(this._contextExpression)){var t=this.evaluateExpression(this._contextExpression);if(a(t)){var e=this._property,n=this._castProperty(this._getter());t[e]!==n&&(this.__isSelf=!0,t[e]=n,this.__isSelf=!1)}}},i.prototype._initializeRadio=function(){var t=this.element;if(this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRadio,!t.hasAttribute("name")){var e=B(this.type),n=this.attributes[e];t.setAttribute("name",n)}t.hasAttribute("value")||t.setAttribute("value","")},i.prototype._initializeSelect=function(){var t,e=this.element,n=e.multiple,i=e.options,r=i.length;this._addEventType=this._addChangeEventListener,n?(this._getter=this._getSelectedValues,this._setter=this._setSelectedIndices):(this._getter=this._getValue,this._setter=this._setSelectedIndex);for(var o=0;o<r;++o)t=i[o],t.hasAttribute("value")||t.setAttribute("value",t.textContent)},i.prototype._observingBindableProperty=function(){var t=this,e=this.templateControl;return!!(a(e)&&y(e.onInput)&&y(e.observeProperties))&&(e.onInput(function(e){t._getter=function(){return e},t._propertyChanged()}),this._supportsTwoWayBinding=!0)},i.prototype._observeProperty=function(t,e,n,i){var r,o=this;if(v(e))r=this._expression.expression;else if(g(e))r=this._expression.expression+"."+e;else{var s=this._parser,u=s.parse(e),c=u.identifiers;if(1!==c.length)return void this._log.warn("Only 1 identifier path allowed when observing changes to a bound property's child with a control implementing observable.ISupportTwoWayBinding and working with "+this.type);var l=s.parse(this._expression.expression+"."+c[0]);r=l.identifiers[0];var h=r.split(".");h.pop();var p=h.join("."),_=this.evaluateExpression(p);if(!a(_)){if(!b(_))return void this._log.warn("A control implementing observable.ISupportTwoWayBinding is trying to index into a primitive type when trying to evaluate "+this.type+'="'+this._expression.expression+'"');_=this._ContextManager.createContext(this.parent,p)}}t=t.bind(this.templateControl),n=n===!0;var f;if(i===!0)f=this.observeArray(function(n){t(n,e)},r);else{f=this.observe(function(i,r){o.__isSelf||i===r||(n&&(o._propertyType=o._getPropertyType(i)),t(i,r,e))},r);var d=this.evaluateExpression(r);n&&(this._propertyType=this._getPropertyType(d)),t(d,void 0,e,!0)}return f},i.prototype._getPropertyType=function(t){return a(t)?t:_(t)?"string":g(t)?"number":m(t)?"boolean":void 0},i._inject={_parser:Zt,_ContextManager:ie,_compat:Vt,_document:Qt},i}(Qo);t.Bind=lt,Pt.control(Ge,lt);var ht=function(t){function e(){t.apply(this,arguments),this.property="",this.priority=200,this._listeners=[],this._boundAddListener=this._addListener.bind(this)}return __extends(e,t),e.prototype.initialize=function(){this.attribute=B(this.type),this._setProperty(this._getValue())},e.prototype.loaded=function(){this._observeProperty(),this._setProperty(this._getValue())},e.prototype.dispose=function(){y(this._removeListener)&&this._removeListener(),this._listeners=[]},e.prototype._setProperty=function(t,e){var n=this.templateControl;b(n)||(this._ContextManager.defineGetter(n,this.property,{value:t,observe:this._boundAddListener},!0,!0),this._callListeners(t,e))},e.prototype._callListeners=function(t,e){for(var n=this._listeners,i=n.length,r=0;r<i;++r)n[r](t,e)},e.prototype._addListener=function(t){var e=this._listeners;return t=t.bind(this.templateControl),e.push(t),function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},e.prototype._getValue=function(){if(!b(this.templateControl))return this.evaluateExpression(this.attributes[this.attribute])},e.prototype._observeProperty=function(){b(this.templateControl)||(this._removeListener=this.observeExpression(this._setProperty,this.attributes[this.attribute]))},e._inject={_ContextManager:ie},e}(Qo);t.ObservableAttributeControl=ht;var pt=function(t){function e(){t.apply(this,arguments),this.property="options"}return __extends(e,t),e}(ht);t.Options=pt,Pt.control(on,pt)}(Go=t.controls||(t.controls={}));var Jo=function(){function t(){this.uid=z(Xe),this._log=t._log;var e=this.navigator=dt(ne);e.initialize(dt(je).currentRouter())}return t.start=function(){if(!t._compat.isCompatible)return t._log.error(new Error("PlatypusTS only supports modern browsers where Object.defineProperty is defined"));t.__addPlatCss();var e=t._EventManager;e.dispose(Br),e.on(Br,bi,t.__ready),e.on(Br,Ni,t.__shutdown),e.initialize()},t.registerApp=function(e){!b(t.app)&&_(t.app.uid)&&t._EventManager.dispose(t.app.uid),t.__injector=e},t.load=function(e){var n=t._LifecycleEvent,i=t._compiler,r=t._document.body,o=t._document.head;return n.dispatch(Si,t),b(e)?(r.setAttribute(Di,""),void O(function(){i.compile([o]),i.compile([r]),r.removeAttribute(Di)})):y(e.setAttribute)?(e.setAttribute(Di,""),void O(function(){i.compile([e]),e.removeAttribute(Di)})):void O(function(){i.compile([e])})},t.__ready=function(e){Ao.Injector.initialize(),t.__registerAppEvents(e),e.defaultPrevented||t.load()},t.__shutdown=function(){var e,n=navigator.app,i=t._LifecycleEvent;if(!b(n)&&y(n.exitApp)){if(e=i.dispatch(ki,t),e.defaultPrevented)return;n.exitApp()}},t.__registerAppEvents=function(e){var n=t.__injector;if(!b(n)&&y(n.inject)){var i=t.app=n.inject();i.on(Ci,i.suspend),i.on(xi,i.resume),i.on(Ei,i.online),i.on(wi,i.offline),i.on(Ti,i.error),i.on(ki,i.exiting),y(i.ready)&&i.ready(e)}},t.__addPlatCss=function(){var e=t._document;if(!t._compat.platCss){if(!b(e.styleSheets)&&e.styleSheets.length>0)return void e.styleSheets[0].insertRule("[plat-hide] { display: none !important; }",0);var n=document.createElement("style");n.textContent="[plat-hide] { display: none !important; }",document.head.appendChild(n)}},t.prototype.suspend=function(t){},t.prototype.resume=function(t){},t.prototype.error=function(t){},t.prototype.ready=function(t){},t.prototype.exiting=function(t){},t.prototype.online=function(t){},t.prototype.offline=function(t){},t.prototype.dispatchEvent=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=t._EventManager||dt(Xt);r.dispatch(e,this,r.DIRECT,n)},t.prototype.on=function(e,n){var i=t._EventManager||dt(Xt);return i.on(this.uid,e,n,this)},t.prototype.load=function(e){t.load(e)},t.prototype.exit=function(){this.dispatchEvent(Ni)},t.app=null,t}();t.App=Jo,t.IAppStatic=wt,Pt.injectable(Mt,wt,[Vt,Xt,Qt,oe,Gt,Kt],Er),t.IApp=Tt,Pt.injectable(Dt,Tt,[Mt],Tr)}(plat||(plat={})),module.exports=plat;
},{}],19:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},platui;!function(t){var e="$",i=e+"Promise",s=e+"Compat",n=e+"Regex",o=e+"Window",r=e+"Document",a=e+"Animator",l=e+"DomEventInstance",h=e+"TemplateControlFactory",u=e+"NodeManagerStatic",d="context",p="plat",_=p+"-",c=_+"button",f=_+"checkbox",m=_+"drawer",v=m+"-controller",g=_+"modal",y=_+"progress",b=_+"ring",C=_+"radio",x=_+"toggle",T=_+"slider",E=_+"range",w=_+"select",P=_+"input",N=_+"file",S=_+"carousel",A=_+"listview",I=_+"navbar",L=_+"image",k=_+"hide",O=_+"hidden",V=_+d,z=_+"foreach",F=_+"html",R=_+"disabled",B=p+"Checked",M=p+"Bind",j=p+"Src",D={index:"index",even:"even",odd:"odd",first:"first",last:"last",group:"group"},K=_+"transition",q=_+"enter",U=_+"leave",G="$tap",W="$touchstart",H="$touchend",X="$touchcancel",Y="$swipe",Q="$track",$="$trackend",J="__plat-button-",Z="__plat-radio-",tt="__platDrawerControllerFetch",et="__platDrawerFound",it="-reversed",st="name",nt="literal",ot={right:"left",left:"right",up:"down",down:"up"},rt="src",at=function(t){return t.preventDefault(),!1},lt=function(){};"undefined"!=typeof window&&("undefined"==typeof window.platui&&(window.platui=t),"undefined"==typeof window.module&&(window.module={}));var ht=function(t){function e(){t.apply(this,arguments),this.replaceWith="button",this._isSelected=!1}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,c+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){for(var t,e,i=this._document,s=this.element,n=Array.prototype.slice.call(s.childNodes),o=this.utils.isEmpty;n.length>0;)t=n.shift(),t.nodeType===Node.TEXT_NODE?o(t.textContent.trim().match(/[^\r\n]/g))||(e=i.createElement("span"),e.insertBefore(t,null),s.insertBefore(e,null)):s.insertBefore(t,null)},e.prototype.loaded=function(){var t=this.element,e=this.options||{},i=e.value||{},s=i.group,n=this.utils.isString;return n(s)?(this._group=s,this.dom.hasClass(t,_+"selected")&&this._onTap(),void this._addEventListeners()):(s=this.attributes[M],void(n(s)&&(this._group=s,this.dom.hasClass(t,_+"selected")&&this._onTap(),this._addEventListeners())))},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){this.utils.isString(t)&&t===this.element.textContent&&this._onTap()},e.prototype._addEventListeners=function(){var t=this;this.addEventListener(this.element,G,this._onTap,!1),this.on(J+this._group,function(){t._isSelected&&(t.dom.removeClass(t.element,_+"selected"),t._isSelected=!1)})},e.prototype._onTap=function(){if(!this._isSelected){var t=this.element;this.dom.addClass(t,_+"selected"),this.dispatchEvent(J+this._group,plat.events.EventManager.DIRECT),this._isSelected=!0,this.inputChanged(t.textContent)}},e._inject={_document:r},e}(plat.ui.BindControl);t.Button=ht,plat.register.control(c,ht);var ut=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-toggle-container">\n    <div class="plat-knob"></div>\n</div>\n',this.isActive=!1,this._targetType="slide"}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,x+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){var t=this.utils.isNull,e=this.innerTemplate;if(!t(e))for(var i,s,n,o=this._document,r=this.element,a=Array.prototype.slice.call(e.childNodes);a.length>0;)i=a.shift(),i.nodeType===Node.TEXT_NODE?(n=i.textContent.trim().match(/[^\r\n]/g),null!==n&&n.length>0&&(s=o.createElement("span"),s.insertBefore(i,null),r.insertBefore(s,null))):r.insertBefore(i,null)},e.prototype.loaded=function(){var t=this.element;this._targetElement=t.firstElementChild,this.addEventListener(t,G,this._onTap),this._convertChecked()},e.prototype.toggle=function(){this._toggle(!0)},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){if(t!==e){if(s===!0&&this.utils.isNull(t))return void this.inputChanged(this.isActive);var n=!!t;n!==this.isActive&&this._toggle(s)}},e.prototype._convertChecked=function(){var t=this.element;this.utils.isNull(this.attributes[B])?t.hasAttribute("checked")&&this._convertAttribute(!0):(this._convertAttribute(this.attributes[B]),this.attributes.observe(this._convertAttribute,B))},e.prototype._convertAttribute=function(t,e){var i=this.utils;return i.isBoolean(t)?this._setBoundProperty(t,e,null,!0):void(i.isString(t)&&this._setBoundProperty("true"===t,"true"===e,null,!0))},e.prototype._onTap=function(t){this._toggle(!0),this._trigger("change")},e.prototype._trigger=function(t){var e=plat.acquire(l);e.initialize(this.element,t),e.trigger()},e.prototype._toggle=function(t){var e=this.isActive,i=!e,s=this.element;this._activate(this._targetElement||(this._targetElement=s.firstElementChild)),this.isActive=s.checked=i,i?s.setAttribute("checked","checked"):s.removeAttribute("checked"),t===!0&&this.inputChanged(i,e)},e.prototype._activate=function(t){this.dom.toggleClass(t,_+this._targetType)},e._inject={_document:r},e}(plat.ui.BindControl);t.Toggle=ut,plat.register.control(x,ut);var dt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-checkbox-container">\n    <span class="plat-mark"></span>\n</div>\n',this._targetTypeSet=!1}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,f+" "+(t||""))},e.prototype.loaded=function(){t.prototype.loaded.call(this);var e=this.options||{},i=e.value||{},s=this._targetType,n=this._targetType=i.mark||"check";switch(n.toLowerCase()){case"check":case"x":break;default:this._log.debug("Invalid mark option specified for "+this.type+". Defaulting to checkmark."),this._targetType="check"}if(this._targetTypeSet){var o=this._targetElement;this.dom.removeClass(o,s),this._activate(o)}this._targetTypeSet=!0},e.prototype._activate=function(t){return this._targetTypeSet?void this.dom.toggleClass(t,_+this._targetType):void(this._targetTypeSet=!0)},e}(ut);t.Checkbox=dt,plat.register.control(f,dt);var pt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-radio-container">\n    <div class="plat-mark"></div>\n</div>\n',this.groupName="",this._targetType="bullet",this._targetTypeSet=!0}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,C+" "+(t||""))},e.prototype.loaded=function(){var t=this.element;this._targetElement=t.firstElementChild,this.addEventListener(t,G,this._onTap),t.hasAttribute(st)?this.groupName=t.getAttribute(st):this.utils.isNull(this.attributes[M])||(this.groupName=this.attributes[M]),this._convertChecked()},e.prototype.inputChanged=function(e,i){this.isActive&&t.prototype.inputChanged.call(this,this._getValue())},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.utils;if(t!==e){if(s===!0&&n.isNull(t))return void this.inputChanged();var o=this._getValue(),r=t===o,a=this.isActive;if(r){if(a)return}else{var l=n.isFunction(t.toString)?t.toString():Object.prototype.toString.call(t);if(a){if(l===o)return}else if(l!==o)return}this._toggle(s)}},e.prototype._onTap=function(e){this.isActive||t.prototype._onTap.call(this,e)},e.prototype._toggle=function(e){var i=this;if(t.prototype._toggle.call(this,e),this.utils.isFunction(this._removeListener)&&(this._removeListener(),this._removeListener=null),this.isActive){var s=this.groupName;this.dispatchEvent(Z+s,plat.events.EventManager.DIRECT);var n=this._removeListener=this.on(Z+s,function(){i._toggle(),n()})}},e.prototype._convertAttribute=function(t,e){var i=this.utils;return i.isBoolean(t)?void(t&&this._setBoundProperty(this._getValue(),null,null,!0)):void(i.isString(t)&&"true"===t&&this._setBoundProperty(this._getValue(),null,null,!0))},e.prototype._getValue=function(){var t=this.element;return t.hasAttribute("value")?t.getAttribute("value").trim():t.textContent.trim()},e}(dt);t.Radio=pt,plat.register.control(C,pt);var _t=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-animated-ring"></div>'}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,b+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.loaded=function(){var t=this.options,e=this.utils,i=e.isObject,s=0;i(t)&&i(t.value)&&(s=t.value.style,e.isNumber(s)||(s=0)),this.dom.addClass(this.element,b+"-"+s),0!==s&&this._addAnimatedElements(s)},e.prototype._addAnimatedElements=function(t){for(var e,i=plat.acquire(r),s=i.createDocumentFragment(),n=2===t?12:4,o="div",a=_+"animated-child "+_+"animated-child-",l=0;l<n;++l)e=i.createElement(o),e.className=a+l,s.insertBefore(e,null);this.element.firstElementChild.insertBefore(s,null)},e}(plat.ui.TemplateControl);t.ProgressRing=_t,plat.register.control(b,_t);var ct=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-progress-container">\n    <div class="plat-animated-bar"></div>\n</div>\n',this._removeVisibilityListener=lt}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,y+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.loaded=function(){var t=this;this._barElement=this.element.firstElementChild.firstElementChild,this.addEventListener(this._window,"resize",function(){t.setProgress(t.context)}),this.setProgress(this.context)},e.prototype.dispose=function(){this._removeVisibilityListener()},e.prototype.contextChanged=function(){this.setProgress(this.context)},e.prototype.setProgress=function(t){var e=this;return new this._Promise(function(i,s){if(!e.utils.isNumber(t)||t>1||t<0){var n='The value of a "'+e.type+'" control must be a number between 0 and 1.';return e._log.debug(n),void s(n)}var o=e._barElement,r=o.parentElement.clientWidth;return r?void e._animator.animate(o,K,{properties:{width:Math.ceil(r*t)+"px"}}).then(function(){i()}):(e._removeVisibilityListener(),void(e._removeVisibilityListener=e.dom.whenVisible(function(){e.setProgress(t).then(i)},e.element)))})},e._inject={_window:o,_Promise:i,_animator:a},e}(plat.ui.TemplateControl);t.ProgressBar=ct,plat.register.control(y,ct);var ft=function(t){function e(){t.apply(this,arguments),this.ready=this._Promise.resolve(),this._controllers=[],this._isInitialized=!1,this._preInitializedValue=!1,this.__state=!1,this.__nextState=!1}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,m+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){this.innerTemplate=this.dom.appendChildren(this.element.childNodes)},e.prototype.loaded=function(){var t=this,e=this.element,i=this.utils,s=this.options||{},n=s.value||{},o=this._currentPosition=n.position||"left",r=n.id||"",a=n.templateUrl,l=n.elastic===!0;return e.setAttribute(k,""),this.dom.addClass(e,_+o),i.isString(a)?void plat.ui.TemplateControl.determineTemplate(this,a).then(function(e){t.innerTemplate=e,t._initializeEvents(r,o,l)}):void this._initializeEvents(r,o,l)},e.prototype.open=function(){var t=this._controllers[0];return this.utils.isNull(t)?(this._log.debug("No controller, such as a "+v+", found for the "+this.type+" attempting to open."),this._Promise.resolve()):t.open()},e.prototype.close=function(){var t=this._controllers[0];return this.utils.isNull(t)?(this._log.debug("No controller, such as a "+v+", found for the "+this.type+" attempting to close."),this._Promise.resolve()):t.close()},e.prototype.toggle=function(){var t=this._controllers[0];return this.utils.isNull(t)?(this._log.debug("No controller, such as a "+v+", found for the "+this.type+" attempting to toggle."),this._Promise.resolve()):t.toggle()},e.prototype.isOpen=function(){var t=this._controllers[0];return this.utils.isNull(t)?(this._log.debug("No controller, such as a "+v+", found for the "+this.type+" attempting to check if open."),!1):t.isOpen()},e.prototype.bindTemplate=function(t,e){var i=this,s=this.bindableTemplates;return s.add(t,e),s.bind(t).then(function(t){var e=i.element;i.dom.clearNode(e),e.appendChild(t)}).catch(function(t){i._log.debug("Error binding template for "+i.type+": "+t)})},e.prototype.controllerCount=function(){return this._controllers.length},e.prototype.spliceController=function(t){var e=this._controllers,i=e.indexOf(t);i!==-1&&(this.__state=this.__nextState=e[i].isOpen(),e.splice(i,1))},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.utils,o=this._controllers[0];if(s===!0&&n.isNull(t))return void this.inputChanged(!n.isNull(o)&&o.isOpen());var r=!!t;if(r!==t&&this.inputChanged(r),this._isInitialized)if(n.isNull(o))this.__nextState=r;else if(r){if(o.isOpen())return;o.open()}else o.isOpen()&&o.close();else this._preInitializedValue=r},e.prototype._changeDirection=function(t){if(!this.utils.isNull(t)&&t!==this._currentPosition){var e=this.dom,i=this.element;e.removeClass(i,_+this._currentPosition),e.addClass(i,_+t),this._currentPosition=t}},e.prototype._initializeEvents=function(t,e,i){var s=this,n=this.utils,o=this.innerTemplate;this.on(tt+"_"+t,function(r,a){var l=a.control;if(!n.isNull(l))return n.isString(a.position)&&(e=a.position,s._changeDirection(e)),s._controllers.unshift(l),a.received||s.ready.then(function(){s.dispatchEvent(et+"_"+t,plat.events.EventManager.DIRECT,{control:s,received:!0,position:e,template:n.isNode(o)?o.cloneNode(!0):null,elastic:i,state:s.__state,nextState:s.__nextState})}),s._isInitialized=!0,a.useContext?void s._checkPreInit():void s.bindTemplate("drawer",o.cloneNode(!0)).then(function(){s._checkPreInit()})}),this.dispatchEvent(et+"_"+t,plat.events.EventManager.DIRECT,{control:this,received:!1,position:e,template:n.isNode(o)?o.cloneNode(!0):null,elastic:i,state:this.__state,nextState:this.__nextState})},e.prototype._checkPreInit=function(){var t=this;if(this._preInitializedValue){var e=this.utils;e.postpone(function(){var i=t._controllers[0];e.isNull(i)||i.open()})}},e._inject={_Promise:i},e}(plat.ui.BindControl);t.Drawer=ft,plat.register.control(m,ft);var mt=function(t){function e(){t.apply(this,arguments),this._hasSwiped=!1,this._hasTapped=!1,this._isOpen=!1,this._touchState=0,this._isVertical=!1,this._removeClickEaterListener=lt,this._toggleDelay=lt,this._isInitialized=!1}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,v+" "+(t||""))},e.prototype.initialize=function(){this.dom.addClass(this.element,v)},e.prototype.loaded=function(){var t=this.options||{},e=t.value||{},i=e.position,s=e.id||"";this._type=e.type||"tap track",this._isElastic=e.elastic,this._useContext=e.useContext===!0,this._templateUrl=e.templateUrl,this._initializeEvents(s,i)},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this);var i=this._drawer;if(!this.utils.isNull(i))return i.controllerCount()>1?void i.spliceController(this):this._isOpen?void(i.ready=this.close().then(function(){i.spliceController(e),i.controllerCount()>0||e._cleanRootElement()})):void i.ready.then(function(){i.spliceController(e),i.controllerCount()>0||e._cleanRootElement()})},e.prototype.open=function(){var t=this,e=!this._isOpen,i=this.utils;this._toggleDelay();var s=new this._Promise(function(e){t._toggleDelay=i.requestAnimationFrame(function(){t._open().then(e)})});if(e){var n=this._drawer;this.inputChanged(!0),i.isNull(n)||n.inputChanged(!0)}return s},e.prototype.close=function(){var t=this,e=this._isOpen,i=this.utils;this._toggleDelay();var s=new this._Promise(function(e){t._toggleDelay=i.requestAnimationFrame(function(){t._close().then(e)})});if(e){var n=this._drawer;this.inputChanged(!1),i.isNull(n)||(n.ready=s,n.inputChanged(!1))}return s},e.prototype.toggle=function(){return this._isOpen?this.close():this.open()},e.prototype.isOpen=function(){return this._isOpen},e.prototype.bindTemplate=function(t,e){var i=this,s=this.bindableTemplates;return s.add(t,e),s.bind(t).then(function(t){var e=i._drawerElement;i.dom.clearNode(e),e.appendChild(t)}).catch(function(t){i._log.debug("Error binding template for "+i.type+": "+t)})},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this,o=this.utils;if(s===!0&&o.isNull(t))return void this.inputChanged(this._isOpen);var r=!!t;if(r!==t&&this.inputChanged(r),this._isInitialized){if(r){if(this._isOpen)return;this._toggleDelay(),this._toggleDelay=o.requestAnimationFrame(function(){n._open()})}else if(this._isOpen){this._toggleDelay();var a=new this._Promise(function(t){n._toggleDelay=o.requestAnimationFrame(function(){t(n._close())})}),l=this._drawer;o.isNull(l)||(l.ready=a)}}else this._preInitializedValue=r},e.prototype._open=function(t){var e=this,i=this._rootElement,s=this.utils.isNode,n=this._isOpen,o=this._getOffset();if(n&&!t||!(o&&s(i)&&s(this._drawerElement)))return this._Promise.resolve();var r;switch(this._position){case"left":r="translate3d("+o+"px,0,0)";break;case"right":r="translate3d("+-o+"px,0,0)";break;case"top":r="translate3d(0,"+o+"px,0)";break;case"bottom":r="translate3d(0,"+-o+"px,0)";break;default:return this._Promise.resolve()}this._isOpen=!0,this.dom.addClass(i,this._directionalTransitionPrep),n||this._addClickEater();var a={};return a[this._transform]=r,this._animationThenable=this._animator.animate(i,K,{properties:a}).then(function(){e._animationThenable=null,e._drawerElement.removeEventListener("selectstart",at,!1)})},e.prototype._close=function(t){var e=this,i=this._rootElement,s=this.utils.isNode,n=!this._isOpen;if(n&&!t||!s(i)||!s(this._drawerElement))return this._Promise.resolve();this._isOpen=!1;var o={};return o[this._transform]=this._preTransform,this._animationThenable=this._animator.animate(i,K,{properties:o}).then(function(){e._animationThenable=null,e._drawerElement.removeEventListener("selectstart",at,!1),e._isOpen||e._touchState<2&&e._removeClickEater()})},e.prototype._reset=function(){if(this._isOpen)return this._open(!0);var t=this._close(!0),e=this._drawer;return this.utils.isNull(e)||(e.ready=t),t},e.prototype._addClickEater=function(){var t=this,e=this._clickEater,i=e.style,s=this._rootElement;if(!s.contains(e)){i.top=s.scrollTop+"px",i.left=s.scrollLeft+"px",s.insertBefore(e,null),this.dom.addClass(this._rootElement,this._directionalTransitionPrep);var n,o=lt,r=!0;n=this.addEventListener(s,"scroll",function(){r&&(r=!1,o=t.utils.requestAnimationFrame(function(){var t=e.style;r=!0,t.top=s.scrollTop+"px",t.left=s.scrollLeft+"px"}))}),this._removeClickEaterListener=function(){o(),n()}}},e.prototype._removeClickEater=function(){var t=this._rootElement,e=this._clickEater;this._removeClickEaterListener(),t.contains(e)&&t.removeChild(e),this.dom.removeClass(t,this._directionalTransitionPrep)},e.prototype._addSwipeToggle=function(){var t=this,e=this.element,i=this.addEventListener(e,Y+ot[this._position],function(){t._hasSwiped=!0,t.open()},!1),s=this.addEventListener(e,Y+this._position,function(){t._hasSwiped=!0,t.close()},!1);this._removeSwipeToggle=function(){i(),s()}},e.prototype._addSwipeClose=function(){var t=this;this._openSwipeRemover=this.addEventListener(this._clickEater,Y+this._position,function(){t._hasSwiped=!0,t.close()},!1)},e.prototype._addTapToggle=function(){var t=this;this._removeTap=this.addEventListener(this.element,G,function(){t._hasTapped=!0,t.toggle()},!1)},e.prototype._addTapClose=function(){var t=this;this._openTapRemover=this.addEventListener(this._clickEater,G,function(){t._hasTapped=!0,t.close()},!1)},e.prototype._addEventListeners=function(){var t=this.element,e=this.utils.isNull,i=this._type.split(" "),s=this._position;if((this._isTap=i.indexOf("tap")!==-1)&&(this._addTapToggle(),this._addTapClose()),(this._isSwipe=i.indexOf("swipe")!==-1)&&(this._addSwipeToggle(),this._addSwipeClose()),this._isTrack=i.indexOf("track")!==-1){var n=this._track,o=void 0,r=this._clickEater;switch(s){case"left":case"right":o=s;break;case"top":o="up";break;case"bottom":o="down";break;default:return}var a=Q+ot[o],l=Q+o,h=this.addEventListener(t,a,n,!1),u=this.addEventListener(t,l,n,!1),d=this.addEventListener(r,a,n,!1),p=this.addEventListener(r,l,n,!1);if(this._removeTrack=function(){h(),u()},this._openTrackRemover=function(){d(),p()},e(this._lastTouch)){var _=this._touchStart,c=this._touchEnd;this._lastTouch={x:0,y:0},this.addEventListener(t,W,_,!1),this.addEventListener(t,H,c,!1),this.addEventListener(t,$,c,!1),this.addEventListener(r,W,_,!1),this.addEventListener(r,$,c,!1),this.addEventListener(r,H,c,!1)}}this.addEventListener(this._window,"resize",this._handleResize,!1)},e.prototype._handleResize=function(){if(this._isOpen){var t=this.utils.isNull,e=this._rootElement,i=this._drawer;this._isOpen=!1,this.inputChanged(!1),t(e)||(e.style[this._transform]=this._preTransform),t(i)||(i.inputChanged(!1),this._drawerElement.removeEventListener("selectstart",at,!1)),this._touchState<2&&this._removeClickEater()}},e.prototype._removeEventListeners=function(){var t=this.utils.isFunction;this._isTap&&(t(this._removeTap)&&(this._removeTap(),this._removeTap=null),t(this._openTapRemover)&&(this._openTapRemover(),this._openTapRemover=null)),this._isTrack&&(t(this._removeTrack)&&(this._removeTrack(),this._removeTrack=null),t(this._openTrackRemover)&&(this._openTrackRemover(),this._openTrackRemover=null)),this._isSwipe&&(t(this._removeSwipeToggle)&&(this._removeSwipeToggle(),this._removeSwipeToggle=null),t(this._openSwipeRemover)&&(this._openSwipeRemover(),this._openSwipeRemover=null))},e.prototype._touchStart=function(t){1!==this._touchState&&(this._touchState=1,this._lastTouch={x:t.clientX,y:t.clientY})},e.prototype._touchEnd=function(t){var e=0===this._touchState,i=this._hasSwiped,s=this._hasTapped;if(this._hasSwiped=this._hasTapped=!1,this._touchState=0,!(s||e||i)){var n=this._isVertical?t.clientY-this._lastTouch.y:t.clientX-this._lastTouch.x;if(this._isRightDirection(n)){var o=this._getOffset();if(!o)return;if(Math.abs(n)>Math.ceil(o/2))return void this.toggle();this._reset()}else this._isElastic?Math.abs(n)>0&&this._reset():this._isOpen||this._removeClickEater()}},e.prototype._track=function(t){var e=this,i=this._touchState;0!==i&&(1===i&&(this.utils.isNull(this._animationThenable)?(this._addClickEater(),this.utils.isNode(this._drawerElement)&&this._drawerElement.addEventListener("selectstart",at,!1)):this._animationThenable.cancel().then(function(){e._addClickEater(),e.utils.isNode(e._drawerElement)&&e._drawerElement.addEventListener("selectstart",at,!1)}),this._touchState=2),this.utils.requestAnimationFrame(function(){e._rootElement.style[e._transform]=e._calculateTranslation(t)}))},e.prototype._isRightDirection=function(t){switch(this._position){case"left":case"top":return this._isOpen?t<0:t>0;case"right":case"bottom":return this._isOpen?t>0:t<0;default:return!1}},e.prototype._calculateTranslation=function(t){var e,i=this._getOffset();if(!i)return this._preTransform;switch(this._position){case"left":return e=this._checkElasticity(i,t.clientX-this._lastTouch.x),0===e?this._preTransform:"translate3d("+e+"px,0,0)";case"right":return e=this._checkElasticity(i,this._lastTouch.x-t.clientX),0===e?this._preTransform:"translate3d("+-e+"px,0,0)";case"top":return e=this._checkElasticity(i,t.clientY-this._lastTouch.y),0===e?this._preTransform:"translate3d(0,"+e+"px,0)";case"bottom":return e=this._checkElasticity(i,this._lastTouch.y-t.clientY),0===e?this._preTransform:"translate3d(0,"+-e+"px,0)";default:return this._preTransform}},e.prototype._checkElasticity=function(t,e){var i=this._isOpen?t+e:e;return this._isElastic?i:(i<0?i=0:i>t&&(i=t),i)},e.prototype._initializeEvents=function(t,e){var i=this,s=this._useContext,n=this.on(et+"_"+t,function(o,r){n();var a=i.utils,l=a.isString,h=a.isUndefined,u=(i._drawer=r.control)||{},d=i._drawerElement=u.element;if(!l(e)){if(!l(r.position))return void i._log.debug('"position" is incorrectly defined for a control such as "'+m+'" '+('or "'+i.type+'." Please ensure it is a string.'));e=r.position}if(d.removeAttribute(k),i._controllerIsValid(e.toLowerCase())){i._setTransform(),i._addEventListeners(),h(i._isElastic)&&(i._isElastic=r.elastic===!0),r.received||i.dispatchEvent(tt+"_"+t,plat.events.EventManager.DIRECT,{control:i,received:!0,position:e,useContext:s}),r.state?(i._isOpen=!0,i.inputChanged(!0),!r.nextState&&a.isNull(i._preInitializedValue)&&(i._preInitializedValue=!1)):r.nextState&&a.isNull(i._preInitializedValue)&&(i._preInitializedValue=!0);var p=function(){i._isInitialized=!0,i._checkPreInit()};return s?void i._determineTemplate(r.template).then(p):void p()}});this.dispatchEvent(tt+"_"+t,plat.events.EventManager.DIRECT,{control:this,received:!1,position:e,useContext:s})},e.prototype._checkPreInit=function(){var t=this,e=this._preInitializedValue,i=this.utils,s=i.isNull;if(!s(e)){var n=this._isOpen;if(!(n&&e||!n&&!e)){if(this._toggleDelay(),e)return void(this._toggleDelay=i.requestAnimationFrame(this._open.bind(this)));var o=new this._Promise(function(e){t._toggleDelay=i.requestAnimationFrame(function(){e(t._close())})}),r=this._drawer;s(r)||(r.ready=o)}}},e.prototype._determineTemplate=function(t){var e=this,i=this.utils;return i.isString(this._templateUrl)?plat.ui.TemplateControl.determineTemplate(this,this._templateUrl).then(function(t){return e.bindTemplate("drawer",t)}):i.isNode(t)?this.bindTemplate("drawer",t):this._Promise.resolve()},e.prototype._setTransform=function(){var t=this._rootElement.style,e=this.utils.isUndefined,i=this._compat.vendorPrefix;e(this._preTransform=t[i.lowerCase+"Transform"])?e(this._preTransform=t[i.upperCase+"Transform"])?this._transform="transform":this._transform=i.upperCase+"Transform":this._transform=i.lowerCase+"Transform"},e.prototype._controllerIsValid=function(t){var e=this.utils,i=e.isNull;if(i(this._drawerElement))return this._log.debug('Could not find a corresponding control such as "'+m+'" for this "'+this.type+'."'),!1;switch(t){case"top":case"bottom":this._isVertical=!0;case"left":case"right":this._position=t;break;default:return this._log.debug('Incorrect position: "'+t+'" defined for the a control such as a "'+m+'", or "'+this.type+'."'),!1}var s=this._rootElement=this._getRootElement();if(i(s))return this._log.debug('Cannot have a "'+this.type+'" in a hierarchy above the corresponding control such as "'+m+'."'),!1;var n=this.dom;return n.addClass(s,m+"-root"),n.addClass(this.element,this._isVertical?_+"vertical":_+"horizontal"),this._directionalTransitionPrep=m+"-transition-"+t,this._clickEater=this._document.createElement("div"),this._clickEater.className=_+"clickeater",this._styleRootElement(),!0},e.prototype._getRootElement=function(){var t=this._drawer,e=this.utils;if(!e.isNull(t.storedProperties))return t.storedProperties.rootElement;for(var i,s=e.isNode,n=this.root,o=e.isObject(n)&&s(n.element)?n.element:this.element,r=this._drawerElement;s(i=o.parentElement)&&!i.contains(r);)o=i;return o},e.prototype._styleRootElement=function(){var t=this._window,e=this.utils,i=this._drawer,s=this._rootElement,n=s.parentElement,o=t.getComputedStyle(s),r=s.style,a=o.position,l=Number(o.zIndex),h={rootElement:s};if("static"===a&&(h.position=r.position,r.position="relative"),(!e.isNumber(l)||l<1)&&(h.zIndex=r.zIndex,r.zIndex="1"),e.isNode(n)){var u=t.getComputedStyle(n),d=u.overflow;if("hidden"!==d){var p=void 0,_=void 0;if(this._isVertical?(_="overflowY",p=u.overflowY):(_="overflowX",p=u.overflowX),"hidden"!==p){var c=n.style;h.parentOverflow={key:_,value:c[_]},c[_]="hidden"}}}i.storedProperties=h},e.prototype._cleanRootElement=function(){var t=this.utils,e=t.isObject,i=t.isNode,s=this._rootElement,n=this._drawer;if(i(s)&&(this.dom.removeClass(s,m+"-root "+this._directionalTransitionPrep),!t.isNull(n))){var o=n.storedProperties;if(e(o)){var r=s.style,a=s.parentElement,l=o.parentOverflow;r.position=o.position,r.zIndex=o.zIndex,e(l)&&i(a)&&(a.style[l.key]=l.value),delete n.storedProperties,this._drawerElement.setAttribute(k,"")}}},e.prototype._getOffset=function(){return this._isVertical?this._drawerElement.offsetHeight:this._drawerElement.offsetWidth},e._inject={_document:r,_window:o,_compat:s,_animator:a,_Promise:i},e}(plat.ui.BindControl);t.DrawerController=mt,plat.register.control(v,mt);var vt=function(t){function e(){var e=this;t.call(this),this.templateString=this.__templateString,this._isVisible=!1,this._scrollRemover=lt,this._presenceRemover=lt,this._scrollTop=0,this._transitionHash={up:!0,down:!0,left:!0,right:!0,fade:!0},this.__templateString='<div class="plat-modal-container"></div>\n',this.modalLoaded=new this._Promise(function(t,i){e.__resolveFn=t,e.__rejectFn=i}).catch(lt)}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,g+" "+k+" "+(t||""))},e.prototype.initialize=function(){var t=this.options||(this.options={}),e=t.value||(t.value={});this.templateUrl=e.templateUrl||this.templateUrl,this.setClasses()},e.prototype.setTemplate=function(){if(this.templateString!==this.__templateString||this.utils.isString(this.templateUrl)){var t=this.dom,e=t.serializeHtml(this.__templateString),i=this.element;this._container=e.firstChild;this.innerTemplate=t.appendChildren(i.childNodes),i.appendChild(e)}},e.prototype.loaded=function(){var t=this.options.value,e=t.transition,i=this.element;if(this._container=this._container||i.firstElementChild,this._presenceRemover=this.dom.whenPresent(this._injectElement.bind(this),i),!this.utils.isString(e)||"none"===e)return void this.dom.addClass(this._container,_+"no-transition");this._transitionHash[e]||this._log.debug('Custom transition: "'+e+'" defined for "'+this.type+'." Please ensure the transition is defined to avoid errors.');var s=this._compat.animationEvents;return this.utils.isNull(s)?(this._log.debug("This browser does not support CSS3 animations."),void this.dom.addClass(this._container,_+"no-transition")):(this._transitionEnd=s.$transitionEnd,void this.dom.addClass(this._container,_+e+" "+_+"modal-transition"))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._scrollRemover(),this._presenceRemover(),this.utils.isFunction(this.__rejectFn)&&(this.__rejectFn(),this.__rejectFn=this.__resolveFn=null)},e.prototype.show=function(){var t=!this._isVisible,e=this._show();return t&&this.inputChanged(!0),e},e.prototype.hide=function(){var t=this.isVisible,e=this._hide();return t&&this.inputChanged(!1),e},e.prototype.toggle=function(){return this._isVisible?this.hide():this.show()},e.prototype.isVisible=function(){return this._isVisible},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.utils;if(s===!0&&n.isNull(t))return void this.inputChanged(this._isVisible);if(n.isBoolean(t)){if(t){if(this._isVisible)return;return void this._show()}return void(this._isVisible&&this._hide())}this._log.debug("Attempting to show or hide a "+this.type+" with a bound value that is something other than a boolean.")},e.prototype._show=function(){var t=this,e=this.dom,i=this.utils;return i.isNull(this.innerTemplate)?(this._isVisible=!0,new this._Promise(function(s){i.requestAnimationFrame(function(){t._alignModal(),e.removeClass(t.element,k),i.defer(function(){i.requestAnimationFrame(function(){e.addClass(t._container,_+"activate"),s()})},20)})})):this._bindInnerTemplate()},e.prototype._alignModal=function(t){var e=this,i=this.utils,s=i.isNull,n=this._document,o=n.documentElement,r=s(o)||!o.scrollTop?n.body:o,a=r.scrollTop;this._scrollTop!==a&&(s(t)?(this.element.style.top=a+"px",this._scrollRemover=this.addEventListener(this._window,"scroll",this._alignModal,!1)):i.requestAnimationFrame(function(){e.element.style.top=a+"px"}),this._scrollTop=a)},e.prototype._hide=function(){var t,e=this,i=this.dom,s=this.utils;
return this._scrollRemover(),this._scrollRemover=lt,this._isVisible=!1,s.isString(this._transitionEnd)?(t=this._addHideOnTransitionEnd(),s.requestAnimationFrame(function(){i.removeClass(e._container,_+"activate")})):t=new this._Promise(function(t){s.requestAnimationFrame(function(){i.addClass(e.element,k),i.removeClass(e._container,_+"activate"),t()})}),t},e.prototype._bindInnerTemplate=function(){var t=this,e=this.innerTemplate,i=this.bindableTemplates,s="modal";return i.add(s,e),this.innerTemplate=null,i.bind(s).then(function(e){return t._container.insertBefore(e,null),t.utils.isFunction(t.__resolveFn)&&(t.__resolveFn(),t.__resolveFn=t.__rejectFn=null),t._show()})},e.prototype._injectElement=function(){var t=this.element,e=t.parentElement,i=this._document.body;this.utils.isNode(e)&&e!==i&&i.insertBefore(t,null)},e.prototype._addHideOnTransitionEnd=function(){var t=this;return new this._Promise(function(e){var i=t.element,s=t.addEventListener(i,t._transitionEnd,function(){s(),t.dom.addClass(i,k),e()},!1)})},e._inject={_window:o,_document:r,_compat:s,_Promise:i},e}(plat.ui.BindControl);t.Modal=vt,plat.register.control(g,vt);var gt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-slider-container">\n    <div class="plat-slider-track">\n        <div class="plat-knob"></div>\n    </div>\n</div>\n',this._isVertical=!1,this._knobOffset=0,this._touchState=0,this._removeVisibilityListener=lt}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,T+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.loaded=function(){var t=this.element,e=this._slider=t.firstElementChild.firstElementChild,i=this.utils.isNumber,s=this.options||{},n=s.value||{},o=Number(n.value),r=n.min,a=n.max,l=n.step,h=this._reversed=n.reverse===!0,u=this.min=i(r)?Math.floor(r):0,d=this.max=i(a)?Math.ceil(a):100,p=i(o)?Math.round(o):u,c=_+this._validateOrientation(n.orientation);this._knob=e.firstElementChild,h&&(c+=it),this.dom.addClass(t,c),this.value=u,this._step=i(l)&&l>0?Math.round(l):1,u>=d&&(this._log.debug('"'+this.type+"'s\" min is greater than or equal to its max. Setting max to min + 1."),this.max=u+1),this._setLength(),this._initializeEvents(),this.setValue(p)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._removeVisibilityListener(),this._sliderVisible=null},e.prototype.setValue=function(t){this._setValue(t,!0)},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){this._setValue(t,!1)},e.prototype._setValue=function(t,e){var i=this.utils;if(1===this._touchState)return void this._log.debug("Cannot set the value of "+this.type+" while the user is manipulating it.");if(i.isNull(t)&&(t=this.min,e=!0),!i.isNumber(t)){var s=Number(t);if(!i.isNumber(s))return void this._log.warn(this.type+" has its value bound to a property that cannot be interpreted as a Number.");t=s,e=!0}this._setValueProperty(t,!0,e)},e.prototype._initializeEvents=function(){var t,e,i=this,s=this.element,n=this._track,o=this._touchEnd;this._isVertical?(t=Q+"down",e=Q+"up"):(t=Q+"right",e=Q+"left"),this.addEventListener(s,W,this._touchStart,!1),this.addEventListener(s,t,n,!1),this.addEventListener(s,e,n,!1),this.addEventListener(s,H,o,!1),this.addEventListener(s,$,o,!1),this.addEventListener(this._window,"resize",function(){i.utils.isNull(i._sliderVisible)&&(i._setLength(),i._setKnob())},!1)},e.prototype._touchStart=function(t){var e=this;if(1!==this._touchState){this._touchState=1,this._lastTouch={x:t.clientX,y:t.clientY,value:this.value};var i=t.target;if(i!==this._knob){var s;s=this._isVertical?i===this.element?this._reversed?t.offsetY-this._sliderOffset:this._maxOffset-(t.offsetY-this._sliderOffset):i===this._slider?this._reversed?t.offsetY:this._knobOffset-t.offsetY:this._reversed?t.offsetY:this._maxOffset-t.offsetY:i===this.element?this._reversed?this._maxOffset-(t.offsetX-this._sliderOffset):t.offsetX-this._sliderOffset:i===this._slider?this._reversed?this._knobOffset-t.offsetX:t.offsetX:this._reversed?this._maxOffset-t.offsetX:t.offsetX,this.utils.requestAnimationFrame(function(){e._knobOffset=e._setSliderProperties(s)})}}},e.prototype._touchEnd=function(t){var e=this;if(1!==this._touchState)return void(this._touchState=0);this._touchState=2;var i=this._calculateOffset(t),s=this._maxOffset;this.utils.requestAnimationFrame(function(){return e._touchState=0,e._lastTouch.value!==e.value&&e._trigger("change"),i<0?void(e._knobOffset=0):i>s?void(e._knobOffset=s):void(e._knobOffset=i)})},e.prototype._track=function(t){var e=this;0!==this._touchState&&this.utils.requestAnimationFrame(function(){e._setSliderProperties(e._calculateOffset(t))})},e.prototype._setSliderProperties=function(t){var e,i=this._maxOffset;if(t<=0){if(e=this.min,t=0,e-this.value>=0)return t}else if(t>=i){if(e=this.max,t=i,e-this.value<=0)return t}else e=this._calculateValue(t);return this._setValueProperty(e,!1,!0),this._slider.style[this._lengthProperty]=t+"px",t},e.prototype._calculateValue=function(t){var e=this._step;return this.min+Math.round(t/this._increment/e)*e},e.prototype._calculateKnobPosition=function(t){return(t-this.min)*this._increment},e.prototype._calculateOffset=function(t){return this._isVertical?this._reversed?this._knobOffset+t.clientY-this._lastTouch.y:this._knobOffset+this._lastTouch.y-t.clientY:this._reversed?this._knobOffset+this._lastTouch.x-t.clientX:this._knobOffset+t.clientX-this._lastTouch.x},e.prototype._setLength=function(){var t=this,e=this._slider.parentElement;return this._isVertical?(this._lengthProperty="height",this._maxOffset=e.clientHeight,this._sliderOffset=e.offsetTop):(this._lengthProperty="width",this._maxOffset=e.clientWidth,this._sliderOffset=e.offsetLeft),this._maxOffset?void this._setIncrement():void(this._sliderVisible=new this._Promise(function(i){t._removeVisibilityListener=t.dom.whenVisible(function(){t._sliderVisible=null,t._setLength(),i()},e)}))},e.prototype._setIncrement=function(){return this._increment=this._maxOffset/(this.max-this.min)},e.prototype._setValueProperty=function(t,e,i){var s=this.value;if(t!==s){if(t>=this.max)t=this.max;else if(t<=this.min)t=this.min;else if(Math.abs(t-s)<this._step)return;this.value=this.element.value=t,e&&this._setKnob(),i&&this.inputChanged(t,s),this._trigger("input")}},e.prototype._setKnob=function(t){var e=this;this._Promise.resolve(this._sliderVisible).then(function(){var i={},s=e._calculateKnobPosition(t||e.value);s!==e._knobOffset&&(i[e._lengthProperty]=s+"px",e._animator.animate(e._slider,K,{properties:i}),e._knobOffset=s)})},e.prototype._trigger=function(t){var e=plat.acquire(l);e.initialize(this.element,t),e.trigger()},e.prototype._validateOrientation=function(t){if(this.utils.isUndefined(t))return"horizontal";var e;return"horizontal"===t?e=t:"vertical"===t?(e=t,this._isVertical=!0):(this._log.debug('Invalid orientation "'+t+'" for '+this.type+'. Defaulting to "horizontal."'),e="horizontal"),e},e._inject={_document:r,_window:o,_Promise:i,_animator:a},e}(plat.ui.BindControl);t.Slider=gt,plat.register.control(T,gt);var yt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-range-container">\n    <div class="plat-range-track">\n        <div class="plat-lower-knob"></div>\n        <div class="plat-upper-knob"></div>\n    </div>\n</div>\n',this._isVertical=!1,this._touchState=0,this._removeVisibilityListener=lt,this._forceFirstTime=!1}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,E+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.loaded=function(){var t=this.element,e=this._slider=t.firstElementChild.firstElementChild,i=this.utils.isNumber,s=this.options||{},n=s.value||{},o=Number(n.lower),r=Number(n.upper),a=n.identifiers||{},l=n.min,h=n.max,u=n.step,d=this._reversed=n.reverse===!0,p=this.min=i(l)?Math.floor(l):0,c=this.max=i(h)?Math.ceil(h):100,f=i(o)?Math.round(o):p,m=i(r)?Math.round(r):c,v=_+this._validateOrientation(n.orientation);if(this._lowerKnob=e.firstElementChild,this._upperKnob=e.lastElementChild,this._lowerIdentifier=a.lower||"lower",this._upperIdentifier=a.upper||"upper",d){var g=this._lowerKnob;this._lowerKnob=this._upperKnob,this._upperKnob=g,v+=it}this.dom.addClass(t,v),this.lower=p,this.upper=c,this._step=i(u)&&u>0?Math.round(u):1,p>=c&&(this._log.debug('"'+this.type+"'s\" min is greater than or equal to its max. Setting max to min + 1."),this.max=p+1),this._setPositionAndLength(),this._setLowerKnobPosition(p),this._initializeEvents(),this.setLower(f),this.setUpper(m)},e.prototype.setLower=function(t){this._setLower(t,!0)},e.prototype.setUpper=function(t){this._setUpper(t,!0)},e.prototype.observeProperties=function(t){t.observeProperty(this._setLowerBoundProperty,this._lowerIdentifier),t.observeProperty(this._setUpperBoundProperty,this._upperIdentifier)},e.prototype._setLowerBoundProperty=function(t,e,i,s){this._setLower(t,!1,s)},e.prototype._setUpperBoundProperty=function(t,e,i,s){this._setUpper(t,!1,s)},e.prototype._setLower=function(t,e,i){var s=this.utils;if(2===this._touchState)return void this._log.debug("Cannot set the value of the "+this.type+"'s lower knob while the user is manipulating it.");if(s.isNull(t)&&(t=this.min,i===!0?this._forceFirstTime=!0:e=!0),!s.isNumber(t)){var n=Number(t);if(!s.isNumber(n))return void this._log.warn(this.type+" has its lower value bound to a property that cannot be interpreted as a Number.");t=n,i===!0?this._forceFirstTime=!0:e=!0}this._setLowerValue(t,!0,e,!0)},e.prototype._setUpper=function(t,e,i){var s=this.utils;if(3===this._touchState)return void this._log.debug("Cannot set the value of the "+this.type+"'s upper knob while the user is manipulating it.");if(s.isNull(t)&&(t=this.max,e=!0),!s.isNumber(t)){var n=Number(t);if(!s.isNumber(n))return void this._log.warn(this.type+" has its upper value bound to a property that cannot be interpreted as a Number.");t=n,e=!0}this._setUpperValue(t,!0,e||i===!0&&this._forceFirstTime,!0)},e.prototype._initializeEvents=function(){var t,e,i=this,s=this._lowerKnob,n=this._upperKnob,o=this._touchStart,r=this._touchEnd,a=this._trackLower,l=this._trackUpper;this._isVertical?(t=Q+"down",e=Q+"up"):(t=Q+"right",e=Q+"left"),this.addEventListener(s,W,o,!1),this.addEventListener(n,W,o,!1),this.addEventListener(s,t,a,!1),this.addEventListener(s,e,a,!1),this.addEventListener(n,t,l,!1),this.addEventListener(n,e,l,!1),this.addEventListener(s,H,r,!1),this.addEventListener(n,H,r,!1),this.addEventListener(s,$,r,!1),this.addEventListener(n,$,r,!1),this.addEventListener(this._window,"resize",function(){i.utils.isNull(i._rangeVisible)&&(i._setPositionAndLength(),i._setLowerKnobPosition(),i._setUpperKnobPosition())},!1)},e.prototype._touchStart=function(t){var e=this._touchState;if(1!==e&&2!==e&&3!==e){this._touchState=1;var i=t.currentTarget,s=this._lastTouch;if(this.utils.isNull(s))this.dom.addClass(i,_+"top");else if(s.target!==i){var n=this.dom;n.addClass(i,_+"top"),n.removeClass(s.target,_+"top")}this._lastTouch={x:t.clientX,y:t.clientY,value:i===this._lowerKnob?this.lower:this.upper,target:i}}},e.prototype._touchEnd=function(t){var e=this,i=this._touchState;if(0===i||4===i)return void(this._touchState=0);this._touchState=4;var s=this._lastTouch,n=t.currentTarget;this.utils.isNull(s)||s.target!==n||this.utils.requestAnimationFrame(function(){e._touchState=0;var i=n===e._lowerKnob,o=e._calculateOffset(t,i);i?s.value!==e.lower&&e._trigger("change"):s.value!==e.upper&&e._trigger("change"),e._setOffset(o,i)})},e.prototype._setOffset=function(t,e){var i=this._maxOffset;return t<0?e?this._lowerKnobOffset=0:this._upperKnobOffset=0:t>i?e?this._lowerKnobOffset=i:this._upperKnobOffset=i:e?this._lowerKnobOffset=t:this._upperKnobOffset=t},e.prototype._trackLower=function(t){var e=this._touchState;if(2!==e)if(1===e)this._touchState=2;else if(0===e||3===e)return;var i,s=this._maxOffset,n=this._calculateOffset(t,!0);return n<=0?(i=this.min,i-this.lower>=0&&(i=null),n=0):n>=s?(i=this.max,i-this.lower<=0&&(i=null),n=s):(i=this._calculateValue(n),i-this.lower===0&&(i=null)),n>this._upperKnobOffset?(this._positionTogether(n,i),void this._setOffset(n,!1)):void this._positionLower(n,i)},e.prototype._trackUpper=function(t){var e=this._touchState;if(3!==e)if(1===e)this._touchState=3;else if(0===e||2===e)return;var i,s=this._maxOffset,n=this._calculateOffset(t,!1);return n<=0?(i=this.min,i-this.upper>=0&&(i=null),n=0):n>=s?(i=this.max,i-this.upper<=0&&(i=null),n=s):(i=this._calculateValue(n),i-this.upper===0&&(i=null)),n<this._lowerKnobOffset?(this._positionTogether(n,i),void this._setOffset(n,!0)):void this._positionUpper(n,i)},e.prototype._positionLower=function(t,e){var i=this;this.utils.requestAnimationFrame(function(){var s=i._slider.style;s[i._positionProperty]=t+"px",s[i._lengthProperty]=i._upperKnobOffset-t+"px",null!==e&&i._setLowerValue(e,!1,!0,!0)})},e.prototype._positionUpper=function(t,e){var i=this;this.utils.requestAnimationFrame(function(){i._slider.style[i._lengthProperty]=t-i._lowerKnobOffset+"px",null!==e&&i._setUpperValue(e,!1,!0,!0)})},e.prototype._positionTogether=function(t,e){var i=this;this.utils.requestAnimationFrame(function(){var s=i._slider.style;s[i._positionProperty]=t+"px",s[i._lengthProperty]="0px",null!==e&&(i._setLowerValue(e,!1,!1,!1),i._setUpperValue(e,!1,!0,!0))})},e.prototype._calculateValue=function(t){var e=this._step;return this.min+Math.round(t/this._increment/e)*e},e.prototype._calculateOffset=function(t,e){var i,s=e?this._lowerKnobOffset:this._upperKnobOffset;return i=this._isVertical?this._reversed?t.clientY-this._lastTouch.y:this._lastTouch.y-t.clientY:this._reversed?this._lastTouch.x-t.clientX:t.clientX-this._lastTouch.x,s+i},e.prototype._calculateKnobPosition=function(t){return(t-this.min)*this._increment},e.prototype._setLowerValue=function(t,e,i,s){var n=this.lower;if(t!==n){if(t>=this.max)t=this.max;else if(t<=this.min)t=this.min;else if(Math.abs(t-n)<this._step)return;this.lower=t,e&&this._setLowerKnobPosition(),i&&this._fireChange(),s&&this._trigger("input")}},e.prototype._setUpperValue=function(t,e,i,s){var n=this.upper;if(t!==n){if(t>=this.max)t=this.max;else if(t<=this.min)t=this.min;else if(Math.abs(t-n)<this._step)return;this.upper=t,e&&this._setUpperKnobPosition(),i&&this._fireChange(),s&&this._trigger("input")}},e.prototype._setIncrement=function(){return this._increment=this._maxOffset/(this.max-this.min)},e.prototype._setPositionAndLength=function(){var t=this,e=this._slider.parentElement;return this._isVertical?(this._lengthProperty="height",this._positionProperty=this._reversed?"top":"bottom",this._maxOffset=e.clientHeight):(this._lengthProperty="width",this._positionProperty=this._reversed?"right":"left",this._maxOffset=e.clientWidth),this._maxOffset?void this._setIncrement():void(this._rangeVisible=new this._Promise(function(i){t._removeVisibilityListener=t.dom.whenVisible(function(){t._rangeVisible=null,t._setPositionAndLength(),i()},e)}))},e.prototype._setLowerKnobPosition=function(t){var e=this;this._Promise.resolve(this._rangeVisible).then(function(){var i={},s=e._upperKnobOffset,n=e.utils.isNumber(s)?s:e._setOffset(e._calculateKnobPosition(e.upper),!1),o=e._calculateKnobPosition(t||e.lower);o!==e._lowerKnobOffset&&(i[e._positionProperty]=o+"px",i[e._lengthProperty]=n-o+"px",e._animator.animate(e._slider,K,{properties:i}),e._lowerKnobOffset=o)})},e.prototype._setUpperKnobPosition=function(t){var e=this;this._Promise.resolve(this._rangeVisible).then(function(){var i={},s=e._calculateKnobPosition(t||e.upper);s!==e._upperKnobOffset&&(i[e._lengthProperty]=s-e._lowerKnobOffset+"px",e._animator.animate(e._slider,K,{properties:i}),e._upperKnobOffset=s)})},e.prototype._fireChange=function(){var t={};t[this._lowerIdentifier]=this.lower,t[this._upperIdentifier]=this.upper,this.inputChanged(t)},e.prototype._trigger=function(t){var e=plat.acquire(l);e.initialize(this.element,t),e.trigger()},e.prototype._validateOrientation=function(t){if(this.utils.isUndefined(t))return"horizontal";var e;return"horizontal"===t?e=t:"vertical"===t?(e=t,this._isVertical=!0):(this._log.debug('Invalid orientation "'+t+'" for '+this.type+'. Defaulting to "horizontal."'),e="horizontal"),e},e._inject={_document:r,_window:o,_Promise:i,_animator:a},e}(plat.ui.BindControl);t.Range=yt,plat.register.control(E,yt);var bt=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,w+" "+(t||""))},e.prototype.initialize=function(){t.prototype.initialize.call(this),this.setClasses()},e}(plat.ui.controls.Select);t.Select=bt,plat.register.control(w,bt);var Ct=function(t){function e(){t.apply(this,arguments),this.replaceWith="input",this.value=""}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,P+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){this.dom.clearNode(this.element)},e.prototype.loaded=function(){var t=this.options||{},e=t.value||{},i=e.pattern,s=e.validation,n=this.utils.isString;this._type=this.attributes.type||e.type||"text",n(i)&&""!==i&&("/"===i[0]&&"/"===i[i.length-1]&&(i=i.slice(1,-1)),this._pattern=new RegExp(i)),n(s)&&""!==s&&("/"===s[0]&&"/"===s[s.length-1]&&(s=s.slice(1,-1)),this._validation=new RegExp(s)),this._initializeType()},e.prototype.validate=function(){return this._validation.test(this.element.value)},e.prototype.clear=function(){var t=this.element,e=t.value;""!==e&&(t.value=this.value="",this.inputChanged(this.value,e))},e.prototype.focus=function(){this.element.focus()},e.prototype.blur=function(){this.element.blur()},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty,null,!0)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.element.value;if(this.utils.isNull(t)){if(t="",s===!0)return void(this.utils.isNull(n)&&this._onInputChanged(t))}else if(t===n)return;this._onInputChanged(t)},e.prototype._initializeType=function(){var t=this._type;switch(t){case"text":this._pattern=this._pattern||/[\S\s]*/,this._validation=this._validation||this._pattern;break;case"email":this._pattern=this._pattern||/[\S\s]*/,this._validation=this._validation||this._regex.validateEmail;break;case"password":this._pattern=this._pattern||/[\S\s]*/,this._validation=this._validation||this._pattern;break;case"telephone":t="tel";case"tel":this._pattern=this._pattern||this._regex.validateTelephone,this._validation=this._validation||this._pattern;break;case"number":this._pattern=this._pattern||/^[0-9\.,]*$/,this._validation=this._validation||this._pattern,t="tel";break;case"hidden":return void this.element.setAttribute(k,"");case"radio":return void this._log.debug(t+" is not supported by "+this.type+". Please use a "+C+" instead.");case"checkbox":return void this._log.debug(t+" is not supported by "+this.type+". Please use a "+f+" instead.");case"range":return void this._log.debug(t+" is not supported by "+this.type+". Please use a "+T+" instead.");case"file":return void this._log.debug(t+" is not supported by "+this.type+". Please use a "+N+" instead.");default:this._log.debug(t+" is not yet fully supported by "+this.type+'. Defaulting to type="text".'),t="text",this._pattern=this._pattern||/[\S\s]*/,this._validation=this._validation||this._pattern}this._addTextEventListener()},e.prototype._addTextEventListener=function(){var t,e=this,i=this.element,s=this._compat,n=this.utils,o=!1,r=function(){o||e._onInput()},a=function(){n.isFunction(t)||(t=n.postpone(function(){r(),t=null}))};n.isUndefined(s.ANDROID)&&(this.addEventListener(i,"compositionstart",function(){return o=!0},!1),this.addEventListener(i,"compositionend",function(){o=!1,r()},!1)),s.hasEvent("input")?this.addEventListener(i,"input",r,!1):(this.addEventListener(i,"keydown",function(t){var s=t.keyCode;if(!(91===s||92===s||s>15&&s<28||s>32&&s<41)){var n=e._pattern,o=t.char;return n.test(o)&&n.test(i.value+o)?void a():void t.preventDefault()}},!1),this.addEventListener(i,"cut",a,!1),this.addEventListener(i,"paste",a,!1)),this.addEventListener(i,"change",r,!1)},e.prototype._onInput=function(){var t=this.element,e=t.value,i=this._stripInput(t.value);e!==i&&(e=t.value=i),e!==this.value&&(this.value=t.value,this.inputChanged(this.value))},e.prototype._onInputChanged=function(t){var e=this.element;t=this._stripInput(t),e.value=t,this.value=e.value},e.prototype._stripInput=function(t){for(var e,i="",s=i,n=this._pattern,o=t.length,r=0;r<o;++r)e=t[r],n.test(e)&&(i+=e,n.test(i)?s=i:i=s);return i},e._inject={_compat:s,_regex:n},e}(plat.ui.BindControl);t.Input=Ct,plat.register.control(P,Ct);var xt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-file-container">\n    <input type="file" class="plat-file-hidden" />\n    <input type="text" class="plat-file-input" plat-keydown="_onKeyDown" />\n    <button class="plat-file-button" plat-tap="_selectFiles"></button>\n</div>\n',this._removeListener=lt}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,N+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){for(var t,e,i,s=this.element,n=this._hiddenInput=s.firstElementChild.firstElementChild,o=this._visibleInput=n.nextElementSibling,r=o.nextElementSibling,a=this.attributes,l=Object.keys(a),h=l.length,u=plat.dependency.injectors.control,d=/plat-(?:control|hide|context)|class|style/,p=!1,_=this.utils,c=_.isNull,f=_.delimit,m=_.isString,v=0;v<h;++v)t=l[v],e=f(t,"-"),i=a[t],m(i)&&!d.test(e)&&c(u[e])?"id"===e?(s.removeAttribute(e),n.setAttribute(e,i)):"multiple"===e?(p=!0,n.setAttribute(e,i)):"disabled"===e?(n.setAttribute(e,i),o.setAttribute(e,i),r.setAttribute(e,i)):n.setAttribute(e,i):e===R&&(n.setAttribute(e,i),o.setAttribute(e,i),r.setAttribute(e,i));if(c(this.innerTemplate))return void(r.textContent=p?"Select files":"Select a file");var g=this.innerTemplate.textContent.replace(/\r|\n/g,"");return _.isEmpty(g)?void(r.textContent=p?"Select files":"Select a file"):void(r.textContent=g)},e.prototype.loaded=function(){var t=this._hiddenInput=this._hiddenInput||this.element.firstElementChild.firstElementChild;this._visibleInput=this._visibleInput||t.nextElementSibling,this._addChangeListener()},e.prototype.validate=function(){return!this.utils.isEmpty(this._hiddenInput.value)},e.prototype.clear=function(){var t=this._hiddenInput;if(!this.utils.isEmpty(t.value)){t.value=null;var e=this._hiddenInput=t.cloneNode(!0);this.element.firstElementChild.replaceChild(e,t),this._addChangeListener(),this._visibleInput.value="",this.inputChanged(null),this._trigger("change")}},e.prototype.click=function(){this._selectFiles()},e.prototype.value=function(){var t=this._hiddenInput,e=t.files;if(!this.utils.isNull(e))return t.multiple?Array.prototype.slice.call(e):e[0]},e.prototype.disable=function(){var t="disabled",e=this._visibleInput;this._hiddenInput.setAttribute(t,t),e.setAttribute(t,t),e.nextElementSibling.setAttribute(t,t),this.element.setAttribute(t,t)},e.prototype.enable=function(){var t="disabled",e=this._visibleInput;this._hiddenInput.removeAttribute(t),e.removeAttribute(t),e.nextElementSibling.removeAttribute(t),this.element.removeAttribute(t)},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.utils;if(!n.isFile(t))return void this.clear();var o=this._hiddenInput,r=o.files;if(!n.isNull(r)){if(!o.multiple)return void(t!==r[0]&&(this.inputChanged(r[0]),this._trigger("change")));this.inputChanged(Array.prototype.slice.call(r)),this._trigger("change")}},e.prototype._addChangeListener=function(){this._removeListener(),this._removeListener=this.addEventListener(this._hiddenInput,"change",this._filesSelected,!1)},e.prototype._onKeyDown=function(t){var e=t.keyCode,i=plat.controls.KeyCodes;return e===i.tab||(e!==i.backspace&&e!==i.delete||this.clear(),t.preventDefault(),!1)},e.prototype._selectFiles=function(){this._hiddenInput.click()},e.prototype._filesSelected=function(){var t=this._hiddenInput,e=this._visibleInput,i=t.files;if(this.utils.isEmpty(i))return void this.clear();if(t.multiple){for(var s=[],n=i.length,o=0;o<n;++o)s.push(i[o].name);e.value=s.join(", "),this.inputChanged(Array.prototype.slice.call(i))}else{var r=i[0];e.value=r.name,this.inputChanged(r)}this._trigger("change")},e.prototype._trigger=function(t){var e=plat.acquire(l);e.initialize(this.element,t),e.trigger()},e._inject={_compat:s},e}(plat.ui.BindControl);t.File=xt,plat.register.control(N,xt);var Tt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-carousel-viewport">\n    <div class="plat-carousel-container"></div>\n</div>\n',this._listeners=[],this._isVertical=!1,this._hasSwiped=!1,this._inTouch=!1,this._hasMoved=!1,this._lastTouch={x:0,y:0},this._loaded=!1,this._index=-1,this._previousIndex=-1,this._nextIndex=-1,this._currentOffset=0,this._removeInterval=lt,this._removeSuspend=lt,this._isAuto=!1,this._isPaused=!1,this._selfPause=!1,this._itemNodes=[],this._removeListeners=[],this._outerStart=!1,this._outerEnd=!1,this._goToIntervalConstant=125}return __extends(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,S+" "+(t||""))},e.prototype.contextChanged=function(t,e){var i=this.utils;return i.isFunction(this._onLoad)?(i.isArray(t)?this._setListener():(this._log.debug(this.type+" context set to something other than an Array."),t=[]),this._executeEvent([{object:t,type:"splice"}]),void this._initializeIndex(0)):void this.loaded()},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){var t=this._document.createElement("div");t.className=S+"-item",t.appendChild(this.innerTemplate),this.bindableTemplates.add("item",t)},e.prototype.loaded=function(){var t=this,e=this.utils,i=this.context;if(!e.isArray(i))return void this._log.warn("The context of a "+this.type+" must be an Array.");this._animate=!1;var s,n=this.options||{},o=n.value||{},r=o.index,a=e.isNumber,l=this._validateOrientation(o.orientation),h=o.interval,u=this._interval=a(h)?Math.abs(h):3e3,d=o.suspend,p=this.dom,c=this.element,f=this._viewport=c.firstElementChild;switch(o.transition){case"fade":s="fade",this._fade=1;break;case"fade-in":s="fade",this._fade=2;break;case"fade-out":s="fade",this._fade=3;break;default:s="translate",this._fade=0}this._container=f.firstElementChild,this._type=o.type||"track swipe",this._isInfinite=o.infinite===!0,this._suspend=Math.abs(a(d)?u-d:u-3e3),p.addClass(c,_+l+" "+(_+s)),this._onLoad=function(){var e=t._index;r=a(r)&&r>=0?r<i.length?r:i.length-1:null,t._index=0,p.whenVisible(function(){t._initializeIndex(null===r?e:r),t._addEventListeners(),t._loaded=!0},c)},this._init()},e.prototype.goToNext=function(){return this._goToNext(!1)},e.prototype.goToPrevious=function(){return this._goToPrevious(!1)},e.prototype.goToIndex=function(t,e){return this._goToIndex(t,!1,e)},e.prototype.pause=function(){this._selfPause=!1,this._isAuto&&!this._isPaused&&(this._isPaused=!0,this._removeSuspend(),this._removeSuspend=lt,this._removeInterval(),this._removeInterval=lt)},e.prototype.resume=function(){this._isAuto&&this._isPaused&&(this._isPaused=this._selfPause=!1,this._initiateInterval())},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._listeners=[],this._removeEventListeners()},e.prototype.onInput=function(t){var e=this._listeners;return e.push(t),function(){var i=e.indexOf(t);i!==-1&&e.splice(i,1)}},e.prototype.inputChanged=function(t,e){if(t!==e)for(var i=this._listeners,s=i.length,n=0;n<s;++n)i[n](t,e)},e.prototype.observeProperties=function(t){t.observeProperty(this._setBoundProperty)},e.prototype._setBoundProperty=function(t,e,i,s){var n=this.utils;if(n.isNull(t)){if(s===!0)return this._index=0,void this.inputChanged(0,t)}else if(n.isNumber(t)){if(t<0)return this._index=0,this.inputChanged(0,t),void this._initializeIndex(0)}else if(t=Number(t),!n.isNumber(t))return void this._log.warn(this.type+" has its index bound to a property that cannot be interpreted as a Number.");return this._loaded?void this._goToIndex(t,!0,s===!0):void(this._index=t)},e.prototype._reset=function(){if(!this._fade){var t={};t[this._transform]=this._calculateStaticTranslation(0),this._initiateAnimation({properties:t})}},e.prototype._verifyLength=function(){var t=this.context,e=this._index;if(!this.utils.isArray(t)||0===t.length)return this.utils.isUndefined(e)||this.inputChanged(this._index=void 0,e),this._fade||(this._container.style[this._transform]=this._calculateStaticTranslation(-this._currentOffset)),this._removeEventListeners(),void this._checkArrows();var i=t.length-1;return e>i?void this.goToIndex(i):void this._checkArrows()},e.prototype._setIndexWindow=function(){var t=this._index,e=this._itemNodes.length-1;e<0?this._previousIndex=this._nextIndex=e:t>=e?(t>e&&(t=this._index=e),this._previousIndex=t-1,this._nextIndex=this._isInfinite?0:-1):t<=0?(t<0&&(t=this._index=0),this._previousIndex=this._isInfinite?e:-1,this._nextIndex=t+1):(this._previousIndex=t-1,this._nextIndex=t+1)},e.prototype._goToNext=function(t){var e=this;return this._Promise.all(this._addQueue).then(function(){var i=e._index,s=!1;if(i>=e._itemNodes.length-1&&!(s=e._isInfinite))return e._isAuto&&!e._isPaused&&(e.pause(),e._selfPause=!0),e._Promise.resolve(!1);var n=e._getLength();return n?e._fade?e._fadeNext(t,s):e._translateNext(n,t,s):e.goToIndex(e._nextIndex,!0)})},e.prototype._goToPrevious=function(t){var e=this;return this._Promise.all(this._addQueue).then(function(){var i=e._index,s=!1;if(i<=0&&!(s=e._isInfinite))return e._Promise.resolve(!1);e._selfPause&&e.resume();var n=e._getLength();return n?e._fade?e._fadePrevious(t,s):e._translatePrevious(n,t,s):e.goToIndex(e._previousIndex,!0)})},e.prototype._goToIndex=function(t,e,i){var s=this;return this._Promise.all(this._addQueue).then(function(){var n=s._index;return s.utils.isUndefined(n)?(s._initializeIndex(0),s.inputChanged(s._index,t),s._isInfinite||(t<s.context.length-1?s._selfPause&&s.resume():s._isAuto&&!s._isPaused&&(s.pause(),s._selfPause=!0)),s._Promise.resolve(!0)):t===n?s._Promise.resolve(!1):i===!0?(s._initializeIndex(t),s.inputChanged(s._index,t),s._isInfinite||(t<s.context.length-1?s._selfPause&&s.resume():s._isAuto&&!s._isPaused&&(s.pause(),s._selfPause=!0)),s._Promise.resolve(!0)):t-n>0&&t===s._nextIndex?s._goToNext(e):t===s._previousIndex?s._goToPrevious(e):s._handleGoToIndex(t,e)})},e.prototype._handleGoToIndex=function(t,e){var i=this._index;if(t===i||t<0||t>=this.context.length)return this._Promise.resolve(!1);if(this._selfPause&&this.resume(),!this._getLength())return this._initializeIndex(t),this._Promise.resolve(!0);var s,n,o,r=this._Promise,a=this.utils.defer;t>i?(s=this._goToNext,n=t-i,this._isInfinite&&(o=this._itemNodes.length-t+i,o<n&&(s=this._goToPrevious,n=o))):(s=this._goToPrevious,n=i-t,this._isInfinite&&(o=this._itemNodes.length-i+t,o<n&&(s=this._goToNext,n=o))),s=s.bind(this);for(var l=[],h=this._removeListeners,u=this._goToIntervalConstant,d=0,p=function(t){var i=a(function(){var n=h.indexOf(i);n!==-1&&h.splice(n,1),t(s(e))},d+=Math.round(u/n));h.push(i)};--n>0;)l.push(new r(p));return l.push(s(e)),r.all(l).then(function(t){for(var e=!1;t.length>0&&!(e=e||t.pop()););return e})},e.prototype._translateNext=function(t,e,i){var s=this;return this._cancelCurrentAnimations().then(function(){s._outerEnd||s._initializeOuterNodes();var n={};n[s._transform]=s._calculateStaticTranslation(-t);var o,r=s._initiateAnimation({properties:n}),a=s._index;return i?s._index=o=0:o=++s._index,e||s.inputChanged(s._index,a),r.then(function(){return s._handleNext(o,t),s._checkArrows(),!0})})},e.prototype._fadeNext=function(t,e){var i=this;return this._cancelCurrentAnimations().then(function(){
i._outerEnd||i._initializeOuterNodes();var s,n,o,r,a=i._index,l=i._animator,h=i.dom,u=i._container,d=Array.prototype.slice.call(u.childNodes),p=d.length,c=d[p-5],f=d[p-2],m=i._fade;return 2===m?(o=l.animate(f,K),h.addClass(c,_+"middle"),h.addClass(f,_+"top"),r=function(){h.removeClass(c,_+"top"),h.removeClass(c,_+"middle")}):3===m?(n=l.animate(c,K),h.addClass(f,_+"top"),h.toggleClass(c,_+"top "+_+"middle"),r=function(){h.removeClass(c,_+"middle")}):(n=l.animate(c,K),o=l.animate(f,K),h.toggleClass(c,_+"top "+_+"middle"),h.addClass(f,_+"top"),r=function(){h.removeClass(c,_+"middle")}),e?i._index=s=0:s=++i._index,t||i.inputChanged(i._index,a),i._nextAnimationThenable=o,i._animationThenable=n,i._Promise.all([o,n]).then(function(){return r(),i._handleNext(s,length),i._checkArrows(),!0})})},e.prototype._handleNext=function(t,e){var i=this._isInfinite,s=this._itemNodes,n=s.length,o=this.utils.isArray;if(i&&(n<3||o(this._preClonedNodes)||o(this._postClonedNodes)))return void this._initializeIndex(t);var r=this._container;this._outerStart?(i||t>1)&&(this.dom.insertBefore(s[this._previousIndex],Array.prototype.slice.call(r.childNodes,0,3)),this._fade||(r.style[this._transform]=this._calculateStaticTranslation(e),this._forceRepaint(r))):this._outerStart=!0,this._setIndexWindow(),(i||t<n-1)&&r.insertBefore(s[this._nextIndex],null)},e.prototype._translatePrevious=function(t,e,i){var s=this;return this._cancelCurrentAnimations().then(function(){s._outerStart||s._initializeOuterNodes();var n={};n[s._transform]=s._calculateStaticTranslation(t);var o,r=s._initiateAnimation({properties:n}),a=s._index;return i?s._index=o=s._itemNodes.length-1:o=--s._index,e||s.inputChanged(s._index,a),r.then(function(){return s._handlePrevious(o,-t),s._checkArrows(),!0})})},e.prototype._fadePrevious=function(t,e){var i=this;return this._cancelCurrentAnimations().then(function(){i._outerStart||i._initializeOuterNodes();var s,n,o,r,a=i._index,l=i._animator,h=i.dom,u=i._container,d=Array.prototype.slice.call(u.childNodes),p=d[4],c=d[1],f=i._fade;return 2===f?(o=l.animate(c,K),h.addClass(p,_+"middle"),h.addClass(c,_+"top"),r=function(){h.removeClass(p,_+"top"),h.removeClass(p,_+"middle")}):3===f?(n=l.animate(p,K),h.addClass(c,_+"top"),h.toggleClass(p,_+"top "+_+"middle"),r=function(){h.removeClass(p,_+"middle")}):(n=l.animate(p,K),o=l.animate(c,K),h.toggleClass(p,_+"top "+_+"middle"),h.addClass(c,_+"top"),r=function(){h.removeClass(p,_+"middle")}),e?i._index=s=i._itemNodes.length-1:s=--i._index,t||i.inputChanged(i._index,a),i._nextAnimationThenable=o,i._animationThenable=n,i._Promise.all([o,n]).then(function(){return r(),i._handlePrevious(s,-length),i._checkArrows(),!0})})},e.prototype._handlePrevious=function(t,e){var i=this._isInfinite,s=this._itemNodes,n=s.length,o=this.utils.isArray;if(i&&(n<3||o(this._preClonedNodes)||o(this._postClonedNodes)))return void this._initializeIndex(t);var r=this._container;this._outerEnd?(i||t<n-2)&&this.dom.insertBefore(s[this._nextIndex],Array.prototype.slice.call(r.childNodes,-3)):this._outerEnd=!0,this._setIndexWindow(),(i||t>0)&&(r.insertBefore(s[this._previousIndex],r.firstChild),this._fade||(r.style[this._transform]=this._calculateStaticTranslation(e),this._forceRepaint(r)))},e.prototype._clearInnerNodes=function(){this._removeClones(),this._outerStart=this._outerEnd=!1;var t=this._itemNodes;if(0===t.length)return!1;var e=Array.prototype.slice.call(this._container.childNodes),i=this.dom.insertBefore;switch(e.length){case 9:i(t[this._previousIndex],e.splice(0,3)),i(t[this._nextIndex],e.splice(-3,3)),i(t[this._index],e);break;case 6:var s=this._nextIndex,n=this._index;if(s<0||s===n){i(t[n],e.splice(-3,3)),i(t[0===n?this._previousIndex+1:n-1],e);break}i(t[s],e.splice(-3,3)),i(t[n],e);break;case 3:i(t[this._index],e)}return!0},e.prototype._initializeIndex=function(t){var e=this._clearInnerNodes();if(0===this._itemNodes.length?t=-1:t<0&&(t=0),this._index=t,this._setIndexWindow(),!e)return!1;var i=this._fade,s=this._itemNodes[t];if(i){var n=s.childNodes[1];this.dom.addClass(n,_+"top")}var o=this._container;return o.insertBefore(s,null),i||(o.style[this._transform]=this._calculateStaticTranslation(-this._currentOffset),this._forceRepaint(o)),this._initializeOuterNodes(),this._checkArrows(),!0},e.prototype._initializeOuterNodes=function(){var t=this._getLength();if(!t)return void(this._outerStart=this._outerEnd=!1);var e,i=this._itemNodes,s=this._container,n=i.length;if(n<=1){if(this._isInfinite)return void this._cloneForInfinite(-t)}else{var o=this.utils.isNode;this._outerEnd||(e=i[this._nextIndex],o(e)&&(s.insertBefore(e,null),this._outerEnd=!0)),n>2?!this._outerStart&&(this._isInfinite||this._index>0)&&(e=i[this._previousIndex],o(e)&&(s.insertBefore(e,s.firstChild),this._fade||(s.style[this._transform]=this._calculateStaticTranslation(-t),this._forceRepaint(s)),this._outerStart=!0)):this._isInfinite&&this._cloneForInfinite(-t)}},e.prototype._initiateAnimation=function(t){return this._animationThenable=this._animator.animate(this._container,K,t)},e.prototype._init=function(){var t=this,e=this._addQueue,i=this.context.length;this._setAliases();var s=this._addItems(0,i,0).then(function(){var i=e.indexOf(s);i!==-1&&e.splice(i,1),t._onLoad()}).catch(function(){t._log.debug("An error occurred while processing the "+t.type+". Please ensure you're context is correct."),t._loaded=!1});e.push(s),this._setListener(),this._setTransform()},e.prototype._addEventListeners=function(){var t=this,e=this._type.split(" ");if(e.indexOf("tap")!==-1&&this._initializeTap(),e.indexOf("swipe")!==-1&&this._initializeSwipe(),e.indexOf("track")!==-1&&this._initializeTrack(),e.indexOf("auto")!==-1&&this._initializeAuto(),!this._fade){var i=!1;this.addEventListener(this._window,"resize",function(){i||(i=!0,t.utils.requestAnimationFrame(function(){i=!1;var e=t._length,s=t._getLength();s&&e!==s&&(t._isInfinite||0!==t._index)&&(t._container.style[t._transform]=t._calculateStaticTranslation(e-s))}))},!1)}},e.prototype._removeEventListeners=function(){for(var t=this._removeListeners;t.length>0;)t.pop()();this._removeInterval(),this._removeSuspend(),this._isInfinite&&this._removeClones(),this._onLoad=lt},e.prototype._cloneForInfinite=function(t){this._removeClones();var e=this.context;if(this.utils.isArray(e)&&0!==e.length){var i=this._outerStart,s=this._outerEnd;if(!i||!s){var n,o,r,a=this._container,l=this._document;s||(n=l.createComment(S+" clone: start node"),o=l.createComment(S+" clone: end node"),r=a.firstElementChild.cloneNode(!0),this._postClonedNodes=[n,r,o],a.insertBefore(n,null),a.insertBefore(r,null),a.insertBefore(o,null),this._outerEnd=!0),i||(n=l.createComment(S+" clone: start node"),o=l.createComment(S+" clone: end node"),r=a.lastElementChild.cloneNode(!0),this._preClonedNodes=[n,r,o],a.insertBefore(o,a.firstChild),a.insertBefore(r,a.firstChild),a.insertBefore(n,a.firstChild),this._outerStart=!0,this._fade||(a.style[this._transform]=this._calculateStaticTranslation(t),this._forceRepaint(a)))}}},e.prototype._removeClones=function(){var t=this._container,e=this._preClonedNodes,i=this._postClonedNodes,s=this.utils.isArray;s(e)&&(t.removeChild(e[0]),t.removeChild(e[1]),t.removeChild(e[2])),s(i)&&(t.removeChild(i[0]),t.removeChild(i[1]),t.removeChild(i[2])),this._preClonedNodes=this._postClonedNodes=null},e.prototype._initializeAuto=function(){this._isAuto=!0,this._initiateInterval()},e.prototype._initiateInterval=function(){this._removeInterval=this.utils.setInterval(this.goToNext,this._interval,null,this)},e.prototype._suspendInterval=function(){var t=this;this._isAuto&&!this._isPaused&&(this._removeSuspend(),this._removeInterval(),this._removeSuspend=this.utils.defer(function(){t._initiateInterval(),t._removeSuspend=lt},this._suspend))},e.prototype._initializeTap=function(){var t=this;this.utils.isNode(this._forwardArrow)||this._createArrowElements();var e=this._removeListeners;e.push(this.addEventListener(this._backArrow,G,function(){t._suspendInterval(),t.goToPrevious()},!1)),e.push(this.addEventListener(this._forwardArrow,G,function(){t._suspendInterval(),t.goToNext()},!1)),this._checkArrows()},e.prototype._createArrowElements=function(){var t=this._document,e=this._viewport,i=this._backArrow=t.createElement("div"),s=this._forwardArrow=t.createElement("div"),n=t.createElement("span"),o=t.createElement("span");this._isVertical?(n.className=_+"icon-arrow-up",o.className=_+"icon-arrow-down"):(n.className=_+"icon-arrow-left",o.className=_+"icon-arrow-right"),i.className=_+"back-arrow",s.className=_+"forward-arrow",i.appendChild(n),s.appendChild(o),e.appendChild(i),e.appendChild(s)},e.prototype._checkArrows=function(){var t=this.utils,e=t.isNode;if(!this._isInfinite&&e(this._forwardArrow)&&e(this._backArrow)){var i=this.context.length,s=this._index;if(t.isNull(s))return this._backArrow.setAttribute(k,""),void this._forwardArrow.setAttribute(k,"");s<=0?this._backArrow.setAttribute(k,""):this._backArrow.removeAttribute(k),s>=i-1?this._forwardArrow.setAttribute(k,""):this._forwardArrow.removeAttribute(k)}},e.prototype._initializeSwipe=function(){var t,e,i=this._viewport,s=this._handleSwipe;this._isVertical?(t=Y+"up",e=Y+"down"):(t=Y+"left",e=Y+"right");var n=this._removeListeners;n.push(this.addEventListener(i,t,s,!1)),n.push(this.addEventListener(i,e,s,!1))},e.prototype._initializeTrack=function(){var t,e,i=this._viewport,s=this._track,n=this._touchEnd;this._isVertical?(t=Q+"up",e=Q+"down"):(t=Q+"left",e=Q+"right");var o=this._removeListeners;o.push(this.addEventListener(i,t,s,!1)),o.push(this.addEventListener(i,e,s,!1)),o.push(this.addEventListener(i,W,this._touchStart,!1)),o.push(this.addEventListener(i,$,n,!1)),o.push(this.addEventListener(i,H,n,!1))},e.prototype._handleSwipe=function(t){var e=t.direction.primary,i=!1;switch(e){case"left":!this._isVertical&&(this._isInfinite||this._index<this.context.length-1)&&(this._suspendInterval(),i=!0,this.goToNext());break;case"right":!this._isVertical&&(this._isInfinite||this._index>0)&&(this._suspendInterval(),i=!0,this.goToPrevious());break;case"up":this._isVertical&&(this._isInfinite||this._index<this.context.length-1)&&(this._suspendInterval(),i=!0,this.goToNext());break;case"down":this._isVertical&&(this._isInfinite||this._index>0)&&(this._suspendInterval(),i=!0,this.goToPrevious());break;default:return}this._hasSwiped=i},e.prototype._touchStart=function(t){this._inTouch||(this._isAuto&&(this._removeInterval(),this._removeInterval=lt),this._inTouch=!0,this._hasMoved=!1,this._lastTouch={x:t.clientX,y:t.clientY})},e.prototype._touchEnd=function(t){var e=this,i=this._inTouch,s=this._hasMoved,n=this._hasSwiped;if(this._inTouch=this._hasSwiped=this._hasMoved=!1,i&&!n&&(this._isAuto&&!this._isPaused&&this._initiateInterval(),s)){var o=this._isVertical?t.clientY-this._lastTouch.y:t.clientX-this._lastTouch.x,r=this._getLength();return r&&Math.abs(o)>Math.ceil(r/2)?o<0?void this.goToNext().then(function(t){t||e._reset()}):void this.goToPrevious().then(function(t){t||e._reset()}):void this._reset()}},e.prototype._track=function(t){var e=this;if(this._inTouch){if(this._fade)return void(this._hasMoved=!0);this._hasMoved||this._cancelCurrentAnimations().then(function(){e._outerStart&&e._outerEnd||e._initializeOuterNodes()}),this._hasMoved=!0,this.utils.requestAnimationFrame(function(){var i=e._calculateDynamicTranslation(t);null!==i&&(e._container.style[e._transform]=i)})}},e.prototype._calculateStaticTranslation=function(t){return this._isVertical?"translate3d(0,"+(this._currentOffset+=t)+"px,0)":"translate3d("+(this._currentOffset+=t)+"px,0,0)"},e.prototype._calculateDynamicTranslation=function(t){var e;return this._isVertical?(e=t.clientY-this._lastTouch.y,Math.abs(e)>this._getLength()?(this._touchEnd(t),null):"translate3d(0,"+(this._currentOffset+e)+"px,0)"):(e=t.clientX-this._lastTouch.x,Math.abs(e)>this._getLength()?(this._touchEnd(t),null):"translate3d("+(this._currentOffset+e)+"px,0,0)")},e.prototype._setTransform=function(){var t=this._container.style,e=this.utils.isUndefined,i=this._compat.vendorPrefix;e(t[i.lowerCase+"Transform"])?e(t[i.upperCase+"Transform"])?this._transform="transform":this._transform=i.upperCase+"Transform":this._transform=i.lowerCase+"Transform"},e.prototype._getLength=function(){return this._length=this._isVertical?this._viewport.offsetHeight:this._viewport.offsetWidth},e.prototype._validateOrientation=function(t){if(this.utils.isUndefined(t))return"horizontal";var e;return"horizontal"===t?e=t:"vertical"===t?(e=t,this._isVertical=!0):(this._log.debug('Invalid orientation "'+t+'" for '+this.type+'. Defaulting to "horizontal."'),e="horizontal"),e},e.prototype._appendItems=function(t){if(this._itemNodes=this._itemNodes.concat(t),this._loaded){var e=this._index;if(0===this._removeListeners.length)return this._addEventListeners(),this._initializeIndex(0),void this.inputChanged(0,e);e>=this._itemNodes.length-2&&this._initializeIndex(e)}},e.prototype._removeItems=function(t,e){for(var i=this._TemplateControlFactory.dispose,s=this.controls,n=this._itemNodes,o=t+e;o-- >t;)i(s[o]),n.pop();this._updateResource(s.length-1),this._verifyLength()},e.prototype._cancelCurrentAnimations=function(){if(this._fade){var t=this.utils.isNull,e=void 0,i=void 0;return t(this._nextAnimationThenable)||(i=this._nextAnimationThenable.cancel()),t(this._animationThenable)||(e=this._animationThenable.cancel()),this._Promise.all([e,i])}return this.utils.isNull(this._animationThenable)?this._Promise.resolve():this._animationThenable.cancel()},e.prototype._forceRepaint=function(t){var e=t.style,i=e.display,s="none";return e.display===s?void t.offsetWidth:(e.display=s,t.offsetWidth,void(e.display=i))},e._inject={_document:r,_window:o,_compat:s,_TemplateControlFactory:h},e}(plat.ui.controls.ForEach);t.Carousel=Tt,plat.register.control(S,Tt);var Et=function(t){function e(){var e=this;t.call(this),this.templateString=this.__templateString,this._aliases={index:D.index,even:D.even,odd:D.odd,first:D.first,last:D.last,group:D.group},this._templates={},this._isVertical=!0,this._scrollReady=!0,this._isLoading=!1,this._scrollPosition=0,this._removeScroll=lt,this._isRefreshing=!1,this._touchState=0,this._hasMoved=!1,this._lastTouch={x:0,y:0},this._nodeNormalizeRegex=/-|\.|_/g,this._isGrouped=!1,this._visibilityRemoveListeners=[],this.__templateString='<div class="plat-listview-viewport">\n    <div class="plat-scroll-container">\n        <div class="plat-listview-container"></div>\n    </div>\n</div>\n',this.__listenerSet=!1,this.itemsLoaded=new this._Promise(function(t,i){e.__resolveFn=t,e.__rejectFn=i}).catch(lt)}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,A+" "+(t||""))},e.prototype.initialize=function(){var t=this.options||(this.options={}),e=t.value||(t.value={});this.templateUrl=e.templateUrl||this.templateUrl,this.setClasses()},e.prototype.setTemplate=function(){if(this.templateString!==this.__templateString||this.utils.isString(this.templateUrl)){var t=this.dom.serializeHtml(this.__templateString),e=this.element;this.innerTemplate=this.dom.appendChildren(e.childNodes),e.appendChild(t)}},e.prototype.contextChanged=function(t,e){this.utils.isArray(t)?this._setListener():(this._log.debug(this.type+" context set to something other than an Array."),t=[]),this._executeEvent([{object:t,type:"splice"}])},e.prototype.loaded=function(){var t=this.options.value,e=this.utils,i=e.isString,s=this.element,n=this._viewport=s.firstElementChild,o=this._scrollContainer=n.firstElementChild,r=this._loading=t.loading,a=this._animate=t.animate===!0,l=t.onItemsRequested,h=t.onRefresh,u=t.itemTemplate,d=t.scrollElement;if(this._container=o.firstElementChild,this.dom.addClass(s,_+this._validateOrientation(t.orientation)+(a?" "+_+"animated":"")),i(d)&&(d=this._document.querySelector(d)),e.isNode(d)&&(this._scrollContainer=d,this.dom.addClass(s,_+"no-scroller")),!i(u))return void this._log.debug("No item template or item template selector specified for "+this.type+".");var p=this._normalizeTemplateName(u),c=t.headerTemplate,f=i(c)?this._normalizeTemplateName(c):null;this._parseInnerTemplate(p,f),this._determineTemplates(u,p,f),this._defaultGroup={name:null,control:this,itemContainer:this._container,element:s,index:null,itemCount:0,addQueue:[],animationQueue:[]};var m=!1;return i(r)&&(i(l)?this._determineLoading(l,t.infiniteProgress!==!1):this._log.debug(this.type+' loading type specified as "'+r+'" but no option specifying an onItemsRequested handler.')),i(h)&&(m=!0,this._initializeRefresh(h)),this._initializeTracking("incremental"===r,m),e.isArray(this.context)?(this._setAliases(),this._setContainerHeight(),this.render(),void this._setListener()):void(e.isNull(this.context)||this._log.debug(this.type+"'s context must be an Array."))},e.prototype.dispose=function(){for(var t=this._visibilityRemoveListeners;t.length>0;)t.pop()();this._removeScroll(),this.utils.isFunction(this.__rejectFn)&&(this.__rejectFn(),this.__resolveFn=this.__rejectFn=null)},e.prototype.render=function(t,e,i){var s=this.utils.isNumber,n=i||this._defaultGroup,o=n.control,r=this===o?this.context:o.context.items;s(t)||(t=0);var a=r.length-t,l=s(e)&&a>=e?e:a;this._createItems(t,l,n,0)},e.prototype.rerender=function(t){this.render(0,null,t)},e.prototype._childContextChanged=function(t,e,i){this._executeChildEvent(t,[{object:e||[],type:"splice"}])},e.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this._executeEvent),this.__listenerSet=!0)},e.prototype._setAliases=function(){var t=this.options.value.aliases,e=this.utils;if(e.isObject(t))for(var i,s=this._aliases,n=e.isString,o=Object.keys(s),r=o.length,a=0;a<r;++a)i=t[o[a]],n(i)&&(s[o[a]]=i)},e.prototype._determineTemplates=function(t,e,i){var s,n=this.utils,o=this.bindableTemplates,r=this._templates;if(n.isString(i)&&(this._isGrouped=!0,this.dom.addClass(this._container,_+"grouped"),s=r[i],n.isNode(s)?(this._headerTemplate=i,this.bindableTemplates.add(i,s),delete r[i]):this._log.debug(A+' group header template "'+i+'" was not a template defined in the DOM.'),this._headerTemplatePromise=this._createGroupTemplate()),s=r[e],n.isNode(s))return this._itemTemplate=e,this.bindableTemplates.add(e,s),void delete r[e];var a=this.findProperty(t)||{};if(!n.isFunction(a.value))return void this._log.debug(A+' item template "'+t+'" was neither a template defined in the DOM nor a template selector function in its control hiearchy.');this._templateSelector=a.value.bind(a.control),this._templateSelectorKeys={};for(var l,h=Object.keys(r);h.length>0;)l=h.pop(),o.add(l,r[l]),delete r[l]},e.prototype._createGroupTemplate=function(){var t,e=this,i=this._document,s=this.bindableTemplates,n=this._headerTemplate,o=A+"-group",r=i.createElement("div"),a=i.createElement("div");return r.className=o,a.className=A+"-items",this.utils.isString(n)&&(t=s.templates[n].then(function(t){r.insertBefore(t.cloneNode(!0),null)})),this._Promise.resolve(t).then(function(){r.insertBefore(a,null),s.add(o,r)}).then(null,function(t){e._log.debug(e.type+" error: "+t)})},e.prototype._addGroups=function(t,e,i){for(var s=this,n=e,o=+(e+t),r=[];e<o;)r.push(this._bindGroup(e++));return this._Promise.all(r).then(function(t){for(var e=t.length,o=0;o<e;++o)s._addGroup(o+n,t[o],o<i)})},e.prototype._addGroup=function(e,i,s){var n,o,r=this,a=this.utils,l=this.context,h=this._groups||(this._groups={}),u=l[e],d=u.group,p=i.childNodes[1],_=p.lastElementChild,c=this.controls[e],f=h[d]={name:d,index:e,element:p,itemContainer:_,control:c,itemCount:0,addQueue:[],animationQueue:[]},m="items";if(c.dispose=function(){t.prototype.dispose.call(r),delete h[d]},c.observe(function(t,e){var i=t.group;if(i!==d&&a.isObject(t)){var s=h[d];delete h[d],s.name=i,h[i]=s,d=i,n(),o(),n=c.observe(r._childContextChanged.bind(r,d),m),o=c.observeArray(r._executeChildEvent.bind(r,d),m)}}),n=c.observe(this._childContextChanged.bind(this,d),m),o=c.observeArray(this._executeChildEvent.bind(this,d),m),this._createItems(0,(u.items||[]).length,f,0),s){var v=this._defaultGroup.animationQueue,g={animation:this._animator.enter(i,q,this._container).then(function(){var t=v.indexOf(g);t>-1&&v.splice(t,1),a.requestAnimationFrame(r._setGroupContainerPadding.bind(r,p))}),op:null};return void v.push(g)}this._container.insertBefore(i,null),a.requestAnimationFrame(this._setGroupContainerPadding.bind(this,p))},e.prototype._bindGroup=function(t){return this.bindableTemplates.bind(A+"-group",t,this._getAliases(this.context,t))},e.prototype._createItems=function(t,e,i,s){var n=this,o=this.utils,r=i||this._defaultGroup,a=r.control,l=this._isVertical,h=this===a;if(h&&this._isGrouped)return void this._headerTemplatePromise.then(function(){n._addGroups(e,t,s)}).then(null,function(t){n._log.debug(n.type+" error: "+t)});var u,d=r.addQueue,p=function(){var t=d.indexOf(u);t!==-1&&d.splice(t,1),h||(r.element.removeAttribute(k),l||h||!n._isGrouped||o.requestAnimationFrame(n._setGroupContainerWidth.bind(n,r.itemContainer)))},_=function(t){n._log.debug(n.type+" error: "+(o.isString(t.message)?t.message:t))};if(o.isFunction(this._templateSelector)){var c=[];r.itemCount+=e;for(var f=0;f<e;++f,++t)c.push(this._renderUsingFunction(t,r));var m=this.itemsLoaded=this._Promise.all(c).then(function(t){for(var e=t.length,i=0;i<e;++i)n._appendRenderedItem(t[i],r,i<s)}).then(p,_);return void d.push(m)}var v=this._itemTemplate;o.isUndefined(this.bindableTemplates.templates[v])||(this._disposeFromIndex(t,r),r.itemCount+=e,u=this._addItems(t,e,r,s).then(p,_),d.push(u))},e.prototype._addItems=function(t,e,i,s){var n,o,r=this,a=i||this._defaultGroup,l=a.control,h=a.itemContainer,u=+(t+e),d=[],p=this._itemTemplate,_=l.bindableTemplates,c=t;for(this===l?(n="",o=this.context):(n="items.",o=l.context.items);t<u;)d.push(_.bind(p,n+t,this._getAliases(o,t++)));return d.length>0&&(this.itemsLoaded=this._Promise.all(d).then(function(t){if(s>0)for(var e=t.length,i=0;i<e;++i)i<s?r._appendAnimatedItem(t[i],a):h.insertBefore(t[i],null);else r._appendItems(t,h);r._updateResource(c-1,l),r.utils.isFunction(r.__resolveFn)&&(r.__resolveFn(),r.__resolveFn=r.__rejectFn=null)}).catch(function(t){r.utils.postpone(function(){r._log.debug(t)})})),this.itemsLoaded},e.prototype._renderUsingFunction=function(t,e){var i,s,n,o=this,r=this._Promise,a=this.utils,l=e||this._defaultGroup,h=l.control;return this===h?(i=t,s=this.context):(i="items."+t,s=h.context.items,n=l.name),r.resolve(this._templateSelectorPromise).then(function(){return o._templateSelectorPromise=r.resolve(o._templateSelector(s[t],t,n))}).then(function(e){var n=h.bindableTemplates,r=n.templates,u=h.controls,d=o._normalizeTemplateName(e),p=l.name,_=o._templateSelectorKeys[p],c=t<u.length;if(a.isUndefined(_)&&(_=o._templateSelectorKeys[p]={}),!a.isUndefined(r[d])){if(c){if(d===_[t])return;return _[t]=d,n.replace(t,d,i,o._getAliases(s,t))}return _[t]=d,n.bind(d,i,o._getAliases(s,t))}o._log.debug(o.type+' template "'+e+'" was not found.'),c&&o._TemplateControlFactory.dispose(u[t])})},e.prototype._appendRenderedItem=function(t,e,i){var s=this.utils,n=e||this._defaultGroup;if(!s.isNull(t)&&!s.isArray(t)){if(i===!0){var o=n.animationQueue,r={animation:this._animator.enter(t,q,n.itemContainer).then(function(){var t=o.indexOf(r);t!==-1&&o.splice(t,1)}),op:null};o.push(r)}else n.itemContainer.insertBefore(t,null);s.isFunction(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null)}},e.prototype._updateResource=function(t,e){var i=e.controls;t<0||t>=i.length||i[t].resources.add(this._getAliases(this===e?this.context:e.context.items,t))},e.prototype._getAliases=function(t,e){var i=0===(1&e),s={},n=this._aliases,o=nt;return s[n.index]={value:e,type:o},s[n.even]={value:i,type:o},s[n.odd]={value:!i,type:o},s[n.first]={value:0===e,type:o},s[n.last]={value:e===t.length-1,type:o},s},e.prototype._appendItems=function(t,e){this.dom.appendChildren(t,e)},e.prototype._appendAnimatedItem=function(t,e){if(this.utils.isNode(t)){var i=e.animationQueue,s={animation:this._animator.enter(t,q,e.itemContainer).then(function(){var t=i.indexOf(s);t!==-1&&i.splice(t,1)}),op:null};i.push(s)}},e.prototype._removeItems=function(t,e,i){for(var s=this._TemplateControlFactory.dispose,n=i.control,o=n.controls,r=t+e,a=r>t;r-- >t;)s(o[r]);this._updateResource(o.length-1,n),this!==n&&(0===o.length?i.element.setAttribute(k,""):a&&this._isGrouped&&!this._isVertical&&this.utils.requestAnimationFrame(this._setGroupContainerWidth.bind(this,i.itemContainer)))},e.prototype._disposeFromIndex=function(t,e){for(var i=e||this._defaultGroup,s=i.control,n=s.controls,o=this._TemplateControlFactory.dispose,r=n.length,a=r>t;r-- >t;)o(n[r]);this!==s&&(0===n.length?e.element.setAttribute(k,""):a&&this._isGrouped&&!this._isVertical&&this.utils.requestAnimationFrame(this._setGroupContainerWidth.bind(this,e.itemContainer)))},e.prototype._determineLoading=function(t,e){var i=this,s=this.findProperty(t)||{};if(!this.utils.isFunction(s.value))return void this._log.debug(A+' onItemsRequested function "'+t+'" was not found.');this._requestItems=s.value.bind(s.control);var n;switch(this._loading){case"infinite":var o,r=lt;o=this.addEventListener(this._scrollContainer,"scroll",function(){i._scrollReady&&(i._scrollReady=!1,r=i.utils.requestAnimationFrame(function(){i._scrollReady=!0,i._onScroll()}))},!1),this._removeScroll=function(){i._scrollReady=!1,r(),o()},e&&(n=this._loadingProgressRing=this._document.createElement("div"),n.className=_+"infinite",n.insertBefore(this._generateProgressRing(),null)),this.itemsLoaded.then(this._onScroll.bind(this));break;case"incremental":n=this._loadingProgressRing=this._document.createElement("div"),n.className=_+"incremental",n.setAttribute(k,""),n.insertBefore(this._generateProgressRing(),null),this.element.insertBefore(n,null)}},e.prototype._onScroll=function(){var t=this._scrollContainer,e=this._scrollPosition,i=this._isVertical?t.scrollTop+t.offsetHeight:t.scrollLeft+t.offsetWidth;return e>i?void(this._scrollPosition=i):void(e+5>i||(this._scrollPosition=i,this._handleScroll()))},e.prototype._handleScroll=function(){var t=this,e=this._scrollContainer,i=.8*(this._isVertical?e.scrollHeight:e.scrollWidth);if(0!==i&&this._scrollPosition>=i){var s=this.utils,n=this._requestItems();if(n===!1)this._removeScroll();else if(s.isPromise(n)){var o=this._loadingProgressRing,r=!s.isNull(o),a=this._container;this._scrollReady=!1,r&&s.requestAnimationFrame(function(){a.insertBefore(o,null)}),n.then(function(e){r&&s.requestAnimationFrame(function(){a.removeChild(o)}),e!==!1&&(t._scrollReady=!0)})}else s.postpone(function(){t.itemsLoaded.then(function(){t._scrollReady&&t._handleScroll()})})}},e.prototype._initializeRefresh=function(t){var e=this.findProperty(t)||{};if(!this.utils.isFunction(e.value))return void this._log.debug(A+' onRefresh function "'+t+'" was not found.');this._refresh=e.value.bind(e.control);var i=this._refreshProgressRing=this._document.createElement("div");i.className=_+"refresh",i.setAttribute(k,""),i.insertBefore(this._generateProgressRing(),null),this.element.insertBefore(i,null)},e.prototype._initializeTracking=function(t,e){if(t||e){this._setTransform();var i,s;this._isVertical?(i=Q+"down",s=Q+"up"):(i=Q+"right",s=Q+"left");var n,o,r=this._viewport;this.addEventListener(r,W,this._touchStart,!1),t&&(n=this._touchEndLoad,o=this._trackLoad,this.addEventListener(r,H,n,!1),this.addEventListener(r,$,n,!1),this.addEventListener(r,X,n,!1),this.addEventListener(r,i,o,!1),this.addEventListener(r,s,o,!1)),e&&(n=this._touchEndRefresh,o=this._trackRefresh,this.addEventListener(r,H,n,!1),this.addEventListener(r,$,n,!1),this.addEventListener(r,X,n,!1),this.addEventListener(r,i,o,!1),this.addEventListener(r,s,o,!1))}},e.prototype._touchStart=function(t){var e=this;if(0===this._touchState){if(!this._isVertical){var i=Math.ceil(t.offsetY),s=this._viewport.offsetHeight-20;if(i>=s)return}return this._touchState=1,this._lastTouch={x:t.clientX,y:t.clientY},this.utils.isNull(this._touchAnimationThenable)?void(this._touchState=2):void this._touchAnimationThenable.cancel().then(function(){e._touchAnimationThenable=null,e._touchState=2})}},e.prototype._touchEndLoad=function(t){var e=this._isLoading;if(this._isLoading=!1,!e)return void(this._isRefreshing||(this._touchState=0));var i,s,n=this._scrollContainer;return this._isVertical?(i=n.scrollTop+n.offsetHeight,s=n.scrollHeight):(i=n.scrollLeft+n.offsetWidth,s=n.scrollWidth),i+1<s?void(this._touchState=0):void this._touchEnd(t,!1)},e.prototype._touchEndRefresh=function(t){var e=this._isRefreshing;return this._isRefreshing=!1,e?(this._isVertical?this._scrollContainer.scrollTop:this._scrollContainer.scrollLeft)>0?void(this._touchState=0):void this._touchEnd(t,!0):void(this._isLoading||(this._touchState=0))},e.prototype._touchEnd=function(t,e){var i=this,s=this._touchState,n=this._hasMoved;if(this._hasMoved=!1,!(s<2)&&n){var o,r={},a=this.dom,l=this._viewport,h=e?this._refreshProgressRing:this._loadingProgressRing,u=3===s;if(u){var d=void 0;this._isVertical?(d=e?h.offsetHeight:-h.offsetHeight,o="translate3d(0,"+d+"px,0)"):(d=e?h.offsetWidth:-h.offsetWidth,o="translate3d("+d+"px,0,0)")}else o=this._preTransform;r[this._transform]=o,this._touchAnimationThenable=this._animator.animate(l,K,{properties:r}).then(function(){return i._touchState=4,i._hasMoved=!1,i._touchAnimationThenable=null,u?i._Promise.resolve(e?i._refresh():i._requestItems()):(a.removeClass(l,_+"manipulation-prep"),h.setAttribute(k,""),i._Promise.resolve())}).then(function(){return u?(a.removeClass(h,_+"play"),r[i._transform]=i._preTransform,i._touchAnimationThenable=i._animator.animate(l,K,{properties:r}).then(function(){i._touchState=0,i._touchAnimationThenable=null,a.removeClass(l,_+"manipulation-prep"),h.setAttribute(k,"")})):void(i._touchState=0)}).then(null,function(t){i._touchState=0,i._log.debug(i.type+" error: "+t)})}},e.prototype._trackLoad=function(t){if(!this._isRefreshing){if(!this._isLoading){var e=this._scrollContainer,i=void 0,s=void 0;if(this._isVertical){if("up"!==t.direction.y)return;i=e.scrollTop+e.offsetHeight,s=e.scrollHeight}else{if("left"!==t.direction.x)return;i=e.scrollLeft+e.offsetWidth,s=e.scrollWidth}if(i+1<s)return;this._isLoading=!0}this._track(t,!1)}},e.prototype._trackRefresh=function(t){if(!this._isLoading){if(!this._isRefreshing){if(this._isVertical){if("down"!==t.direction.y||this._scrollContainer.scrollTop>0)return}else if("right"!==t.direction.x||this._scrollContainer.scrollLeft>0)return;this._isRefreshing=!0}this._track(t,!0)}},e.prototype._track=function(t,e){var i=this,s=this._touchState;if(2===s||3===s){var n=this._calculateTranslation(t,e);this.utils.requestAnimationFrame(function(){i._viewport.style[i._transform]=n})}},e.prototype._calculateTranslation=function(t,e){var i,s,n=this._isVertical,o=e?this._refreshProgressRing:this._loadingProgressRing;return n?(i=t.clientY-this._lastTouch.y,s=o.offsetHeight):(i=t.clientX-this._lastTouch.x,s=o.offsetWidth),e&&i<0||!e&&i>0?i=0:this._hasMoved?Math.abs(i)>=s?this._touchState<3&&(this._touchState=3,this.dom.addClass(o,_+"play")):3===this._touchState&&(this._touchState=2,this.dom.removeClass(o,_+"play")):(this._hasMoved=!0,this.dom.addClass(this._viewport,_+"manipulation-prep"),o.removeAttribute(k)),n?"translate3d(0,"+i+"px,0)":"translate3d("+i+"px,0,0)"},e.prototype._setTransform=function(){var t=this._viewport.style,e=this.utils.isUndefined,i=this._compat.vendorPrefix;e(this._preTransform=t[i.lowerCase+"Transform"])?e(this._preTransform=t[i.upperCase+"Transform"])?(this._preTransform=t.transform,this._transform="transform"):this._transform=i.upperCase+"Transform":this._transform=i.lowerCase+"Transform"},e.prototype._parseInnerTemplate=function(t,e){for(var i,s,n,o=this._templates,r=Array.prototype.slice,a=this.dom.appendChildren,l=this._document,h=!this.utils.isNull(e),u=r.call(this.innerTemplate.childNodes);u.length>0;)i=u.pop(),i.nodeType===Node.ELEMENT_NODE&&(s=this._normalizeTemplateName(i.nodeName),h&&s===e?(n=l.createElement("div"),n.className=_+"header"):n=l.createDocumentFragment(),
a(i.childNodes,n),o[s]=n)},e.prototype._executeEvent=function(t){var e="_"+t[0].type;this.utils.isFunction(this[e])&&this[e](t)},e.prototype._executeChildEvent=function(t,e){var i=this.utils,s="_"+e[0].type;if(i.isFunction(this[s])){var n=this._groups[t];if(i.isNull(n))return;this[s](e,n)}},e.prototype._push=function(t,e){var i=t[0],s=i.addedCount;this._createItems(i.index,s,e,this._animate?s:0)},e.prototype._pop=function(t,e){var i=this,s=e||this._defaultGroup,n=s.addQueue,o=t[0],r=o.object.length;if(0!==o.removed.length){var a=o.object.length;s.itemCount>0&&s.itemCount--,this._Promise.all(n).then(function(){return i._animate?void i._animateItems(r,1,U,s,"leave",!1).then(function(){i._removeItems(a,1,s)}):void i._removeItems(a,1,s)})}},e.prototype._unshift=function(t,e){if(this.utils.isFunction(this._templateSelector))return void this.rerender(e);var i=e||this._defaultGroup,s=t[0],n=s.addedCount;if(this._animate){var o=i.animationQueue,r=o.length;this._animateItems(0,n,q,i,null,r>0&&"clone"===o[r-1].op)}this._createItems(s.object.length-n,n,i,0)},e.prototype._shift=function(t,e){var i=this,s=e||this._defaultGroup,n=s.addQueue,o=t[0];if(0!==o.removed.length){this._animate&&0===n.length&&(n=n.concat([this._animateItems(0,1,U,s,"clone",!0)]));var r=o.object.length;s.itemCount>0&&s.itemCount--,this._Promise.all(n).then(function(){i._removeItems(r,1,s)})}},e.prototype._splice=function(t,e){var i=this,s=this.utils,n=t[0],o=e||this._defaultGroup,r=n.addedCount,a=o.itemCount,l=(o.control,o.addQueue),h=this._animate;if(s.isNull(r)){h&&this._cancelCurrentAnimations();var u=n.object.length,d=a-u;if(u>a){if(s.isFunction(this._templateSelector))return void(s.isNull(n.index)?this.rerender(o):this.render(n.index,r,o));this._createItems(a,-d,o,0)}else a>u&&(o.itemCount>=d?o.itemCount-=d:o.itemCount=0,this._Promise.all(l).then(function(){i._removeItems(a-d,d,o)}))}else{var p=n.removed.length,_=o.animationQueue;if(r>p){var c=r-p,f=void 0;if(s.isFunction(this._templateSelector))return void(s.isNull(n.index)?this.rerender(o):this.render(n.index,r,o));if(h){f=r;var m=_.length,v=n.index;a<r-v&&(f=a-v),this._animateItems(v,f,q,o,null,m>0&&"clone"===_[m-1].op),f=r-f}else f=0;this._createItems(n.object.length-c,c,o,f)}else if(p>r){var g=r>0;h&&!g&&0===l.length&&(l=l.concat([this._animateItems(n.index,p,U,o,"clone",!0)]));var y=p-r;o.itemCount>=y?o.itemCount-=y:o.itemCount=0,this._Promise.all(l).then(function(){if(h&&g){var t=_.length;i._animateItems(n.index,r,q,o,null,t>0&&"clone"===_[t-1].op)}i._removeItems(a-y,y,o)})}}},e.prototype._animateItems=function(t,e,i,s,n,o){switch(n){case"clone":return this._handleClonedContainerAnimation(this._getAnimatedNodes(t,e,s),i,s,o===!0);case"leave":return this._handleLeave(this._getAnimatedNodes(t,e,s),i,s);default:return this._handleSimpleAnimation(this._getAnimatedNodes(t,e,s),i,s,o===!0)}},e.prototype._getAnimatedNodes=function(t,e,i){if(this._isGrouped&&i===this._defaultGroup){var s=3,n=t*s;return Array.prototype.slice.call(i.itemContainer.childNodes,n,e*s+n)}var o=this.utils,r=o.isNode,a=Array.prototype.slice.call(i.itemContainer.childNodes),l=t+e-1,h=i.control.controls;h.length<=l&&(l=h.length-1);var u=h[t].startNode,d=h[l].endNode;if(!r(u)||!r(d))return[];var p=a.indexOf(u),_=a.indexOf(d);return p===-1||_===-1?[]:a.slice(p,_+1)},e.prototype._handleSimpleAnimation=function(t,e,i,s){if(0===t.length)return this._Promise.resolve();var n,o=(i.itemContainer,i.animationQueue),r=this._animator.create(t,e),a=r.current.then(function(){var t=o.indexOf(n);t!==-1&&o.splice(t,1)}),l=function(){return r.previous.then(function(){a.start()}),a};if(n={animation:a,op:null},s&&o.length>0){var h=this._cancelCurrentAnimations().then(l);return o.push(n),h}return o.push(n),l()},e.prototype._handleLeave=function(t,e,i){if(0===t.length)return this._Promise.resolve();var s,n=(i.itemContainer,i.animationQueue),o=this._animator.leave(t,e).then(function(){var t=n.indexOf(s);t!==-1&&n.splice(t,1)});return s={animation:o,op:"leave"},n.push(s),o},e.prototype._handleClonedContainerAnimation=function(t,e,i,s){if(0===t.length)return this._Promise.resolve();var n,o,r=i.itemContainer,a=r.cloneNode(!0),l=i.animationQueue,h=this.utils.isNull,u=this._animator.create(t,e),d=u.current.then(function(){var t=l.indexOf(o);t>-1&&l.splice(t,1),h(n)||n.replaceChild(r,a)}),p=function(){return n=r.parentNode,h(n)||d.isCanceled()?d:(n.replaceChild(a,r),u.previous.then(function(){d.start()}),d)};if(o={animation:d,op:"clone"},s&&l.length>0){var _=this._cancelCurrentAnimations().then(p);return l.push(o),_}return l.push(o),p()},e.prototype._cancelCurrentAnimations=function(t){for(var e=(t||this._defaultGroup).animationQueue,i=[],s=e.length,n=0;n<s;++n)i.push(e[n].animation.cancel());return this._Promise.all(i)},e.prototype._normalizeTemplateName=function(t){if(this.utils.isString(t))return t.toLowerCase().replace(this._nodeNormalizeRegex,"")},e.prototype._generateProgressRing=function(){var t=this._document,e=t.createElement("div"),i=t.createElement("div");return e.className=A+"-ring "+_+"ring "+_+"ring-0",i.className=_+"animated-ring",e.insertBefore(i,null),e},e.prototype._validateOrientation=function(t){if(this.utils.isUndefined(t))return"vertical";var e;return"vertical"===t?e=t:"horizontal"===t?(e=t,this._isVertical=!1):(this._log.debug('Invalid orientation "'+t+'" for '+this.type+'. Defaulting to "vertical."'),e="vertical"),e},e.prototype._setContainerHeight=function(){if(!this._isVertical&&this._isGrouped){var t=this.element,e=t.offsetHeight;if(!e)return void this._addVisibilityListener(this._setContainerHeight.bind(this),t);e-=this._getScrollBarWidth(),e<0&&(e=0),this._container.style.height=e+"px"}},e.prototype._setGroupContainerWidth=function(t){var e=t.scrollWidth;return e?void(t.parentElement.style.width=e+"px"):void this._addVisibilityListener(this._setGroupContainerWidth.bind(this,t),t)},e.prototype._setGroupContainerPadding=function(t){var e=t.offsetHeight;if(!e)return void this._addVisibilityListener(this._setGroupContainerPadding.bind(this,t),t);var i=t.firstElementChild,s=i.offsetHeight;return s?void(t.style.paddingTop=s+"px"):void this._addVisibilityListener(this._setGroupContainerPadding.bind(this,t),i)},e.prototype._getScrollBarWidth=function(){var t=this._document,e=t.body,i=t.createElement("div"),s=t.createElement("div"),n=i.style,o=s.style;n.width=n.height=o.height="100px",o.width="50px",o.position="absolute",o.top=o.left="0px",o.visibility=o.overflow="hidden",s.insertBefore(i,null),e.insertBefore(s,null);var r=i.offsetHeight;o.overflow="scroll";var a=i.offsetHeight;return r===a&&(a=s.clientHeight),e.removeChild(s),r-a},e.prototype._addVisibilityListener=function(t,e){var i,s=this,n=this._visibilityRemoveListeners,o=function(){t();var e=n.indexOf(i);e!==-1&&n.splice(e,1),0===n.length&&s.element.removeAttribute(O)};i=this.dom.whenVisible(this.utils.requestAnimationFrame.bind(this,o),e),0===n.length&&this.element.setAttribute(O,""),n.push(i)},e._inject={_document:r,_window:o,_compat:s,_animator:a,_Promise:i,_TemplateControlFactory:h},e}(plat.ui.TemplateControl);t.Listview=Et,plat.register.control(A,Et);var wt=function(t){function e(){t.apply(this,arguments),this.templateString='<div class="plat-navbar-left">\n    <div class="plat-navbar-items" plat-control="'+z+'" plat-context="left">\n        <div class="plat-navbar-item" plat-control="'+F+'" plat-options="{ html: content, compile: true }" plat-tap="leftAction(@index)"></div>\n    </div>\n</div>\n<div class="plat-navbar-center">\n    <div class="plat-navbar-items" plat-control="'+z+'" plat-context="center">\n        <div class="plat-navbar-item" plat-control="'+F+'" plat-options="{ html: content, compile: true }" plat-tap="centerAction(@index)"></div>\n    </div>\n</div>\n<div class="plat-navbar-right">\n    <div class="plat-navbar-items" plat-control="'+z+'" plat-context="right">\n        <div class="plat-navbar-item" plat-control="'+F+'" plat-options="{ html: content, compile: true }" plat-tap="rightAction(@index)"></div>\n    </div>\n</div>\n',this.context={left:[{content:"",action:lt}],center:[{content:"",action:lt}],right:[{content:"",action:lt}]},this.hasOwnContext=!0,this._overrides={left:!1,center:!1,right:!1}}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,I+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.setTemplate=function(){var t=this.utils.isNull,e=this.innerTemplate;if(!t(e))for(var i,s,n=this._document,o=this._overrides,r=Array.prototype.slice,a=this.dom.appendChildren,l=r.call(e.childNodes),h=this.element,u=r.call(h.children);l.length>0;)if(i=l.shift(),i.nodeType===Node.ELEMENT_NODE)switch(i.nodeName.toLowerCase()){case"left":o.left=!0,s=n.createElement("div"),s.className=I+"-left",s.setAttribute(V,"left"),h.replaceChild(a(r.call(i.childNodes),s),u[0]);break;case"center":o.center=!0,s=n.createElement("div"),s.className=I+"-center",s.setAttribute(V,"center"),h.replaceChild(a(r.call(i.childNodes),s),u[1]);break;case"right":o.right=!0,s=n.createElement("div"),s.className=I+"-right",s.setAttribute(V,"right"),h.replaceChild(a(r.call(i.childNodes),s),u[2])}},e.prototype.loaded=function(){var t=this.options||{},e=t.value||{},i=this.utils.isString(e.position)&&"bottom"===e.position.toLowerCase()?"-bottom":"-top";this.dom.addClass(this.element,I+i)},e.prototype.setLeft=function(t){this._setComponent("left",t)},e.prototype.setCenter=function(t){this._setComponent("center",t)},e.prototype.setRight=function(t){this._setComponent("right",t)},e.prototype.leftAction=function(t,e){this._executeAction(e,"left",t)},e.prototype.centerAction=function(t,e){this._executeAction(e,"center",t)},e.prototype.rightAction=function(t,e){this._executeAction(e,"right",t)},e.prototype._setComponent=function(t,e){var i=this.context;if(!this.utils.isArray(e)){if(this._overrides[t])return this._parseComponent(e),void(i[t]=e);e=[e]}for(var s=e.length;s-- >0;)this._parseComponent(e[s],i[t][s]);i[t]=e},e.prototype._parseComponent=function(t,e){var i,s,n,o,r=this.utils,a=r.isObject,l=a(e);if(l&&r.isUndefined(t.content)&&(t.content=e.content),r.isFunction(t.action)||(t.action=l?e.action:lt),i=t.customActions,a(i))for(s=Object.keys(i),o=s.length;o-- >0;)n=s[o],this[n]=i[n]},e.prototype._executeAction=function(t,e,i){var s=this.utils,n=this.context[e];return s.isArray(n)&&!s.isNull(i)&&(n=n[i]),s.isFunction(n.action)?void n.action(t):void this._log.debug("An action function is not defined for the component "+n+".")},e._inject={_document:r},e}(plat.ui.TemplateControl);t.Navbar=wt,plat.register.control(I,wt,null,!0);var Pt=function(t){function e(){t.apply(this,arguments),this.templateString='<div plat-control="'+b+'" class="plat-image-ring"></div>\n',this._isBackground=!1,this._img=this._document.createElement("img")}return __extends(e,t),e.prototype.setClasses=function(t,e){this.dom.addClass(e||this.element,L+" "+(t||""))},e.prototype.initialize=function(){this.setClasses()},e.prototype.loaded=function(){var t,e=this.element,i=this.utils,s=i.isString,n=i.isObject,o=this.attributes,r=this.options;if(s(t=o[j]))o.observe(this._setSrc,j);else{if(!s(t=o[rt]))return;o.observe(this._setSrc,rt)}n(r)&&n(r.value)&&(this._isBackground=r.value.isBackground===!0),this._isBackground&&this.dom.addClass(e,_+"background"),this._loader=e.firstElementChild,this._NodeManagerStatic.hasMarkup(t)||this._setSrc(t)},e.prototype._setSrc=function(t,e){var i=this,s=this._img,n=this.element,o=this.dom,r=_+"load-image",a=L+"-error",l=this._loader;o.addClass(s,r),s.src=t,s.onload=function(){i.utils.requestAnimationFrame(function(){return o.removeClass(n,a),i._isBackground?(n.style.backgroundImage='url("'+t+'")',n.contains(s)&&n.removeChild(s),void(n.contains(l)&&n.removeChild(l))):(o.removeClass(s,r),void(n.contains(l)&&n.removeChild(l)))})},s.onerror=function(){i.utils.requestAnimationFrame(function(){o.addClass(n,a),n.contains(s)&&n.removeChild(s),n.contains(l)&&n.removeChild(l)})},n.insertBefore(l,null),n.insertBefore(s,null)},e._inject={_compat:s,_document:r,_NodeManagerStatic:u},e}(plat.ui.TemplateControl);t.Image=Pt,plat.register.control(L,Pt)}(platui||(platui={})),module.exports=platui;
},{}]},{},[2])

